<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <meta name="author" content="myeonggu.kim@kakao.com">
  
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/highlight/prism.css">
  <script src="/highlight/prism.js"></script>
</head>
<body>
  <header>
  <div class="navbar">
    <div>
      <a href="#" id="toggleTocButton" style="margin-left: auto;">+</a>
    </div>
    
    
      
      <div class="dropdown">
        <button class="dropbtn">스터디</button>
        <div class="dropdown-content">
        
          <a href="/study/20260104/">2026.01.04</a>
        
          <a href="/study/20260111/">2026.01.11</a>
        
        </div>
      </div>
      
    
      
      <div class="dropdown">
        <button class="dropbtn">스터디 준비</button>
        <div class="dropdown-content">
        
          <a href="/ready-for-study/20260105/">2026.01.05</a>
        
        </div>
      </div>
      
    
    
  </div>
</header>

<script>
document.getElementById('toggleTocButton').addEventListener('click', function() {
  document.querySelector('.aside').classList.toggle('hidden');
});
</script>

  
<main class="container">
  <aside class="aside">
<span>2026.01.11 에이바우트</span>



<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#2-developel10-구성-계속">2. develop.el10 구성 (계속)</a>
          <ul>
            <li><a href="#22-caddy-구성-계속">2.2 caddy 구성 (계속)</a>
              <ul>
                <li><a href="#4-self-signed-인증서-적용-생성-포함">4) self-signed 인증서 적용 (생성 포함)</a></li>
              </ul>
            </li>
            <li><a href="#23-nexus-구성">2.3 nexus 구성</a>
              <ul>
                <li><a href="#1-nexus-설치">1) nexus 설치</a></li>
                <li><a href="#2-nexus-설정">2) nexus 설정</a>
                  <ul>
                    <li><a href="#데이터-디렉토리-변경">데이터 디렉토리 변경</a></li>
                    <li><a href="#로그-디렉토리-변경">로그 디렉토리 변경</a></li>
                    <li><a href="#java-변경">java 변경</a></li>
                  </ul>
                </li>
                <li><a href="#3-nexus-서비스">3) nexus 서비스</a></li>
              </ul>
            </li>
            <li><a href="#24-postgres-구성">2.4 postgres 구성</a>
              <ul>
                <li><a href="#1-postgres-설치">1) postgres 설치</a></li>
                <li><a href="#2-postgres-설정">2) postgres 설정</a></li>
                <li><a href="#3-postgres-서비스">3) postgres 서비스</a></li>
              </ul>
            </li>
            <li><a href="#25-redis-구성">2.5 redis 구성</a>
              <ul>
                <li><a href="#1-redis-설치">1) redis 설치</a></li>
                <li><a href="#2-redis-설정">2) redis 설정</a></li>
                <li><a href="#3-redis-서비스">3) redis 서비스</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



</aside>

  <div class="main-content">
    <div class="content">
      <article>
        <h1>2026.01.11 에이바우트</h1>
        <div>
          <h2 id="2-developel10-구성-계속">2. develop.el10 구성 (계속)</h2>
<h3 id="22-caddy-구성-계속">2.2 caddy 구성 (계속)</h3>
<h4 id="4-self-signed-인증서-적용-생성-포함">4) self-signed 인증서 적용 (생성 포함)</h4>


<details>
<summary>(script) certmgr.sh</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env bash
</span></span></span><span style="display:flex;"><span>BASEDIR<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cd <span style="color:#66d9ef">$(</span>dirname $0<span style="color:#66d9ef">)</span> <span style="color:#f92672">&amp;&amp;</span> pwd -P<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>SCRIPT_NM<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>0##*/<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># usage</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> USAGE <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  cat <span style="color:#e6db74">&lt;&lt; EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- Usage  $SCRIPT_NM COMMAND
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMAND:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  create ca             # Create CA certificate
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  create server [name]  # Create server certificate
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  create client [name]  # Create client certificate
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">OPTION:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  --host [hostname]     # *default: &#39;develop&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>  exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># //usage</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># options</span>
</span></span><span style="display:flex;"><span>OPTIONS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>LONGOPTIONS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;host:&#34;</span>
</span></span><span style="display:flex;"><span>opts<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>getopt --options <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>OPTIONS<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>              --longoptions <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>LONGOPTIONS<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>              -- <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>eval set -- <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>opts<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> true; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> break
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
</span></span><span style="display:flex;"><span>    --host<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      host<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      shift
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>    --<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>    *<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      argv<span style="color:#f92672">+=(</span>$1<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">esac</span>
</span></span><span style="display:flex;"><span>  shift
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -- options</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># validate</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;el10&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -- validate</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>create<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  local f_ca_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/ca/</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">CA.key&#34;</span>
</span></span><span style="display:flex;"><span>  local f_ca_crt<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/ca/</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">CA.crt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>type<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> in
</span></span><span style="display:flex;"><span>    ca<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      echo <span style="color:#e6db74">&#34;CA 생성&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -f <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> <span style="color:#f92672">]]</span> <span style="color:#f92672">||</span> <span style="color:#f92672">[[</span> -f <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        printf <span style="color:#e6db74">&#34;[ERROR] already exist: </span><span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span><span style="color:#e6db74"> or </span><span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span><span style="color:#e6db74">\n&#34;</span>
</span></span><span style="display:flex;"><span>        exit
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>      openssl genrsa -out <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> <span style="color:#ae81ff">4096</span>
</span></span><span style="display:flex;"><span>      openssl req -x509 -new -key <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span> -subj <span style="color:#e6db74">&#34;/CN=</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">CA&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -nodes -sha256 -days <span style="color:#66d9ef">$((</span><span style="color:#ae81ff">365</span><span style="color:#f92672">*</span><span style="color:#ae81ff">20</span><span style="color:#66d9ef">))</span>
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>      printf <span style="color:#e6db74">&#34;  %-8s: %s\n&#34;</span> <span style="color:#e6db74">&#34;CA&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>f_ca_key%.*<span style="color:#e6db74">}</span>*<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      chmod +r <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>      printf <span style="color:#e6db74">&#34;[INFO] (done) \$ chmod +r </span><span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span><span style="color:#e6db74">\n&#34;</span>
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>    server<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      local f_serv_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/server/</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.key&#34;</span>
</span></span><span style="display:flex;"><span>      local f_serv_csr<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/server/</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.csr&#34;</span>
</span></span><span style="display:flex;"><span>      local f_serv_crt<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/server/</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.crt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      echo <span style="color:#e6db74">&#34;서버 인증서 생성&#34;</span>
</span></span><span style="display:flex;"><span>      openssl genrsa -out <span style="color:#e6db74">${</span>f_serv_key<span style="color:#e6db74">}</span> <span style="color:#ae81ff">4096</span>
</span></span><span style="display:flex;"><span>      openssl req -new -key <span style="color:#e6db74">${</span>f_serv_key<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_serv_csr<span style="color:#e6db74">}</span> -subj <span style="color:#e6db74">&#34;/CN=</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      openssl x509 -req -in <span style="color:#e6db74">${</span>f_serv_csr<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_serv_crt<span style="color:#e6db74">}</span> -days <span style="color:#66d9ef">$((</span><span style="color:#ae81ff">365</span><span style="color:#f92672">*</span><span style="color:#ae81ff">20</span><span style="color:#66d9ef">))</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -CAkey <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> -CA <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span> -CAcreateserial <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -extensions v3_req -extfile &lt;<span style="color:#f92672">(</span>printf <span style="color:#e6db74">&#34;[v3_req]\nsubjectAltName=DNS:</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      printf <span style="color:#e6db74">&#34;  %-8s: %s\n&#34;</span> <span style="color:#e6db74">&#34;server&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.crt <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.key<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      chmod +r <span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.crt <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.key<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>      printf <span style="color:#e6db74">&#34;[INFO] (done) \$ chmod +r </span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.crt <span style="color:#e6db74">${</span>f_serv_csr%.*<span style="color:#e6db74">}</span>.key<span style="color:#66d9ef">)</span><span style="color:#e6db74">\n&#34;</span>
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>    client<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      local f_clnt_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/client/client-</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.key&#34;</span>
</span></span><span style="display:flex;"><span>      local f_clnt_csr<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/client/client-</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.csr&#34;</span>
</span></span><span style="display:flex;"><span>      local f_clnt_crt<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/client/client-</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.crt&#34;</span>
</span></span><span style="display:flex;"><span>      local f_clnt_p12<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASEDIR<span style="color:#e6db74">}</span><span style="color:#e6db74">/client/client-</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">.p12&#34;</span>
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>      echo <span style="color:#e6db74">&#34;클라이언트 인증서 생성&#34;</span>
</span></span><span style="display:flex;"><span>      openssl genrsa -out <span style="color:#e6db74">${</span>f_clnt_key<span style="color:#e6db74">}</span> <span style="color:#ae81ff">4096</span>
</span></span><span style="display:flex;"><span>      openssl req -new -key <span style="color:#e6db74">${</span>f_clnt_key<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_clnt_csr<span style="color:#e6db74">}</span> -subj <span style="color:#e6db74">&#34;/CN=client-</span><span style="color:#e6db74">${</span>host<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      openssl x509 -req -in <span style="color:#e6db74">${</span>f_clnt_csr<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_clnt_crt<span style="color:#e6db74">}</span> -days <span style="color:#66d9ef">$((</span><span style="color:#ae81ff">365</span><span style="color:#f92672">*</span><span style="color:#ae81ff">20</span><span style="color:#66d9ef">))</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>        -CAkey <span style="color:#e6db74">${</span>f_ca_key<span style="color:#e6db74">}</span> -CA <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span> -CAcreateserial
</span></span><span style="display:flex;"><span>      openssl pkcs12 -export -in <span style="color:#e6db74">${</span>f_clnt_crt<span style="color:#e6db74">}</span> -out <span style="color:#e6db74">${</span>f_clnt_p12<span style="color:#e6db74">}</span> -inkey <span style="color:#e6db74">${</span>f_clnt_key<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>            -certfile <span style="color:#e6db74">${</span>f_ca_crt<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      printf <span style="color:#e6db74">&#34;  %-8s: %s\n&#34;</span> <span style="color:#e6db74">&#34;client&#34;</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">${</span>f_clnt_key%.*<span style="color:#e6db74">}</span>.p12<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>    *<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      USAGE
</span></span><span style="display:flex;"><span>      ;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># main</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">((</span> <span style="color:#e6db74">${#</span>argv[@]<span style="color:#e6db74">}</span> &lt; <span style="color:#ae81ff">1</span> <span style="color:#f92672">))</span> <span style="color:#f92672">&amp;&amp;</span> USAGE
</span></span><span style="display:flex;"><span>command<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>argv[0]<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>command<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> in
</span></span><span style="display:flex;"><span>  create<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">((</span> <span style="color:#e6db74">${#</span>argv[@]<span style="color:#e6db74">}</span> &lt; <span style="color:#ae81ff">2</span> <span style="color:#f92672">))</span> <span style="color:#f92672">&amp;&amp;</span> USAGE
</span></span><span style="display:flex;"><span>    type<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>argv[1]<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>type<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> in
</span></span><span style="display:flex;"><span>      server<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span> <span style="color:#e6db74">${#</span>argv[@]<span style="color:#e6db74">}</span> !<span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">))</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>          echo <span style="color:#e6db74">&#34;[ERROR] invalid name: \$ </span><span style="color:#e6db74">${</span>SCRIPT_NM<span style="color:#e6db74">}</span><span style="color:#e6db74"> create </span><span style="color:#e6db74">${</span>type<span style="color:#e6db74">}</span><span style="color:#e6db74"> [</span><span style="color:#e6db74">${</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">]&#34;</span>
</span></span><span style="display:flex;"><span>          exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>          name<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>argv[2]<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>        ;;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">esac</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;[INFO] create </span><span style="color:#e6db74">${</span>type<span style="color:#e6db74">}</span><span style="color:#e6db74"> certificate&#34;</span>
</span></span><span style="display:flex;"><span>    create <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>type<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>  *<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    USAGE
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">esac</span>
</span></span></code></pre></div></details>

<details>
<summary>self-signed 인증서 생성</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"></code></pre></div></details>
<details>
<summary>self-signed 인증서 → caddy 적용 + 클라이언트 추가</summary>






















<div class="code-compare two-col">

  
  <div class="code-col good">
    <div class="code-title">caddy 적용</div>
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># /etc/caddy/Caddyfile</span></span></code></pre></div>
  </div>
  
  
  

  
  <div class="code-col bad">
    <div class="code-title">클라이언트 추가</div>
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># 클라이언트 인증서 추가</span></span></code></pre></div>
  </div>

</div>

</details>
<hr>
<h3 id="23-nexus-구성">2.3 nexus 구성</h3>
<h4 id="1-nexus-설치">1) nexus 설치</h4>
<details>
<summary>Nexus OSS 3 설치</summary>
<p><a href="https://help.sonatype.com/en/download-archives---repository-manager-3.html" target="_blank">(링크) Download Archives - Repository Manager 3</a></p>
<ul>
<li><code>/sw</code>, <code>/data</code>, <code>/app</code>, <code>/logs</code> → <em>IT업계에서 표준 디렉토리이며, 각각 디렉토리의 정의를 생각해볼 것</em></li>
<li><code>sonatype-work</code> 디렉토리는 삭제할 것</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh-session" data-lang="sh-session"><span style="display:flex;"><span>$ curl -LO https://download.sonatype.com/nexus/3/nexus-3.88.0-08-linux-x86_64.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span># 설치 디렉토리
</span></span><span style="display:flex;"><span>/sw
</span></span><span style="display:flex;"><span>└ nexus
</span></span></code></pre></div></details>
<details>
<summary>java 8, 11, 17, 21 설치</summary>
<ul>
<li>/usr/local/lib 설치 → <em>/opt, /usr/lib, /sw 에 설치하는 것을 고려해볼 것</em></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh-session" data-lang="sh-session"><span style="display:flex;"><span>$ curl -LO https://corretto.aws/downloads/latest/amazon-corretto-8-x64-linux-jdk.tar.gz
</span></span><span style="display:flex;"><span>$ curl -LO https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.tar.gz
</span></span><span style="display:flex;"><span>$ curl -LO https://corretto.aws/downloads/latest/amazon-corretto-17-x64-linux-jdk.tar.gz
</span></span><span style="display:flex;"><span>$ curl -LO https://corretto.aws/downloads/latest/amazon-corretto-21-x64-linux-jdk.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span># 설치 디렉토리
</span></span><span style="display:flex;"><span>/usr/local/lib
</span></span><span style="display:flex;"><span>├ java8
</span></span><span style="display:flex;"><span>├ java11
</span></span><span style="display:flex;"><span>├ java17
</span></span><span style="display:flex;"><span>└ java21
</span></span></code></pre></div></details>
<h4 id="2-nexus-설정">2) nexus 설정</h4>
<h5 id="데이터-디렉토리-변경">데이터 디렉토리 변경</h5>
<ul>
<li><em>sonatype-work → /data/nexus 변경해 볼 것</em></li>
<li><em><code>sonatype-work</code> 디렉토리 설정이 어디에 있는지 찾는 방법을 이해해볼 것</em></li>
<li><code>find /sw/nexus -type f | xargs grep -in 'sonatype'</code> 이 명령어(find, xargs, grep) 에 대해 가급적 완벽히 이해할 것</li>
</ul>
<h5 id="로그-디렉토리-변경">로그 디렉토리 변경</h5>
<ul>
<li><em>데이터 디렉토리 변경하는 것과 마찬가지로 로그 디렉토리도 /logs/nexus 로 변경해볼 것</em></li>
</ul>
<h5 id="java-변경">java 변경</h5>
<ul>
<li><em>nexus 를 실행하기 위한 java 경로가 어디인지 알아보고, 앞서 설치한 java21 로 변경해볼 것</em></li>
<li><code>/sw/nexus/bin/nexux:56-65 확인 할 것</code></li>
</ul>
<h4 id="3-nexus-서비스">3) nexus 서비스</h4>
<ul>
<li><em>nexus 서비스 등록해볼 것</em></li>
<li><em>heredoc 에 대해 이해해볼 것</em></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt; EOF &gt; a.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apple
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ cat a.txt
</span></span><span style="display:flex;"><span>apple
</span></span></code></pre></div><details>
<summary>systemd 서비스 등록</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt; EOF &gt; /etc/systemd/system/nexus.service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Unit]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Description=Nexus OSS 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">After=network.target syslog.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Service]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Type=forking
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">User=root
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Group=root
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStart=/app/nexus/bin/nexus start
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ExecStop=/app/nexus/bin/nexus stop
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Restart=no
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">[Install]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">WantedBy=multi-user.target
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl enable nexus.service
</span></span></code></pre></div></details>
<hr>
<h3 id="24-postgres-구성">2.4 postgres 구성</h3>
<h4 id="1-postgres-설치">1) postgres 설치</h4>
<h4 id="2-postgres-설정">2) postgres 설정</h4>
<h4 id="3-postgres-서비스">3) postgres 서비스</h4>
<hr>
<h3 id="25-redis-구성">2.5 redis 구성</h3>
<h4 id="1-redis-설치">1) redis 설치</h4>
<h4 id="2-redis-설정">2) redis 설정</h4>
<h4 id="3-redis-서비스">3) redis 서비스</h4>

        </div>
      </article>
    </div>
  </div>
</main>

  
</body>
</html>
