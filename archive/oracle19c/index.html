<!DOCTYPE html>
<html lang="ko-kr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MEMO</title>
  <meta name="author" content="lislroow@daum.net">
  <meta name="description" content="KIM MYEONGGU&#39;s MEMO site">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/highlight/prism.css">
  <script src="/highlight/prism.js"></script>
</head>
<body>
  <header>
  <div class="navbar">
    <a href="https://lislroow.github.io/">MEMO</a>
    
    
      
      <div class="dropdown">
        <button class="dropbtn">&#43; archive</button>
        <div class="dropdown-content">
        
          <a href="/archive/apache/">apache</a>
        
          <a href="/archive/nginx/">nginx</a>
        
          <a href="/archive/oracle19c/">oracle19c</a>
        
          <a href="/archive/others/">others</a>
        
        </div>
      </div>
      
    
      
      <div class="dropdown">
        <button class="dropbtn">&#43; shell</button>
        <div class="dropdown-content">
        
          <a href="/shell/bash/">bash</a>
        
          <a href="/shell/docker/">docker</a>
        
        </div>
      </div>
      
    
    
    
    <a href="#" id="toggleTocButton" style="margin-left: auto;">+</a>
    <script>
    document.getElementById('toggleTocButton').addEventListener('click', function() {
      document.querySelector('.aside').classList.toggle('hidden');
    });
    </script>
  </div>
</header>

  
<main class="container">
  <div class="main-content">
    <div class="content">
      <article>
        <h1></h1>
        <div>
          <h4 id="10-pdb-mkuser-백업">10. pdb mkuser 백업</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># (참고) 디렉토리 변경</span>
</span></span><span style="display:flex;"><span>SQL&gt; CREATE DIRECTORY backup_dir AS <span style="color:#e6db74">&#39;/home/oracle/dump&#39;</span>;
</span></span><span style="display:flex;"><span>SQL&gt; DROP DIRECTORY backup_dir;
</span></span><span style="display:flex;"><span>SQL&gt; CREATE DIRECTORY backup_dir AS <span style="color:#e6db74">&#39;/home/oracle&#39;</span>;
</span></span><span style="display:flex;"><span>SQL&gt; GRANT READ, WRITE ON DIRECTORY backup_dir TO mkuser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ expdp mkuser/passwd@develop DIRECTORY<span style="color:#f92672">=</span>backup_dir DUMPFILE<span style="color:#f92672">=</span>develop.dmp LOGFILE<span style="color:#f92672">=</span>develop_backup.log
</span></span></code></pre></div><h4 id="9-pdb-관리자-계정-변경">9. pdb 관리자 계정 변경</h4>
<p>새로운 관리자 계정 생성 후 기존 계정을 삭제해야 함</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> pdb_develop IDENTIFIED <span style="color:#66d9ef">BY</span> passwd;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 새로운 관리자 계정 권한 부여
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">GRANT</span> DBA <span style="color:#66d9ef">TO</span> pdb_develop;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">TO</span> pdb_develop;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">ANY</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">TO</span> pdb_develop;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> UNLIMITED TABLESPACE <span style="color:#66d9ef">TO</span> pdb_develop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 기존 관리자 계정 권한 회수 및 삭제
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">REVOKE</span> DBA <span style="color:#66d9ef">FROM</span> pdb_market;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">USER</span> pdb_market <span style="color:#66d9ef">CASCADE</span>;
</span></span></code></pre></div><h4 id="8-sqlldr-우편번호-적재">8. sqlldr 우편번호 적재</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 우편번호 데이터</span>
</span></span><span style="display:flex;"><span>$ curl -sOL https://www.epost.go.kr/search/areacd/zipcode_DB.zip
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 압축 해제 대상 디렉토리 지정, 파일명 인코딩 설정</span>
</span></span><span style="display:flex;"><span>$ unzip -O cp949 -d zipcode zipcode_DB.zip
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 파일명 인코딩 변경</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#$ yum install -y convmv</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#$ convmv -f cp949 -t utf-8 --notest ./zipcode/*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ZIPCODE 테이블 생성</span>
</span></span><span style="display:flex;"><span>CREATE TABLE <span style="color:#e6db74">&#34;MKUSER&#34;</span>.<span style="color:#e6db74">&#34;ZIPCODE&#34;</span> 
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">(</span>  <span style="color:#e6db74">&#34;ZIPCODE&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span> NOT NULL ENABLE, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;SIDO&#34;</span> VARCHAR2<span style="color:#f92672">(</span>50<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;SIDO_EN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;SIGUNGU&#34;</span> VARCHAR2<span style="color:#f92672">(</span>50<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;SIGUNGU_EN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;EUPMYUN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>50<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;EUPMYUN_EN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ROAD_CD&#34;</span> VARCHAR2<span style="color:#f92672">(</span>20<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ROAD_NM&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ROAD_NM_EN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;UNDERGROUND_YN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>1<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;BLDG_NO1&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;BLDG_NO2&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;BLDG_MGMT_NO&#34;</span> VARCHAR2<span style="color:#f92672">(</span>50<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;LG_DELIVERY_NM&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;SIGUNGU_BLDG_NM&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;LEGAL_DONG_CD&#34;</span> VARCHAR2<span style="color:#f92672">(</span>20<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;LEGAL_DONG_NM&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;RI_NAME&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ADMIN_DONG_NM&#34;</span> VARCHAR2<span style="color:#f92672">(</span>100<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;MOUNTAIN_YN&#34;</span> VARCHAR2<span style="color:#f92672">(</span>1<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;JIBEON_NO1&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;EUPMYUNDONG_SEQNO&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;JIBEON_NO2&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;OLD_ZIPCODE&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;ZIPCODE_SEQNO&#34;</span> VARCHAR2<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>COMMENT ON TABLE MKUSER.ZIPCODE IS <span style="color:#e6db74">&#39;우편번호정보&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ZIPCODE IS <span style="color:#e6db74">&#39;우편번호&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.SIDO IS <span style="color:#e6db74">&#39;시도&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.SIDO_EN IS <span style="color:#e6db74">&#39;시도영문&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU IS <span style="color:#e6db74">&#39;시군구&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU_EN IS <span style="color:#e6db74">&#39;시군구영문&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUN IS <span style="color:#e6db74">&#39;읍면&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUN_EN IS <span style="color:#e6db74">&#39;읍면영문&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_CD IS <span style="color:#e6db74">&#39;도로명코드&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_NM IS <span style="color:#e6db74">&#39;도로명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_NM_EN IS <span style="color:#e6db74">&#39;도로명영문&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.UNDERGROUND_YN IS <span style="color:#e6db74">&#39;지하여부&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_NO1 IS <span style="color:#e6db74">&#39;건물번호본번&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_NO2 IS <span style="color:#e6db74">&#39;건물번호부번&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_MGMT_NO IS <span style="color:#e6db74">&#39;건물관리번호&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.LG_DELIVERY_NM IS <span style="color:#e6db74">&#39;다량배달처명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU_BLDG_NM IS <span style="color:#e6db74">&#39;시군구용건물명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.LEGAL_DONG_CD IS <span style="color:#e6db74">&#39;법정동코드&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.LEGAL_DONG_NM IS <span style="color:#e6db74">&#39;법정동명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.RI_NAME IS <span style="color:#e6db74">&#39;리명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ADMIN_DONG_NM IS <span style="color:#e6db74">&#39;행정동명&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.MOUNTAIN_YN IS <span style="color:#e6db74">&#39;산여부&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.JIBEON_NO1 IS <span style="color:#e6db74">&#39;지번본번&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUNDONG_SEQNO IS <span style="color:#e6db74">&#39;읍면동일련번호&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.JIBEON_NO2 IS <span style="color:#e6db74">&#39;지번부번&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.OLD_ZIPCODE IS <span style="color:#e6db74">&#39;구우편번호&#39;</span>;
</span></span><span style="display:flex;"><span>COMMENT ON COLUMN MKUSER.ZIPCODE.ZIPCODE_SEQNO IS <span style="color:#e6db74">&#39;우편번호일련번호&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## import-zipcode.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>WORKDIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zipcode&#34;</span>
</span></span><span style="display:flex;"><span>ORACLEDB_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mkuser&#34;</span>
</span></span><span style="display:flex;"><span>ORACLEDB_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>SERVICE_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;develop&#34;</span>
</span></span><span style="display:flex;"><span>TABLE_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ZIPCODE&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;- EOF &gt; ${WORKDIR}/${TABLE_NAME}.ddl
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">CREATE TABLE &#34;MKUSER&#34;.&#34;ZIPCODE&#34; 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   (  &#34;ZIPCODE&#34; VARCHAR2(10) NOT NULL ENABLE, 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;SIDO&#34; VARCHAR2(50), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;SIDO_EN&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;SIGUNGU&#34; VARCHAR2(50), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;SIGUNGU_EN&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;EUPMYUN&#34; VARCHAR2(50), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;EUPMYUN_EN&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;ROAD_CD&#34; VARCHAR2(20), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;ROAD_NM&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;ROAD_NM_EN&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;UNDERGROUND_YN&#34; VARCHAR2(1), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;BLDG_NO1&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;BLDG_NO2&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;BLDG_MGMT_NO&#34; VARCHAR2(50), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;LG_DELIVERY_NM&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;SIGUNGU_BLDG_NM&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;LEGAL_DONG_CD&#34; VARCHAR2(20), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;LEGAL_DONG_NM&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;RI_NAME&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;ADMIN_DONG_NM&#34; VARCHAR2(100), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;MOUNTAIN_YN&#34; VARCHAR2(1), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;JIBEON_NO1&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;EUPMYUNDONG_SEQNO&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;JIBEON_NO2&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;OLD_ZIPCODE&#34; VARCHAR2(10), 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;ZIPCODE_SEQNO&#34; VARCHAR2(10)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   );
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON TABLE MKUSER.ZIPCODE IS &#39;우편번호정보&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ZIPCODE IS &#39;우편번호&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.SIDO IS &#39;시도&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.SIDO_EN IS &#39;시도영문&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU IS &#39;시군구&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU_EN IS &#39;시군구영문&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUN IS &#39;읍면&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUN_EN IS &#39;읍면영문&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_CD IS &#39;도로명코드&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_NM IS &#39;도로명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ROAD_NM_EN IS &#39;도로명영문&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.UNDERGROUND_YN IS &#39;지하여부&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_NO1 IS &#39;건물번호본번&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_NO2 IS &#39;건물번호부번&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.BLDG_MGMT_NO IS &#39;건물관리번호&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.LG_DELIVERY_NM IS &#39;다량배달처명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.SIGUNGU_BLDG_NM IS &#39;시군구용건물명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.LEGAL_DONG_CD IS &#39;법정동코드&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.LEGAL_DONG_NM IS &#39;법정동명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.RI_NAME IS &#39;리명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ADMIN_DONG_NM IS &#39;행정동명&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.MOUNTAIN_YN IS &#39;산여부&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.JIBEON_NO1 IS &#39;지번본번&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.EUPMYUNDONG_SEQNO IS &#39;읍면동일련번호&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.JIBEON_NO2 IS &#39;지번부번&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.OLD_ZIPCODE IS &#39;구우편번호&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">COMMENT ON COLUMN MKUSER.ZIPCODE.ZIPCODE_SEQNO IS &#39;우편번호일련번호&#39;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sqlplus <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">${</span>ORACLEDB_USER<span style="color:#e6db74">}</span>/<span style="color:#e6db74">${</span>ORACLEDB_PASSWORD<span style="color:#e6db74">}</span>@<span style="color:#e6db74">${</span>SERVICE_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  @<span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/<span style="color:#e6db74">${</span>TABLE_NAME<span style="color:#e6db74">}</span>.ddl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;- EOF &gt; ${WORKDIR}/${TABLE_NAME}.ctl
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LOAD DATA
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">CHARACTERSET AL32UTF8
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">APPEND
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">INTO TABLE ${TABLE_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">FIELDS TERMINATED BY &#39;|&#39; 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">TRAILING NULLCOLS
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">(
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ZIPCODE CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SIDO CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SIDO_EN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SIGUNGU CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SIGUNGU_EN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    EUPMYUN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    EUPMYUN_EN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ROAD_CD CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ROAD_NM CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ROAD_NM_EN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    UNDERGROUND_YN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    BLDG_NO1 CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    BLDG_NO2 CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    BLDG_MGMT_NO CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    LG_DELIVERY_NM CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SIGUNGU_BLDG_NM CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    LEGAL_DONG_CD CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    LEGAL_DONG_NM CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    RI_NAME CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ADMIN_DONG_NM CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    MOUNTAIN_YN CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    JIBEON_NO1 CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    EUPMYUNDONG_SEQNO CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    JIBEON_NO2 CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    OLD_ZIPCODE CHAR,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ZIPCODE_SEQNO CHAR
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> file in <span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/*.txt; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>  sqlldr <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    <span style="color:#e6db74">${</span>ORACLEDB_USER<span style="color:#e6db74">}</span>/<span style="color:#e6db74">${</span>ORACLEDB_PASSWORD<span style="color:#e6db74">}</span>@<span style="color:#e6db74">${</span>SERVICE_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    data<span style="color:#f92672">=</span>$file <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    control<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/<span style="color:#e6db74">${</span>TABLE_NAME<span style="color:#e6db74">}</span>.ctl <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    log<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/debug.log <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    skip<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><h4 id="7-데이터-이관-작업">7. 데이터 이관 작업</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">임시</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span>, <span style="color:#960050;background-color:#1e0010">계정</span> <span style="color:#960050;background-color:#1e0010">생성</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> CONTAINER <span style="color:#f92672">=</span> develop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> TABLESPACE develop_test
</span></span><span style="display:flex;"><span>  DATAFILE <span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB/develop/test.dbf&#39;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SIZE</span> <span style="color:#ae81ff">100</span>M 
</span></span><span style="display:flex;"><span>  AUTOEXTEND <span style="color:#66d9ef">ON</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">NEXT</span> <span style="color:#ae81ff">50</span>M MAXSIZE UNLIMITED;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> <span style="color:#e6db74">&#34;_oracle_script&#34;</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> testuser IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">DEFAULT</span> TABLESPACE develop_test;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">USER</span> testuser QUOTA UNLIMITED <span style="color:#66d9ef">ON</span> develop_test;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">PROCEDURE</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> SEQUENCE <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TRIGGER</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> SYNONYM <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TYPE</span> <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> UNLIMITED TABLESPACE <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">READ</span>, <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">ON</span> DIRECTORY backup_dir <span style="color:#66d9ef">TO</span> testuser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> imp <span style="color:#960050;background-color:#1e0010">실행</span>
</span></span><span style="display:flex;"><span>export NLS_LANG<span style="color:#f92672">=</span>KOREAN_KOREA.KO16MSWIN949
</span></span><span style="display:flex;"><span>imp <span style="color:#66d9ef">system</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1</span> FILE<span style="color:#f92672">=</span>.<span style="color:#f92672">/</span>backup.dmp LOG<span style="color:#f92672">=</span>dump_log.log <span style="color:#66d9ef">SHOW</span><span style="color:#f92672">=</span>Y <span style="color:#66d9ef">FULL</span><span style="color:#f92672">=</span>Y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>imp <span style="color:#66d9ef">system</span><span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>develop FILE<span style="color:#f92672">=</span>.<span style="color:#f92672">/</span>backup.dmp LOG<span style="color:#f92672">=</span>dump_log.log FROMUSER<span style="color:#f92672">=</span>OCRM TOUSER<span style="color:#f92672">=</span>testuser <span style="color:#66d9ef">ROWS</span><span style="color:#f92672">=</span>N
</span></span><span style="display:flex;"><span>imp <span style="color:#66d9ef">system</span><span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>develop FILE<span style="color:#f92672">=</span>.<span style="color:#f92672">/</span>backup.dmp LOG<span style="color:#f92672">=</span>dump_log.log FROMUSER<span style="color:#f92672">=</span>OCRM TOUSER<span style="color:#f92672">=</span>testuser <span style="color:#66d9ef">ROWS</span><span style="color:#f92672">=</span>Y <span style="color:#66d9ef">IGNORE</span><span style="color:#f92672">=</span>Y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> (<span style="color:#960050;background-color:#1e0010">데이터</span> <span style="color:#960050;background-color:#1e0010">정리</span> <span style="color:#960050;background-color:#1e0010">후</span>) expdp <span style="color:#960050;background-color:#1e0010">실행</span>
</span></span><span style="display:flex;"><span>expdp testuser<span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>develop DIRECTORY<span style="color:#f92672">=</span>backup_dir DUMPFILE<span style="color:#f92672">=</span>exp.dmp TABLES<span style="color:#f92672">=</span>tb_foo,tb_bar LOGFILE<span style="color:#f92672">=</span>backup_log.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> impdp <span style="color:#960050;background-color:#1e0010">실행</span>
</span></span><span style="display:flex;"><span>impdp mkuser<span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>develop DIRECTORY<span style="color:#f92672">=</span>backup_dir DUMPFILE<span style="color:#f92672">=</span>exp.dmp REMAP_SCHEMA<span style="color:#f92672">=</span>testuser:mkuser REMAP_TABLESPACE<span style="color:#f92672">=</span>develop_test:develop LOGFILE<span style="color:#f92672">=</span>import_log.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">임시</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span>, <span style="color:#960050;background-color:#1e0010">계정</span> <span style="color:#960050;background-color:#1e0010">삭제</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">user</span> testuser <span style="color:#66d9ef">cascade</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> TABLESPACE develop_test <span style="color:#66d9ef">INCLUDING</span> CONTENTS <span style="color:#66d9ef">AND</span> DATAFILES;
</span></span></code></pre></div><h4 id="6-expdp-명령pump으로-dump-생성하기">6. expdp 명령(pump)으로 dump 생성하기</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> backup <span style="color:#960050;background-color:#1e0010">디렉토리</span> <span style="color:#960050;background-color:#1e0010">설정</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> DIRECTORY backup_dir <span style="color:#66d9ef">AS</span> <span style="color:#e6db74">&#39;/home/oracle&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">READ</span>, <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">ON</span> DIRECTORY backup_dir <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> expdp <span style="color:#960050;background-color:#1e0010">명령</span> dump <span style="color:#960050;background-color:#1e0010">생성</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> expdp mkuser<span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>develop DIRECTORY<span style="color:#f92672">=</span>backup_dir DUMPFILE<span style="color:#f92672">=</span>develop.dmp LOGFILE<span style="color:#f92672">=</span>develop_backup.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> impdp <span style="color:#960050;background-color:#1e0010">명령</span> dump <span style="color:#960050;background-color:#1e0010">적재</span> (<span style="color:#66d9ef">for</span> test)
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> REMAP_SCHEMA<span style="color:#f92672">=</span>mkuser:testuser: <span style="color:#960050;background-color:#1e0010">덤프</span> <span style="color:#960050;background-color:#1e0010">파일에</span> <span style="color:#960050;background-color:#1e0010">있는</span> <span style="color:#960050;background-color:#1e0010">데이터를</span> mkuser라는 <span style="color:#960050;background-color:#1e0010">원래</span> <span style="color:#960050;background-color:#1e0010">사용자로부터</span> testuser로 <span style="color:#960050;background-color:#1e0010">매핑하여</span> <span style="color:#960050;background-color:#1e0010">적재</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> impdp testuser<span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>testdb DIRECTORY<span style="color:#f92672">=</span>backup_dir DUMPFILE<span style="color:#f92672">=</span>develop.dmp REMAP_SCHEMA<span style="color:#f92672">=</span>mkuser:testuser LOGFILE<span style="color:#f92672">=</span>import_log.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> impdp <span style="color:#960050;background-color:#1e0010">실행</span> <span style="color:#960050;background-color:#1e0010">전</span> <span style="color:#960050;background-color:#1e0010">디렉토리</span> <span style="color:#960050;background-color:#1e0010">생성</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> DIRECTORY backup_dir <span style="color:#66d9ef">AS</span> <span style="color:#e6db74">&#39;/home/oracle&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">READ</span>, <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">ON</span> DIRECTORY backup_dir <span style="color:#66d9ef">TO</span> testuser;
</span></span></code></pre></div><h4 id="5-dump-파일-import-하기">5. dump 파일 import 하기</h4>
<p>imp 명령어와 impdp 명령어가 있으며, exp 로 생성한 dump 는 imp 로 import 해야 함</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># dump 파일의 메타 정보 확인</span>
</span></span><span style="display:flex;"><span>$ imp system/passwd FILE<span style="color:#f92672">=</span>/opt/dump/fund.dmp LOG<span style="color:#f92672">=</span>dump_log.log SHOW<span style="color:#f92672">=</span>Y FULL<span style="color:#f92672">=</span>Y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dump 파일의 캐릭터셋은 NLS_LANG 변수로 설정</span>
</span></span><span style="display:flex;"><span>$ export NLS_LANG<span style="color:#f92672">=</span>KOREAN_KOREA.KO16MSWIN949
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># only schema import</span>
</span></span><span style="display:flex;"><span>$ imp system/passwd@develop FILE<span style="color:#f92672">=</span>/opt/dump/fund.dmp LOG<span style="color:#f92672">=</span>dump_log.log FROMUSER<span style="color:#f92672">=</span>FUNDO TOUSER<span style="color:#f92672">=</span>mkuser ROWS<span style="color:#f92672">=</span>N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># data import (ignore=Y 는 schema 가 있을 경우 무시하고 data 를 import)</span>
</span></span><span style="display:flex;"><span>$ imp system/passwd@develop FILE<span style="color:#f92672">=</span>/opt/dump/fund.dmp LOG<span style="color:#f92672">=</span>dump_log.log FROMUSER<span style="color:#f92672">=</span>FUNDO TOUSER<span style="color:#f92672">=</span>mkuser ROWS<span style="color:#f92672">=</span>Y IGNORE<span style="color:#f92672">=</span>Y
</span></span></code></pre></div><p>system 테이블스페이스에는 데이터를 import 할 수 없음</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">선택</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> CONTAINER <span style="color:#f92672">=</span> develop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span> <span style="color:#960050;background-color:#1e0010">생성</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> TABLESPACE develop
</span></span><span style="display:flex;"><span>  DATAFILE <span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB/develop/develop.dbf&#39;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SIZE</span> <span style="color:#ae81ff">10</span><span style="color:#66d9ef">G</span> 
</span></span><span style="display:flex;"><span>  AUTOEXTEND <span style="color:#66d9ef">ON</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">NEXT</span> <span style="color:#ae81ff">50</span>M MAXSIZE UNLIMITED;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> mkuser <span style="color:#960050;background-color:#1e0010">기본</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span> <span style="color:#960050;background-color:#1e0010">지정</span> <span style="color:#960050;background-color:#1e0010">및</span> <span style="color:#960050;background-color:#1e0010">할당량</span> <span style="color:#960050;background-color:#1e0010">지정</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">USER</span> mkuser <span style="color:#66d9ef">DEFAULT</span> TABLESPACE develop;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">USER</span> mkuser QUOTA UNLIMITED <span style="color:#66d9ef">ON</span> develop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">선택</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> CONTAINER <span style="color:#f92672">=</span> develop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> mkuser <span style="color:#960050;background-color:#1e0010">계정</span> <span style="color:#960050;background-color:#1e0010">삭제</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> <span style="color:#e6db74">&#34;_oracle_script&#34;</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">USER</span> mkuser <span style="color:#66d9ef">CASCADE</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">28014</span>: cannot <span style="color:#66d9ef">drop</span> administrative <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">or</span> <span style="color:#66d9ef">role</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> dba_role_privs <span style="color:#66d9ef">WHERE</span> grantee <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mkuser&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">REVOKE</span> SYSDBA <span style="color:#66d9ef">FROM</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">REVOKE</span> DBA <span style="color:#66d9ef">FROM</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">01940</span>: cannot <span style="color:#66d9ef">drop</span> a <span style="color:#66d9ef">user</span> that <span style="color:#66d9ef">is</span> currently connected
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> SID,SERIAL<span style="color:#f92672">#</span> <span style="color:#66d9ef">FROM</span> V$SESSION <span style="color:#66d9ef">WHERE</span> USERNAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;MKUSER&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SYSTEM</span> KILL <span style="color:#66d9ef">SESSION</span> <span style="color:#e6db74">&#39;SID,SERIAL#&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span> <span style="color:#960050;background-color:#1e0010">삭제</span> (dbf <span style="color:#960050;background-color:#1e0010">파일은</span> <span style="color:#960050;background-color:#1e0010">삭제되지</span> <span style="color:#960050;background-color:#1e0010">않음</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> TABLESPACE develop;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> TABLESPACE develop <span style="color:#66d9ef">INCLUDING</span> CONTENTS <span style="color:#66d9ef">AND</span> DATAFILES;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> dbf <span style="color:#960050;background-color:#1e0010">파일</span> <span style="color:#960050;background-color:#1e0010">삭제</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> rm <span style="color:#f92672">-</span>rf <span style="color:#f92672">/</span>opt<span style="color:#f92672">/</span>oracle<span style="color:#f92672">/</span>oradata<span style="color:#f92672">/</span>ORCLCDB<span style="color:#f92672">/</span>develop<span style="color:#f92672">/</span>develop.dbf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> mkuser <span style="color:#960050;background-color:#1e0010">계정</span> <span style="color:#960050;background-color:#1e0010">생성</span> (<span style="color:#960050;background-color:#1e0010">기본</span> <span style="color:#960050;background-color:#1e0010">테이블스페이스</span> <span style="color:#960050;background-color:#1e0010">지정</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> <span style="color:#e6db74">&#34;_oracle_script&#34;</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> mkuser IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">DEFAULT</span> TABLESPACE develop;
</span></span></code></pre></div><h4 id="4-pdb-삭제">4. pdb 삭제</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> PDBS
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CON_ID CON_NAME       <span style="color:#66d9ef">OPEN</span> <span style="color:#66d9ef">MODE</span>  RESTRICTED
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------- ------------------------------ ---------- ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#ae81ff">2</span> PDB$SEED       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">ONLY</span>  <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> ORCLPDB1       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">4</span> MARKET         <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#66d9ef">close</span> <span style="color:#960050;background-color:#1e0010">상태로</span> <span style="color:#960050;background-color:#1e0010">전환</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> market <span style="color:#66d9ef">CLOSE</span> <span style="color:#66d9ef">IMMEDIATE</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Pluggable <span style="color:#66d9ef">database</span> altered.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb unplug
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> market UNPLUG <span style="color:#66d9ef">INTO</span> <span style="color:#e6db74">&#39;/home/oracle/market.xml&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Pluggable <span style="color:#66d9ef">database</span> altered.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">상태</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> PDBS;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CON_ID CON_NAME       <span style="color:#66d9ef">OPEN</span> <span style="color:#66d9ef">MODE</span>  RESTRICTED
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------- ------------------------------ ---------- ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#ae81ff">2</span> PDB$SEED       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">ONLY</span>  <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> ORCLPDB1       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">4</span> MARKET         MOUNTED
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">삭제</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> market <span style="color:#66d9ef">INCLUDING</span> DATAFILES;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Pluggable <span style="color:#66d9ef">database</span> dropped.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">상태</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> PDBS;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CON_ID CON_NAME       <span style="color:#66d9ef">OPEN</span> <span style="color:#66d9ef">MODE</span>  RESTRICTED
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------- ------------------------------ ---------- ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#ae81ff">2</span> PDB$SEED       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">ONLY</span>  <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> ORCLPDB1       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span></code></pre></div><h4 id="3-새로운-pdb-생성-및-계정-생성">3. 새로운 pdb 생성 및 계정 생성</h4>
<h5 id="31-pdb-생성">3.1 pdb 생성</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">접속</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> sqlplus sys <span style="color:#66d9ef">as</span> sysdba
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">데이터베이스</span> <span style="color:#960050;background-color:#1e0010">상태</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> STATUS <span style="color:#66d9ef">FROM</span> V$INSTANCE;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">현재</span> <span style="color:#960050;background-color:#1e0010">세션을</span> CDB <span style="color:#960050;background-color:#1e0010">로</span> <span style="color:#960050;background-color:#1e0010">변경하고</span>, <span style="color:#960050;background-color:#1e0010">변경</span> <span style="color:#960050;background-color:#1e0010">여부</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> CONTAINER <span style="color:#f92672">=</span> CDB$ROOT;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> CON_NAME;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">생성</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> market <span style="color:#66d9ef">ADMIN</span> <span style="color:#66d9ef">USER</span> pdb_market IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span> FILE_NAME_CONVERT <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB&#39;</span>, <span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB/market&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> develop <span style="color:#66d9ef">ADMIN</span> <span style="color:#66d9ef">USER</span> pdb_develop IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span> FILE_NAME_CONVERT <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB&#39;</span>, <span style="color:#e6db74">&#39;/opt/oracle/oradata/ORCLCDB/develop&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Pluggable <span style="color:#66d9ef">database</span> created.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">생성된</span> pdb <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> PDBS;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CON_ID CON_NAME       <span style="color:#66d9ef">OPEN</span> <span style="color:#66d9ef">MODE</span>  RESTRICTED
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------- ------------------------------ ---------- ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#ae81ff">2</span> PDB$SEED       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">ONLY</span>  <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> ORCLPDB1       <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">4</span> MARKET         <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span> <span style="color:#66d9ef">NO</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">생성된</span> pdb <span style="color:#960050;background-color:#1e0010">시작</span>(<span style="color:#66d9ef">OPEN</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> PLUGGABLE <span style="color:#66d9ef">DATABASE</span> market <span style="color:#66d9ef">OPEN</span>;
</span></span></code></pre></div><h5 id="32-새로운-pdb-에-user-생성">3.2 새로운 pdb 에 user 생성</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">현재</span> <span style="color:#960050;background-color:#1e0010">세션이</span> <span style="color:#960050;background-color:#1e0010">연결된</span> <span style="color:#960050;background-color:#1e0010">컨테이너</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> CON_NAME;
</span></span><span style="display:flex;"><span>CON_NAME
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>CDB$ROOT
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">현재</span> <span style="color:#960050;background-color:#1e0010">세션을</span> PDB <span style="color:#960050;background-color:#1e0010">로</span> <span style="color:#960050;background-color:#1e0010">변경</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> CONTAINER <span style="color:#f92672">=</span> market;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Session</span> altered.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> PDB <span style="color:#960050;background-color:#1e0010">로</span> <span style="color:#960050;background-color:#1e0010">세션</span> <span style="color:#960050;background-color:#1e0010">변경이</span> <span style="color:#960050;background-color:#1e0010">되었는지</span> <span style="color:#960050;background-color:#1e0010">확인</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> CON_NAME;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CON_NAME
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>MARKET
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#e6db74">&#39;ORA-65096: invalid common user or role name&#39;</span> <span style="color:#960050;background-color:#1e0010">오류</span> <span style="color:#960050;background-color:#1e0010">발생</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">SET</span> <span style="color:#e6db74">&#34;_oracle_script&#34;</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> mkuser IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#66d9ef">GRANT</span> RESOURCE <span style="color:#66d9ef">TO</span> mkuser (ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">01924</span>: <span style="color:#66d9ef">role</span> <span style="color:#e6db74">&#39;RESOURCE&#39;</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">granted</span> <span style="color:#66d9ef">or</span> does <span style="color:#66d9ef">not</span> exist)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SESSION</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">PROCEDURE</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> SEQUENCE <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TRIGGER</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> SYNONYM <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TYPE</span> <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">GRANT</span> UNLIMITED TABLESPACE <span style="color:#66d9ef">TO</span> mkuser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> tnsnames.ora <span style="color:#960050;background-color:#1e0010">추가</span> (sqlplus,imp,exp <span style="color:#960050;background-color:#1e0010">사용시</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>opt<span style="color:#f92672">/</span>oracle<span style="color:#f92672">/</span>product<span style="color:#f92672">/</span><span style="color:#ae81ff">19</span><span style="color:#66d9ef">c</span><span style="color:#f92672">/</span>dbhome_1<span style="color:#f92672">/</span>network<span style="color:#f92672">/</span><span style="color:#66d9ef">admin</span><span style="color:#f92672">/</span>tnsnames.ora
</span></span><span style="display:flex;"><span>market <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>  (DESCRIPTION <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    (ADDRESS <span style="color:#f92672">=</span> (PROTOCOL <span style="color:#f92672">=</span> TCP)(<span style="color:#66d9ef">HOST</span> <span style="color:#f92672">=</span> rocky8<span style="color:#f92672">-</span>oracle19c)(PORT <span style="color:#f92672">=</span> <span style="color:#ae81ff">1521</span>))
</span></span><span style="display:flex;"><span>    (CONNECT_DATA <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>      (SERVER <span style="color:#f92672">=</span> DEDICATED)
</span></span><span style="display:flex;"><span>      (SERVICE_NAME <span style="color:#f92672">=</span> market)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  )
</span></span></code></pre></div><h4 id="2-oracle19c-환경-정보">2. oracle19c 환경 정보</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">설치</span> <span style="color:#960050;background-color:#1e0010">경로</span>(<span style="color:#960050;background-color:#1e0010">디렉토리</span>) <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> cat <span style="color:#f92672">/</span>etc<span style="color:#f92672">/</span>oratab
</span></span><span style="display:flex;"><span>ORCLCDB:<span style="color:#f92672">/</span>opt<span style="color:#f92672">/</span>oracle<span style="color:#f92672">/</span>product<span style="color:#f92672">/</span><span style="color:#ae81ff">19</span><span style="color:#66d9ef">c</span><span style="color:#f92672">/</span>dbhome_1:Y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">서비스명</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> systemctl list<span style="color:#f92672">-</span>units <span style="color:#f92672">|</span> grep oracle
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> oracledb_ORCLCDB<span style="color:#f92672">-</span><span style="color:#ae81ff">19</span><span style="color:#66d9ef">c</span>.service  loaded active running   SYSV: This script <span style="color:#66d9ef">is</span> responsible <span style="color:#66d9ef">for</span> taking care <span style="color:#66d9ef">of</span> configuring the Oracle <span style="color:#66d9ef">Database</span> <span style="color:#66d9ef">and</span> its associated services.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">서비스</span> <span style="color:#960050;background-color:#1e0010">실행</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> systemctl status oracledb_ORCLCDB<span style="color:#f92672">-</span><span style="color:#ae81ff">19</span><span style="color:#66d9ef">c</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>etc<span style="color:#f92672">/</span>rc.d<span style="color:#f92672">/</span>init.d<span style="color:#f92672">/</span>oracledb_ORCLCDB<span style="color:#f92672">-</span><span style="color:#ae81ff">19</span><span style="color:#66d9ef">c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> lsnrctl status <span style="color:#f92672">|</span> grep <span style="color:#f92672">-</span>n Service
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> listener <span style="color:#960050;background-color:#1e0010">에</span> <span style="color:#960050;background-color:#1e0010">등록된</span> <span style="color:#960050;background-color:#1e0010">서비스명</span> <span style="color:#960050;background-color:#1e0010">확인</span> (ORCLCDB)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">22</span>:Services Summary...
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">23</span>:Service <span style="color:#e6db74">&#34;1db7b95ef20a357be0633cc81cac0df1&#34;</span> has <span style="color:#ae81ff">1</span> instance(s).
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">25</span>:Service <span style="color:#e6db74">&#34;1db9133561fa1204e0633cc81cac10e9&#34;</span> has <span style="color:#ae81ff">1</span> instance(s).
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">27</span>:Service <span style="color:#e6db74">&#34;ORCLCDB&#34;</span> has <span style="color:#ae81ff">2</span> instance(s).
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">30</span>:Service <span style="color:#e6db74">&#34;ORCLCDBXDB&#34;</span> has <span style="color:#ae81ff">1</span> instance(s).
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">34</span>:Service <span style="color:#e6db74">&#34;orclpdb1&#34;</span> has <span style="color:#ae81ff">1</span> instance(s).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> ORCLCDB <span style="color:#960050;background-color:#1e0010">에</span> <span style="color:#960050;background-color:#1e0010">접속</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> sqlplus <span style="color:#66d9ef">system</span><span style="color:#f92672">/</span>passwd<span style="color:#f92672">@</span>localhost:<span style="color:#ae81ff">1521</span><span style="color:#f92672">/</span>ORCLCDB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">인스턴스</span> <span style="color:#960050;background-color:#1e0010">확인</span> (<span style="color:#66d9ef">OPEN</span> <span style="color:#960050;background-color:#1e0010">이</span> <span style="color:#960050;background-color:#1e0010">되어야</span> <span style="color:#960050;background-color:#1e0010">함</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> status <span style="color:#66d9ef">from</span> v$instance;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>STATUS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">OPEN</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> CDB <span style="color:#960050;background-color:#1e0010">여부</span> <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> name, cdb <span style="color:#66d9ef">from</span> v$database;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME    CDB
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------- ---
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>ORCLCDB   YES
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> pdb <span style="color:#960050;background-color:#1e0010">확인</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> con_id, name, open_mode <span style="color:#66d9ef">from</span> v$pdbs;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  CON_ID NAME                                 OPEN_MODE
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------- -------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#ae81ff">2</span> PDB$SEED                                 <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">ONLY</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> ORCLPDB1                                 <span style="color:#66d9ef">READ</span> <span style="color:#66d9ef">WRITE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">클라이언트에서</span> rocky8<span style="color:#f92672">-</span>oracle19:<span style="color:#ae81ff">1521</span><span style="color:#f92672">/</span>orclpdb1 <span style="color:#960050;background-color:#1e0010">접속</span>
</span></span><span style="display:flex;"><span>orclpdb1 <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>  (DESCRIPTION <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    (ADDRESS <span style="color:#f92672">=</span>(PROTOCOL<span style="color:#f92672">=</span>TCP)(<span style="color:#66d9ef">HOST</span><span style="color:#f92672">=</span><span style="color:#ae81ff">172</span>.<span style="color:#ae81ff">28</span>.<span style="color:#ae81ff">200</span>.<span style="color:#ae81ff">51</span>)(PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">1521</span>)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  (CONNECT_DATA <span style="color:#f92672">=</span>(SERVICE_NAME<span style="color:#f92672">=</span>orclpdb1)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h4 id="1-oracle19c-설치">1. oracle19c 설치</h4>
<p>생략</p>

        </div>
      </article>
    </div>
  </div>
  <aside class="aside">



<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li>
              <ul>
                <li><a href="#10-pdb-mkuser-백업">10. pdb mkuser 백업</a></li>
                <li><a href="#9-pdb-관리자-계정-변경">9. pdb 관리자 계정 변경</a></li>
                <li><a href="#8-sqlldr-우편번호-적재">8. sqlldr 우편번호 적재</a></li>
                <li><a href="#7-데이터-이관-작업">7. 데이터 이관 작업</a></li>
                <li><a href="#6-expdp-명령pump으로-dump-생성하기">6. expdp 명령(pump)으로 dump 생성하기</a></li>
                <li><a href="#5-dump-파일-import-하기">5. dump 파일 import 하기</a></li>
                <li><a href="#4-pdb-삭제">4. pdb 삭제</a></li>
                <li><a href="#3-새로운-pdb-생성-및-계정-생성">3. 새로운 pdb 생성 및 계정 생성</a>
                  <ul>
                    <li><a href="#31-pdb-생성">3.1 pdb 생성</a></li>
                    <li><a href="#32-새로운-pdb-에-user-생성">3.2 새로운 pdb 에 user 생성</a></li>
                  </ul>
                </li>
                <li><a href="#2-oracle19c-환경-정보">2. oracle19c 환경 정보</a></li>
                <li><a href="#1-oracle19c-설치">1. oracle19c 설치</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



</aside>

</main>

  <footer class="footer">
Designed by MK
</footer>
</body>
</html>
