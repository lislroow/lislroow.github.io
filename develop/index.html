<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title></title>
<meta name="description" content="(centos) hostname [root@develop ~]$ hostnamectl set-hostname develop [root@develop ~]$ (tar) -I, &amp;ndash;use-compress-program $ tar -I zstd -xvf zsh-5.8-5-x86_64.pkg.tar.zst (centos) xargs # 공백이나 개행문자가 포함된 파일명 삭제 $ fine . -type -f -print0 | xargs -O /bin/rm -f $ ls *.txt | xargs cat &amp;gt;&amp;gt; abc.txt $ ls | grep *.bak | xargs -I{} cp {} /home/bak_file (centos) lsof $ lsof -u jenkins -a &#43;D /data $ lsof -i 4 $ lsof -t -i TCP:8100 $ ps -ef | grep `lsof -t -i tcp:8100` $ lsof -t -i tcp:8100 | xargs kill -9 (centos) zsh $ yum install zsh $ sh -c &amp;#34;$(curl -fsSL https://raw.">
<meta property="og:title" content="" />
<meta property="og:description" content="(centos) hostname [root@develop ~]$ hostnamectl set-hostname develop [root@develop ~]$ (tar) -I, &ndash;use-compress-program $ tar -I zstd -xvf zsh-5.8-5-x86_64.pkg.tar.zst (centos) xargs # 공백이나 개행문자가 포함된 파일명 삭제 $ fine . -type -f -print0 | xargs -O /bin/rm -f $ ls *.txt | xargs cat &gt;&gt; abc.txt $ ls | grep *.bak | xargs -I{} cp {} /home/bak_file (centos) lsof $ lsof -u jenkins -a &#43;D /data $ lsof -i 4 $ lsof -t -i TCP:8100 $ ps -ef | grep `lsof -t -i tcp:8100` $ lsof -t -i tcp:8100 | xargs kill -9 (centos) zsh $ yum install zsh $ sh -c &#34;$(curl -fsSL https://raw." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/develop/" /><meta property="article:section" content="" />


<meta itemprop="name" content="">
<meta itemprop="description" content="(centos) hostname [root@develop ~]$ hostnamectl set-hostname develop [root@develop ~]$ (tar) -I, &ndash;use-compress-program $ tar -I zstd -xvf zsh-5.8-5-x86_64.pkg.tar.zst (centos) xargs # 공백이나 개행문자가 포함된 파일명 삭제 $ fine . -type -f -print0 | xargs -O /bin/rm -f $ ls *.txt | xargs cat &gt;&gt; abc.txt $ ls | grep *.bak | xargs -I{} cp {} /home/bak_file (centos) lsof $ lsof -u jenkins -a &#43;D /data $ lsof -i 4 $ lsof -t -i TCP:8100 $ ps -ef | grep `lsof -t -i tcp:8100` $ lsof -t -i tcp:8100 | xargs kill -9 (centos) zsh $ yum install zsh $ sh -c &#34;$(curl -fsSL https://raw.">

<meta itemprop="wordCount" content="10202">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="(centos) hostname [root@develop ~]$ hostnamectl set-hostname develop [root@develop ~]$ (tar) -I, &ndash;use-compress-program $ tar -I zstd -xvf zsh-5.8-5-x86_64.pkg.tar.zst (centos) xargs # 공백이나 개행문자가 포함된 파일명 삭제 $ fine . -type -f -print0 | xargs -O /bin/rm -f $ ls *.txt | xargs cat &gt;&gt; abc.txt $ ls | grep *.bak | xargs -I{} cp {} /home/bak_file (centos) lsof $ lsof -u jenkins -a &#43;D /data $ lsof -i 4 $ lsof -t -i TCP:8100 $ ps -ef | grep `lsof -t -i tcp:8100` $ lsof -t -i tcp:8100 | xargs kill -9 (centos) zsh $ yum install zsh $ sh -c &#34;$(curl -fsSL https://raw."/>




<link rel="preload" href="/scss/main.min.128acf28d37348bf110ce1bb682c5a43d1cb433b3b1fa337f834286ee6f9d4f0.css" as="style">
<link href="/scss/main.min.128acf28d37348bf110ce1bb682c5a43d1cb433b3b1fa337f834286ee6f9d4f0.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name"></span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item me-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/"><i class='fas fa-book'></i><span class="active">docs</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-develop-li">
  <input type="checkbox" id="m-develop-check" checked/>
  <label for="m-develop-check"><a href="/develop/" title="" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-develop"><span class="td-sidebar-nav-active-item">develop</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-3 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#centos-hostname">(centos) hostname</a></li>
            <li><a href="#tar--i---use-compress-program">(tar) -I, &ndash;use-compress-program</a></li>
            <li><a href="#centos-xargs">(centos) xargs</a></li>
            <li><a href="#centos-lsof">(centos) lsof</a></li>
            <li><a href="#centos-zsh">(centos) zsh</a></li>
            <li><a href="#systemctl-requires-속성">(systemctl) Requires 속성</a></li>
            <li><a href="#cockpit-grafana-grafana-pcp">(cockpit) grafana, grafana-pcp</a></li>
            <li><a href="#cockpit-cockpit-pcp-설치">(cockpit) cockpit-pcp 설치</a></li>
            <li><a href="#dnf-makecache-오류">(dnf-makecache) 오류</a></li>
            <li><a href="#elk-elasticsearch-패스워드-설정">(ELK) elasticsearch 패스워드 설정</a></li>
            <li><a href="#centos-디스크-size-확장">(centos) 디스크 size 확장</a></li>
            <li><a href="#jenkins-role-based-authorization-strategy-플러그인">(jenkins) Role-based Authorization Strategy 플러그인</a></li>
            <li><a href="#jenkins-ansicolor-플러그인">(jenkins) AnsiColor 플러그인</a></li>
            <li><a href="#ansible">(ansible)</a></li>
            <li><a href="#nexus-cleanup--compact-blob">(nexus) cleanup / compact blob</a></li>
            <li><a href="#shell-script-arguments-iterator">(shell) script arguments iterator</a></li>
            <li><a href="#shell-script-정보">(shell) script 정보</a></li>
            <li><a href="#libxml2-xmllint">(libxml2) xmllint</a></li>
            <li><a href="#vim-vimrc">(vim) .vimrc</a></li>
            <li><a href="#self-signed-cert-git-bash-등록">(self-signed-cert) git-bash 등록</a></li>
            <li><a href="#self-signed-cert-java-등록">(self-signed-cert) java 등록</a></li>
            <li><a href="#self-signed-cert-centos-등록">(self-signed-cert) centos 등록</a></li>
            <li><a href="#shell-script-파일-디렉토리">(shell) script 파일 디렉토리</a></li>
            <li><a href="#shell-process-및-port-체크">(shell) process 및 port 체크</a></li>
            <li><a href="#shell-find-newer-samefile">(shell) find newer samefile</a></li>
            <li><a href="#shell-curl">(shell) curl</a></li>
            <li><a href="#shell-파일명-문자열">(shell) 파일명 문자열</a></li>
            <li><a href="#shell-while-문">(shell) while 문</a></li>
            <li><a href="#shell-for-문">(shell) for 문</a></li>
            <li><a href="#shell-case-문">(shell) case 문</a></li>
            <li><a href="#tomcat-startstop">(tomcat) start/stop</a></li>
            <li><a href="#cockpit">(cockpit)</a></li>
            <li><a href="#mosh">(mosh)</a></li>
            <li><a href="#xmlstarlet">(xmlstarlet)</a></li>
            <li><a href="#oracle-12c-설치">(oracle) 12c 설치</a></li>
            <li><a href="#yum-설치된-목록-확인">(yum) 설치된 목록 확인</a></li>
            <li><a href="#firewall-disabled">(firewall) disabled</a></li>
            <li><a href="#selinux-disabled">(selinux) disabled</a></li>
            <li><a href="#network-ip-설정">(network) ip 설정</a></li>
            <li><a href="#openssl-key-생성-cmd">(openssl) key 생성 cmd</a></li>
            <li><a href="#sed-문자열-치환">(sed) 문자열 치환</a></li>
            <li><a href="#tar-분할-압축">(tar) 분할 압축</a></li>
            <li><a href="#tar-exclude-설정">(tar) exclude 설정</a></li>
            <li><a href="#httpd-설정">(httpd) 설정</a></li>
            <li><a href="#jenkins-설정">(jenkins) 설정</a></li>
            <li><a href="#git-bash-zsh">(git-bash) zsh</a></li>
            <li><a href="#windows-xcopy">(windows) xcopy</a></li>
            <li><a href="#jasypt-encrypt">(jasypt) encrypt</a></li>
            <li><a href="#git-bash-jq">(git-bash) jq</a></li>
            <li><a href="#java-keytool-인증서-생성">(java) keytool 인증서 생성</a></li>
            <li><a href="#docsy-code-highlighting-with-prism">(docsy) Code highlighting with Prism</a></li>
            <li><a href="#maven-패스워드-암호화">(maven) 패스워드 암호화</a></li>
            <li><a href="#windows-vbs-msgbox-사용하기">(windows) vbs MsgBox 사용하기</a></li>
            <li><a href="#maven-deploy-release-관련-플러그인">(maven) deploy, release 관련 플러그인</a></li>
            <li><a href="#eclipse-path-tools-git-bash">(eclipse) path-tools (git-bash)</a></li>
            <li><a href="#git-bash-bash_profilesh">(git-bash) bash_profile.sh</a></li>
            <li><a href="#eclipse-ansi-escape-in-console-플러그인">(eclipse) ANSI Escape in Console 플러그인</a></li>
            <li><a href="#eclipse-bash-editor-플러그인">(eclipse) Bash Editor 플러그인</a></li>
            <li><a href="#eclipse-md-파일-add-bookmark">(eclipse) .md 파일 add bookmark</a></li>
            <li><a href="#maven-helpevaluate-로컬-저장소-경로">(maven) help:evaluate 로컬 저장소 경로</a></li>
            <li><a href="#maven-deploydeploy-file-시-저장소-지정">(maven) deploy:deploy-file 시 저장소 지정</a></li>
            <li><a href="#git-pullff-only">(git) pull.ff only</a></li>
            <li><a href="#maven-spring-bootrepackage">(maven) spring-boot:repackage</a></li>
            <li><a href="#maven-malformed-uxxxx-encoding">(maven) Malformed \uxxxx encoding.</a></li>
            <li><a href="#git-turn-off-crlf-warning">(git) turn off crlf warning</a></li>
            <li><a href="#hugo-전체-rebuild">(hugo) 전체 rebuild</a></li>
            <li><a href="#eclipse-이클립스-로그">(eclipse) 이클립스 로그</a></li>
            <li><a href="#windows-setx">(windows) setx</a></li>
            <li><a href="#plex-daummoviebundle">(plex) DaumMovie.bundle</a></li>
            <li><a href="#nexus-curl-put">(nexus) curl PUT</a></li>
            <li><a href="#windows-dism">(windows) dism</a></li>
            <li><a href="#eclipse-xml-editor-tab-to-space">(eclipse) xml editor: tab to space</a></li>
            <li><a href="#eclipse-mybatipse-플러그인">(eclipse) mybatipse 플러그인</a></li>
            <li><a href="#erwin-database-connection">(erwin) database connection</a></li>
            <li><a href="#regex-not-matched-word">(regex) not matched word</a></li>
            <li><a href="#maven-release-github">(maven) release github</a></li>
            <li><a href="#git-tag">(git) tag</a></li>
            <li><a href="#git-특정-경로만-checkout-하기">(git) 특정 경로만 checkout 하기</a></li>
            <li><a href="#maven-version-ranges">(maven) version ranges</a></li>
            <li><a href="#eclipse-sts-boot-dashboard-filter">(eclipse) STS Boot Dashboard filter</a></li>
            <li><a href="#eclipse-eclipse-update">(eclipse) eclipse-update</a></li>
            <li><a href="#eclipse-scm-ignore">(eclipse) scm ignore</a></li>
            <li><a href="#github-ssh-key-등록">(github) ssh key 등록</a></li>
            <li><a href="#github-unable-to-read-askpass-오류">(github) unable to read askpass 오류</a></li>
            <li><a href="#github-personal-access-tokens">(github) Personal access tokens</a></li>
            <li><a href="#eclipse-debugging-필수-옵션">(eclipse) debugging 필수 옵션</a></li>
            <li><a href="#win-win-11-taskbar-그룹해제">(win) win 11 taskbar 그룹해제</a></li>
            <li><a href="#maven-release">(maven) release</a></li>
            <li><a href="#maven-helpevaluate">(maven) help:evaluate</a></li>
            <li><a href="#maven-dependency">(maven) dependency</a></li>
            <li><a href="#maven-deploydeploy-file">(maven) deploy:deploy-file</a></li>
            <li><a href="#maven-settingsxml-파일">(maven) settings.xml 파일</a></li>
            <li><a href="#maven-password-암호화">(maven) password 암호화</a></li>
            <li><a href="#java-vmargs-2개">(java) vmargs (2개)</a></li>
            <li><a href="#win-win11-system-tray-설정">(win) win11 system-tray 설정</a></li>
            <li><a href="#win-font-추천">(win) font 추천</a></li>
            <li><a href="#eclipse-hidpi-설정">(eclipse) hidpi 설정</a></li>
            <li><a href="#win-절전-cmd">(win) 절전 cmd</a></li>
            <li><a href="#vmware-실행-cmd">(vmware) 실행 cmd</a></li>
            <li><a href="#win-wol-설정">(win) wol 설정</a></li>
            <li><a href="#win-port-forwarding-cmd">(win) port-forwarding cmd</a></li>
            <li><a href="#win-파일-공유-설정">(win) 파일 공유 설정</a></li>
            <li><a href="#vmware-nat-설정">(vmware) nat 설정</a></li>
            <li><a href="#7z-7z-압축-cmd">(7z) 7z 압축 cmd</a></li>
            <li><a href="#jmeter-jmeter-실행-cmd">(jmeter) jmeter 실행 cmd</a></li>
            <li><a href="#win-xcopy-cmd">(win) xcopy cmd</a></li>
            <li><a href="#chrome-https-자동-접속-현상">(chrome) https 자동 접속 현상</a></li>
            <li><a href="#git-config-cmd">(git) config cmd</a></li>
            <li><a href="#git-pre-commit-shell">(git) pre-commit shell</a></li>
            <li><a href="#oracle-client-무설치-설정">(oracle) client 무설치 설정</a></li>
            <li><a href="#oracle-sqlplus">(oracle) sqlplus</a></li>
            <li><a href="#oracle-object-조회-query">(oracle) object 조회 query</a></li>
            <li><a href="#git-git-remote">(git) git-remote</a></li>
            <li><a href="#git-git-log">(git) git-log</a></li>
            <li><a href="#git-git-restore">(git) git-restore</a></li>
            <li><a href="#git-git-reset">(git) git-reset</a></li>
            <li><a href="#git-git-push">(git) git-push</a></li>
            <li><a href="#git-git-clean">(git) git-clean</a></li>
            <li><a href="#git-git-checkout">(git) git-checkout</a></li>
            <li><a href="#git-git-commit">(git) git-commit</a></li>
            <li><a href="#git-git-ls-files">(git) git-ls-files</a></li>
            <li><a href="#git-git-branch">(git) git-branch</a></li>
            <li><a href="#git-git-config-alias">(git) git-config (alias)</a></li>
            <li><a href="#git-git-diff">(git) git-diff</a></li>
            <li><a href="#apache-httpdconf">(apache) httpd.conf</a></li>
            <li><a href="#apache-sslconf">(apache) ssl.conf</a></li>
            <li><a href="#apache-vhost-centos8conf">(apache) vhost-centos8.conf</a></li>
            <li><a href="#apache-vhost-nexusconf">(apache) vhost-nexus.conf</a></li>
            <li><a href="#apache-vhost-gitlabconf">(apache) vhost-gitlab.conf</a></li>
            <li><a href="#apache-vhost-jenkinsconf">(apache) vhost-jenkins.conf</a></li>
            <li><a href="#apache-vhost-dlogconf">(apache) vhost-dlog.conf</a></li>
            <li><a href="#apache-vhost-dwwwconf">(apache) vhost-dwww.conf</a></li>
            <li><a href="#apache-weblogic-connector">(apache) weblogic-connector</a></li>
            <li><a href="#apache-selinux">(apache) selinux</a></li>
            <li><a href="#openssl-인증서-생성하기">(openssl) 인증서 생성하기</a></li>
            <li><a href="#oracle12-sysctl-설정">(oracle12) sysctl 설정</a></li>
            <li><a href="#oracle12-limits-설정">(oracle12) limits 설정</a></li>
            <li><a href="#oracle12-시스템-계정">(oracle12) 시스템 계정</a></li>
            <li><a href="#oracle12-설치-디렉토리">(oracle12) 설치 디렉토리</a></li>
            <li><a href="#oracle12-시스템-변수">(oracle12) 시스템 변수</a></li>
            <li><a href="#oracle12-gui-패키지-설치">(oracle12) gui 패키지 설치</a></li>
            <li><a href="#oracle12-oracle12c-ee-설치">(oracle12) oracle12c-ee 설치</a></li>
            <li><a href="#oracle12-systemctl-등록">(oracle12) systemctl 등록</a></li>
            <li><a href="#oracle12-각종-오류">(oracle12) 각종 오류</a></li>
            <li><a href="#oracle12-oratab-파일">(oracle12) oratab 파일</a></li>
            <li><a href="#oracle12-max_string_size--extended">(oracle12) max_string_size = EXTENDED</a></li>
            <li><a href="#oracle12-pdb-자동-시작">(oracle12) PDB 자동 시작</a></li>
            <li><a href="#oracle12-oracle-계정-생성">(oracle12) oracle 계정 생성</a></li>
            <li><a href="#oracle12-impexp">(oracle12) imp/exp</a></li>
            <li><a href="#oracle12-drop-table-문">(oracle12) drop table 문</a></li>
            <li><a href="#oracle12-character-set-설정">(oracle12) character-set 설정</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-7 pl-md-5" role="main">
            
            
            
<div class="td-content">
	<h1></h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<h4 id="centos-hostname">(centos) hostname</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[root@develop ~]$ hostnamectl set-hostname develop
</span></span><span style="display:flex;"><span>[root@develop ~]$
</span></span></code></pre></div><h4 id="tar--i---use-compress-program">(tar) -I, &ndash;use-compress-program</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ tar -I zstd -xvf zsh-5.8-5-x86_64.pkg.tar.zst
</span></span></code></pre></div><br>
<h4 id="centos-xargs">(centos) xargs</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># 공백이나 개행문자가 포함된 파일명 삭제
</span></span><span style="display:flex;"><span>$ fine . -type -f -print0 | xargs -O /bin/rm -f
</span></span><span style="display:flex;"><span>$ ls *.txt | xargs cat &gt;&gt; abc.txt
</span></span><span style="display:flex;"><span>$ ls | grep *.bak | xargs -I{} cp {} /home/bak_file
</span></span></code></pre></div><br>
<h4 id="centos-lsof">(centos) lsof</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ lsof -u jenkins -a +D /data
</span></span><span style="display:flex;"><span>$ lsof -i 4
</span></span><span style="display:flex;"><span>$ lsof -t -i TCP:8100
</span></span><span style="display:flex;"><span>$ ps -ef | grep `lsof -t -i tcp:8100`
</span></span><span style="display:flex;"><span>$ lsof -t -i tcp:8100 | xargs kill -9 
</span></span></code></pre></div><br>
<h4 id="centos-zsh">(centos) zsh</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ yum install zsh
</span></span><span style="display:flex;"><span>$ sh -c &#34;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&#34;
</span></span><span style="display:flex;"><span>$ vi ~/.zshrc
</span></span><span style="display:flex;"><span>ZSH_THEME=&#34;agnoster&#34;
</span></span><span style="display:flex;"><span>$ git clone https://github.com/powerline/fonts.git
</span></span><span style="display:flex;"><span>$ cd fonts &amp;&amp; ./install.sh
</span></span><span style="display:flex;"><span>$ git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
</span></span><span style="display:flex;"><span>$ git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
</span></span><span style="display:flex;"><span>$ vi ~/.zshrc
</span></span><span style="display:flex;"><span>plugins=(
</span></span><span style="display:flex;"><span>  git
</span></span><span style="display:flex;"><span>  zsh-autosuggestions
</span></span><span style="display:flex;"><span>  zsh-syntax-highlighting
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ vi ~/.oh-my-zsh/themes/agnoster.zsh-theme
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>prompt_newline() {
</span></span><span style="display:flex;"><span>  if [[ -n $CURRENT_BG ]]; then
</span></span><span style="display:flex;"><span>    echo -n &#34;%{%k%F{$CURRENT_BG}%}$SEGMENT_SEPARATOR
</span></span><span style="display:flex;"><span>%{%k%F{blue}%}$SEGMENT_SEPARATOR&#34;
</span></span><span style="display:flex;"><span>  else
</span></span><span style="display:flex;"><span>    echo -n &#34;%{%k%}&#34;
</span></span><span style="display:flex;"><span>  fi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  echo -n &#34;%{%f%}&#34;
</span></span><span style="display:flex;"><span>  CURRENT_BG=&#39;&#39;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>build_prompt() {
</span></span><span style="display:flex;"><span>  RETVAL=$?
</span></span><span style="display:flex;"><span>  prompt_status
</span></span><span style="display:flex;"><span>  prompt_virtualenv
</span></span><span style="display:flex;"><span>  prompt_context
</span></span><span style="display:flex;"><span>  prompt_dir
</span></span><span style="display:flex;"><span>  prompt_git
</span></span><span style="display:flex;"><span>  prompt_hg
</span></span><span style="display:flex;"><span>  prompt_newline
</span></span><span style="display:flex;"><span>  prompt_end
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><a href="/images/develop/20220222-centos-zsh.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="systemctl-requires-속성">(systemctl) Requires 속성</h4>
<p>logstash 서비스를 elasticsearch 서비스의 종속으로 구성해야할 필요가 생겼습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ vi /etc/systemd/system/logstash.service
</span></span><span style="display:flex;"><span>[Unit]
</span></span><span style="display:flex;"><span>Description=logstash
</span></span><span style="display:flex;"><span>Requires=elasticsearch.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 종속성 확인
</span></span><span style="display:flex;"><span>$ systemctl list-dependencies logstash.service 
</span></span><span style="display:flex;"><span>logstash.service
</span></span><span style="display:flex;"><span>● ├─-.mount
</span></span><span style="display:flex;"><span>● ├─elasticsearch.service
</span></span><span style="display:flex;"><span>● ├─system.slice
</span></span><span style="display:flex;"><span>● └─sysinit.target
</span></span><span style="display:flex;"><span>●   ├─dev-hugepages.mount
</span></span><span style="display:flex;"><span>●   ├─dev-mqueue.mount
</span></span></code></pre></div><br>
<h4 id="cockpit-grafana-grafana-pcp">(cockpit) grafana, grafana-pcp</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ yum install grafana grafana-pcp
</span></span><span style="display:flex;"><span>$ systemctl enable --now grafana-server
</span></span></code></pre></div><p>http://host:3000/ 으로 접속</p>
<p>최초 로그인: <a href="/images/develop/20220201-grafana_login_admin_admin.png" target="_blank">새 창 열림</a></p>
<p>포트 변경은 <code>/etc/grafana/grafana.ini</code> 파일에서 <code>http_port = 3000</code> 를 변경하면 됩니다.</p>
<p>서비스 재시작: <code>systemctl restart grafana-server</code></p>
<p>가상호스트 설정: <a href="/files/develop/20220201-grafana-vhost.txt" target="_blank">새 창 보기</a></p>
<p>로그인 후 설정</p>
<ul>
<li>좌측 메뉴 <code>Configuration</code> &gt; <code>Plugin</code> 선택</li>
<li><code>Performance Co-Pilot</code> 플러그인을 활성화 (enable 버튼 클릭)</li>
<li><code>cockpit-pcp</code>에서 <code>redis</code> 설치 후 <code>grafana</code>에서 <code>Configuration</code> &gt; <code>Data Sources</code> 선택
<br>(<code>grafana</code>는 cockpit-pcp 의 메트릭 정보를 redis 를 통해 가져옵니다. redis 설치는 cockpit 에서 버튼 클릭 한번으로 끝남)</li>
<li><code>HTTP</code>의 <code>URL</code> 항목만 <code>http://127.0.0.1:44322</code> 으로 입력 후 <code>Save &amp; Test</code> 버튼 클릭</li>
</ul>
<p>대시보드: <a href="/images/develop/20220201-grafana_dashboard_PCP_redis.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="cockpit-cockpit-pcp-설치">(cockpit) cockpit-pcp 설치</h4>
<p>시스템모니터링 기능이며 <code>cockpit-pcp</code>를 설치하여 메트릭 정보를 볼 수 있습니다.</p>
<p><a href="/images/develop/20220201-cockpit-pcp.png" target="_blank">새 창 보기</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ yum install cockpit-pcp
</span></span><span style="display:flex;"><span>$ systemctl enable pmlogger.service
</span></span><span style="display:flex;"><span>$ systemctl enable pmproxy.service
</span></span><span style="display:flex;"><span>$ systemctl daemon-reload
</span></span><span style="display:flex;"><span>$ systemctl start pmlogger.service
</span></span><span style="display:flex;"><span>$ systemctl start pmproxy.service
</span></span></code></pre></div><p>pmproxy.service 활성화를 통해 여러 머신의 메트릭 정보를 볼 수도 있습니다. (redis 설치됨)</p>
<p>참고: <a href="https://cockpit-project.org/blog/pcp-grafana.html" target="_blank">새 창 보기</a></p>
<br>
<h4 id="dnf-makecache-오류">(dnf-makecache) 오류</h4>
<p><code>dnf-makecache</code>는 centos의 자동업데이트 기능입니다.</p>
<p><code>오류: repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist 를 위해 메타데이타 내려받기에 실패하였습니다</code></p>
<p><a href="/files/develop/20220201-dnf-makecache_mirrorlist_error.txt" target="_blank">새 창 보기</a></p>
<p>disable 명령어는 다음과 같습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ gsettings set org.gnome.software download-updates false
</span></span><span style="display:flex;"><span>$ systemctl disable dnf-makecache.service
</span></span><span style="display:flex;"><span>$ systemctl disable dnf-makecache.timer
</span></span></code></pre></div><p>정상 작동하도록 하기 위해 yum 저장소 설정 파일을 수정합니다.</p>
<p><a href="/files/develop/20220201-yum_repo.txt" target="_blank">새 창 보기</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ sed -i &#39;s/mirrorlist/#mirrorlist/g&#39; /etc/yum.repos.d/CentOS-Linux-*
</span></span><span style="display:flex;"><span>$ sed -i &#39;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#39; /etc/yum.repos.d/CentOS-Linux-*
</span></span><span style="display:flex;"><span># yum upgrade 테스트
</span></span></code></pre></div><p>참고: dnf 저장소 관리 <a href="https://wnw1005.tistory.com/300" target="_blank">새 창 보기</a></p>
<br>
<h4 id="elk-elasticsearch-패스워드-설정">(ELK) elasticsearch 패스워드 설정</h4>
<p><code>elasticsearch</code>와 <code>kibana</code>에 id/pw 방식의 보안을 적용하기 위해 elasticsearch 에 패스워드를 설정합니다.</p>
<p>elasticsearch 에 패스워드를 설정하는 명령어는 <code>elasticsearch-setup-passwords interactive</code> 입니다.</p>
<p>오류 내용이 <code>ERROR: X-Pack Security is disabled by configuration</code> 으로 나올 경우 설정파일<code>elasticsearch.yml</code>이 기본으로 되어있을 경우 발생합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ /usr/share/elasticsearch/bin/elasticsearch-setup-passwords interactive
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Unexpected response code [500] from calling GET http://172.28.200.30:8200/_security/_authenticate?pretty
</span></span><span style="display:flex;"><span>It doesn&#39;t look like the X-Pack security feature is enabled on this Elasticsearch node.
</span></span><span style="display:flex;"><span>Please check if you have enabled X-Pack security in your elasticsearch.yml configuration file.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ERROR: X-Pack Security is disabled by configuration.
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div><p>설정파일<code>elasticsearch.yml</code>에서 아래와 같이 옵션을 추가합니다.</p>
<p>참고 링크: <a href="https://opster.com/guides/elasticsearch/security/elasticsearch-x-pack-basic-security-is-off/">새 창 보기</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>102 
</span></span><span style="display:flex;"><span>103 # 2022.01.27
</span></span><span style="display:flex;"><span>104 xpack.security.enabled: true
</span></span></code></pre></div><p>설정 추가 후 <code>systemctl restart elasticsearch</code> 재시작을하면 <code>xpack.security.transport.ssl.enabled</code> 을 추가하라는 메시지가 나옵니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>-- Unit elasticsearch.service has begun starting up.
</span></span><span style="display:flex;"><span> 1월 27 18:25:13 centos8 systemd-entrypoint[11169]: ERROR: [1] bootstrap checks failed. You must address the points described in the following [1] lines before starting Elasticsearch.
</span></span><span style="display:flex;"><span> 1월 27 18:25:13 centos8 systemd-entrypoint[11169]: bootstrap check failure [1] of [1]: Transport SSL must be enabled if security is enabled on a [basic] license. Please set [xpack.security.transport.ssl.enabled] to [true] or disa&gt;
</span></span><span style="display:flex;"><span> 1월 27 18:25:13 centos8 systemd-entrypoint[11169]: ERROR: Elasticsearch did not exit normally - check the logs at /outlog/PROD/es/elasticsearch.log
</span></span></code></pre></div><p>변경 후 재시작을 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>103 # 2022.01.27
</span></span><span style="display:flex;"><span>104 xpack.security.enabled: true
</span></span><span style="display:flex;"><span>105 xpack.security.transport.ssl.enabled: true
</span></span></code></pre></div><p><code>elasticsearch-setup-passwords interactive</code> 명령으로 패스워드를 설정합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ /usr/share/elasticsearch/bin/elasticsearch-setup-passwords interactive
</span></span><span style="display:flex;"><span>Initiating the setup of passwords for reserved users elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.
</span></span><span style="display:flex;"><span>You will be prompted to enter passwords as the process progresses.
</span></span><span style="display:flex;"><span>Please confirm that you would like to continue [y/N]y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Enter password for [elastic]: 
</span></span><span style="display:flex;"><span>passwords must be at least [6] characters long
</span></span><span style="display:flex;"><span>Try again.
</span></span><span style="display:flex;"><span>Enter password for [elastic]: 
</span></span><span style="display:flex;"><span>Reenter password for [elastic]: 
</span></span><span style="display:flex;"><span>Enter password for [apm_system]: 
</span></span><span style="display:flex;"><span>Reenter password for [apm_system]: 
</span></span><span style="display:flex;"><span>Enter password for [kibana_system]: 
</span></span><span style="display:flex;"><span>Reenter password for [kibana_system]: 
</span></span><span style="display:flex;"><span>Enter password for [logstash_system]: 
</span></span><span style="display:flex;"><span>Reenter password for [logstash_system]: 
</span></span><span style="display:flex;"><span>Enter password for [beats_system]: 
</span></span><span style="display:flex;"><span>Reenter password for [beats_system]: 
</span></span><span style="display:flex;"><span>Enter password for [remote_monitoring_user]: 
</span></span><span style="display:flex;"><span>Reenter password for [remote_monitoring_user]: 
</span></span><span style="display:flex;"><span>Changed password for user [apm_system]
</span></span><span style="display:flex;"><span>Changed password for user [kibana_system]
</span></span><span style="display:flex;"><span>Changed password for user [kibana]
</span></span><span style="display:flex;"><span>Changed password for user [logstash_system]
</span></span><span style="display:flex;"><span>Changed password for user [beats_system]
</span></span><span style="display:flex;"><span>Changed password for user [remote_monitoring_user]
</span></span><span style="display:flex;"><span>Changed password for user [elastic]
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><p>elasticsearch 의 security 적용으로 인해 kibana 의 설정을 확인해야합니다.</p>
<p>설정파일<code>/etc/kibana/kibana.yml</code>에 아래 내용을 추가하고 kibana를 재시작(<code>systemctl restart kibana</code>)합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span> <span style="color:#666">50</span> <span style="color:#408080;font-style:italic">#elasticsearch.username: &#34;kibana_system&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#666">51</span> <span style="color:#408080;font-style:italic">#elasticsearch.password: &#34;pass&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#666">52</span> elasticsearch.username: <span style="color:#ba2121">&#34;elastic&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#666">53</span> elasticsearch.password: <span style="color:#ba2121">&#34;패스워드&#34;</span>
</span></span></code></pre></div><p>브라우저로 kibana 에 접속하면 id/pw 를 요구합니다.</p>
<p><a href="/images/develop/20220127-elastic_security_kibana_login.png" target="_blank">새 창 보기</a></p>
<p>kibana 설정파일<code>/etc/kibana/kibana.yml</code>에 <code>elasticsearch.password</code> 값이 평문이 아닌 encryption 문자열로 설정하겠습니다.</p>
<ul>
<li><code>kibana-keystore</code> 명령어로 key 저장소 생성</li>
<li>생성된 key 저장소에 <code>elasticsearch.password</code> 추가</li>
</ul>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># kibana-keystore 의 경로를 확인합니다.</span>
</span></span><span style="display:flex;"><span>$ rpm -ql kibana | grep <span style="color:#ba2121">&#39;/bin/kibana&#39;</span>
</span></span><span style="display:flex;"><span>/usr/share/kibana/bin/kibana
</span></span><span style="display:flex;"><span>/usr/share/kibana/bin/kibana-encryption-keys
</span></span><span style="display:flex;"><span>/usr/share/kibana/bin/kibana-keystore
</span></span><span style="display:flex;"><span>/usr/share/kibana/bin/kibana-plugin
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># key 저장소를 생성합니다.</span>
</span></span><span style="display:flex;"><span>$ /usr/share/kibana/bin/kibana create
</span></span><span style="display:flex;"><span>A Kibana keystore already exists. Overwrite? <span style="color:#666">[</span>y/N<span style="color:#666">]</span> N
</span></span><span style="display:flex;"><span>Exiting without modifying keystore.
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 이미 key 저장소가 있다고하여 저장소를 확인해보려 했지만 찾을 수 없었습니다.</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 어딘가에 key 저장소가 있다고 생각하고 add 를 합니다.</span>
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>$ ./kibana-keystore add elasticsearch.password
</span></span><span style="display:flex;"><span>Enter value <span style="color:#008000;font-weight:bold">for</span> elasticsearch.password: *********
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 저장된 key 를 확인합니다.</span>
</span></span><span style="display:flex;"><span>$ ./kibana-keystore list
</span></span><span style="display:flex;"><span>elasticsearch.password
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># kibana.yml 설정파일에 &#34;elasticsearch.password&#34; 항목을 주석처리 합니다.</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># kibana 에서 관리하는 key 저장소에 등록된 값으로 사용될 것입니다.</span>
</span></span><span style="display:flex;"><span>$ vi /etc/kibana/kibana.yml
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#elasticsearch.password=패스워드</span>
</span></span></code></pre></div><p>kibana-keystore 에 정상적으로 등록되지 않았다면 아래와 같은 로그를 만나게 됩니다.</p>
<p>아래 오류를 보기위해 테스트를 하려면,</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./kibana-keystore list
</span></span><span style="display:flex;"><span>elasticsearch.password
</span></span><span style="display:flex;"><span>$ ./kibana-keystore remove elasticsearch.password
</span></span><span style="display:flex;"><span>$ ./kibana-keystore list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ systemctl restart kibana
</span></span><span style="display:flex;"><span>$ tail -f /outlog/PROD/kibana/kibana.log
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="">#</span> <span style="">서비스</span> <span style="">오류</span> <span style="">로그:</span> <span style="">key</span> <span style="">를</span> <span style="">찾을</span> <span style="">수</span> <span style="">없을</span> <span style="">경우</span>
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:40:02+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;warning&#34;</span>,<span style="color:#ba2121">&#34;plugins&#34;</span>,<span style="color:#ba2121">&#34;alerting&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14494</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;APIs are disabled because the Encrypted Saved Objects plugin is missing encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:40:02+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;info&#34;</span>,<span style="color:#ba2121">&#34;plugins&#34;</span>,<span style="color:#ba2121">&#34;ruleRegistry&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14494</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Installing common resources shared between all indices&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:40:02+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;warning&#34;</span>,<span style="color:#ba2121">&#34;plugins&#34;</span>,<span style="color:#ba2121">&#34;reporting&#34;</span>,<span style="color:#ba2121">&#34;config&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14494</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Chromium sandbox provides an additional layer of protection, but is not supported for Linux CentOS 8.5.2111\n OS. Automatically setting &#39;xpack.reporting.capture.browser.chromium.disableSandbox: true&#39;.&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:40:02+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;warning&#34;</span>,<span style="color:#ba2121">&#34;process&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14494</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Error [ProductNotSupportedSecurityError]: The client is unable to verify that the server is Elasticsearch due to security privileges on the server side. Some functionality may not be compatible if the server is running an unsupported product.\n    at /usr/share/kibana/node_modules/@elastic/elasticsearch/lib/Transport.js:576:19\n    at onBody (/usr/share/kibana/node_modules/@elastic/elasticsearch/lib/Transport.js:369:9)\n    at IncomingMessage.onEnd (/usr/share/kibana/node_modules/@elastic/elasticsearch/lib/Transport.js:291:11)\n    at IncomingMessage.emit (node:events:402:35)\n    at endReadableNT (node:internal/streams/readable:1343:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:40:03+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;error&#34;</span>,<span style="color:#ba2121">&#34;elasticsearch-service&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14494</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Unable to retrieve version information from Elasticsearch nodes. security_exception: [security_exception] Reason: missing authentication credentials for REST request [/_nodes?filter_path=nodes.*.version%2Cnodes.*.http.publish_address%2Cnodes.*.ip]&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="">#</span> <span style="">서비스</span> <span style="">정상</span> <span style="">로그</span>
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:51:17+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;warning&#34;</span>,<span style="color:#ba2121">&#34;plugins&#34;</span>,<span style="color:#ba2121">&#34;reporting&#34;</span>,<span style="color:#ba2121">&#34;chromium&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14712</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Enabling the Chromium sandbox provides an additional layer of protection.&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:51:19+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;info&#34;</span>,<span style="color:#ba2121">&#34;plugins&#34;</span>,<span style="color:#ba2121">&#34;securitySolution&#34;</span>,<span style="color:#ba2121">&#34;endpoint:metadata-check-transforms-task:0&#34;</span>,<span style="color:#ba2121">&#34;0&#34;</span>,<span style="color:#ba2121">&#34;1&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14712</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;no endpoint metadata transforms found&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#008000;font-weight:bold">&#34;type&#34;</span>:<span style="color:#ba2121">&#34;log&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;@timestamp&#34;</span>:<span style="color:#ba2121">&#34;2022-01-27T20:51:26+09:00&#34;</span>,<span style="color:#008000;font-weight:bold">&#34;tags&#34;</span>:[<span style="color:#ba2121">&#34;info&#34;</span>,<span style="color:#ba2121">&#34;status&#34;</span>],<span style="color:#008000;font-weight:bold">&#34;pid&#34;</span>:<span style="color:#666">14712</span>,<span style="color:#008000;font-weight:bold">&#34;message&#34;</span>:<span style="color:#ba2121">&#34;Kibana is now available (was degraded)&#34;</span>}
</span></span></code></pre></div><br>
<h4 id="centos-디스크-size-확장">(centos) 디스크 size 확장</h4>
<p><code>lsblk</code> 명령으로 디스크 size 를 확인합니다.</p>
<p>(디스크 sda 가 70G 로 되어있습니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ lsblk 
</span></span><span style="display:flex;"><span>NAME                MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
</span></span><span style="display:flex;"><span>sda                   8:0    <span style="color:#666">0</span>   70G  <span style="color:#666">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1                8:1    <span style="color:#666">0</span>    1G  <span style="color:#666">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2                8:2    <span style="color:#666">0</span>   69G  <span style="color:#666">0</span> part 
</span></span><span style="display:flex;"><span>  ├─cl_centos8-root 253:0    <span style="color:#666">0</span> 56.7G  <span style="color:#666">0</span> lvm  /
</span></span><span style="display:flex;"><span>  ├─cl_centos8-swap 253:1    <span style="color:#666">0</span>    7G  <span style="color:#666">0</span> lvm  <span style="color:#666">[</span>SWAP<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>  └─cl_centos8-home 253:2    <span style="color:#666">0</span>  5.3G  <span style="color:#666">0</span> lvm  /home
</span></span><span style="display:flex;"><span>sr0                  11:0    <span style="color:#666">1</span> 1024M  <span style="color:#666">0</span> rom  
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><p>guest-os 를 shutdown 하고, vmware 에서 디스크 capacity 를 확장합니다.</p>
<p>(디스크 sda 를 80G 확장합니다.)</p>
<img src="/images/develop/20220126-vmware_expand-disk-capacity.png" width="600">
<br>
<br>
<p>guest-os 를 startup 하고 lsblk 로 확장된 크기를 확인합니다.</p>
<p>(디스크 sda 가 80G 로 확장된 것을 확인할 수 있습니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ lsblk
</span></span><span style="display:flex;"><span>NAME                MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
</span></span><span style="display:flex;"><span>sda                   8:0    <span style="color:#666">0</span>   80G  <span style="color:#666">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1                8:1    <span style="color:#666">0</span>    1G  <span style="color:#666">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2                8:2    <span style="color:#666">0</span>   69G  <span style="color:#666">0</span> part 
</span></span><span style="display:flex;"><span>  ├─cl_centos8-root 253:0    <span style="color:#666">0</span> 56.7G  <span style="color:#666">0</span> lvm  /
</span></span><span style="display:flex;"><span>  ├─cl_centos8-swap 253:1    <span style="color:#666">0</span>    7G  <span style="color:#666">0</span> lvm  <span style="color:#666">[</span>SWAP<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>  └─cl_centos8-home 253:2    <span style="color:#666">0</span>  5.3G  <span style="color:#666">0</span> lvm  /home
</span></span><span style="display:flex;"><span>sr0                  11:0    <span style="color:#666">1</span> 1024M  <span style="color:#666">0</span> rom  
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><p>sda2 를 69G 에서 79G 로 확장합니다. 확장에 사용될 명령어는 <code>growpart</code> 입니다.</p>
<p>패키지가 설치되어 있지 않으면 yum 으로 설치를 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install cloud-utils-growpart
</span></span><span style="display:flex;"><span>$ which growpart
</span></span><span style="display:flex;"><span>/usr/bin/growpart
</span></span></code></pre></div><p>growpart 명령으로 피지컬 파티션<code>sda2</code>의 size를 확장합니다.</p>
<p>확장 전에 피지컬 파티션을 상태를 확인합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ vgdisplay 
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               cl_centos8
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#666">4</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;69.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#666">17663</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#666">17663</span> / &lt;69.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#666">0</span> / <span style="color:#666">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               tJ9xgp-NhNP-7kPQ-JwKe-y1TQ-8jkP-1U5ox4
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><p>growpart 명령으로 size 를 확장합니다.</p>
<p>확장 후 <code>lsblk</code>, <code>vgdisplay</code> 로 변경된 사항을 확인합니다.</p>
<p>(lsblk 에서 sda2 의 size가 +10G 된 것을 볼 수 있습니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ growpart /dev/sda <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>CHANGED: <span style="color:#19177c">partition</span><span style="color:#666">=</span><span style="color:#666">2</span> <span style="color:#19177c">start</span><span style="color:#666">=</span><span style="color:#666">2099200</span> old: <span style="color:#19177c">size</span><span style="color:#666">=</span><span style="color:#666">144701440</span> <span style="color:#19177c">end</span><span style="color:#666">=</span><span style="color:#666">146800640</span> new: <span style="color:#19177c">size</span><span style="color:#666">=</span><span style="color:#666">165672927</span> <span style="color:#19177c">end</span><span style="color:#666">=</span><span style="color:#666">167772127</span>
</span></span><span style="display:flex;"><span>$ lsblk 
</span></span><span style="display:flex;"><span>NAME                MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
</span></span><span style="display:flex;"><span>sda                   8:0    <span style="color:#666">0</span>   80G  <span style="color:#666">0</span> disk 
</span></span><span style="display:flex;"><span>├─sda1                8:1    <span style="color:#666">0</span>    1G  <span style="color:#666">0</span> part /boot
</span></span><span style="display:flex;"><span>└─sda2                8:2    <span style="color:#666">0</span>   79G  <span style="color:#666">0</span> part 
</span></span><span style="display:flex;"><span>  ├─cl_centos8-root 253:0    <span style="color:#666">0</span> 56.7G  <span style="color:#666">0</span> lvm  /
</span></span><span style="display:flex;"><span>  ├─cl_centos8-swap 253:1    <span style="color:#666">0</span>    7G  <span style="color:#666">0</span> lvm  <span style="color:#666">[</span>SWAP<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>  └─cl_centos8-home 253:2    <span style="color:#666">0</span>  5.3G  <span style="color:#666">0</span> lvm  /home
</span></span><span style="display:flex;"><span>sr0                  11:0    <span style="color:#666">1</span> 1024M  <span style="color:#666">0</span> rom  
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div><p>피지컬 파티션<code>sda2</code> 에 추가된 용량을 할당해야 합니다. (명령어 <code>pvresize /dev/sda2</code>)</p>
<p>할당 후 vgdisplay 에서 <code>Free PE / Size</code> 에서 변경된 것을 확인할 수 있습니다.</p>
<p>(<code>Free  PE / Size       0 / 0   </code> &gt; <code>Free  PE / Size       2560 / 10.00 GiB</code>)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ vgdisplay 
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               cl_centos8
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#666">4</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;69.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#666">17663</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#666">17663</span> / &lt;69.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#666">0</span> / <span style="color:#666">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               tJ9xgp-NhNP-7kPQ-JwKe-y1TQ-8jkP-1U5ox4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ pvresize /dev/sda2
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#ba2121">&#34;/dev/sda2&#34;</span> changed
</span></span><span style="display:flex;"><span>  <span style="color:#666">1</span> physical volume<span style="color:#666">(</span>s<span style="color:#666">)</span> resized or updated / <span style="color:#666">0</span> physical volume<span style="color:#666">(</span>s<span style="color:#666">)</span> not resized
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>$ vgdisplay
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               cl_centos8
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#666">5</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;79.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#666">20223</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#666">17663</span> / &lt;69.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#666">2560</span> / 10.00 GiB
</span></span><span style="display:flex;"><span>  VG UUID               tJ9xgp-NhNP-7kPQ-JwKe-y1TQ-8jkP-1U5ox4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>&lt;br&gt;
</span></span></code></pre></div><p>로지컬 파티션<code>cl_centos8-root</code>을 확장해야 합니다.</p>
<p>로지컬 파티션을 확인부터 합니다. (명령어 <code>lvdisplay</code> 혹은 <code>df</code>로 확인할 수 있습니다.)</p>
<p>(확장할 로지컬 파티션은 <code>/dev/cl_centos8/root</code> 입니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem                   Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs                     3.8G     <span style="color:#666">0</span>  3.8G   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                        3.8G     <span style="color:#666">0</span>  3.8G   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                        3.8G  9.5M  3.8G   1% /run
</span></span><span style="display:flex;"><span>tmpfs                        3.8G     <span style="color:#666">0</span>  3.8G   0% /sys/fs/cgroup
</span></span><span style="display:flex;"><span>/dev/mapper/cl_centos8-root   57G   43G   15G  75% /
</span></span><span style="display:flex;"><span>/dev/sda1                   1014M  378M  637M  38% /boot
</span></span><span style="display:flex;"><span>/dev/mapper/cl_centos8-home  5.4G  372M  5.0G   7% /home
</span></span><span style="display:flex;"><span>//172.28.200.1/share         345G  234G  112G  68% /share
</span></span><span style="display:flex;"><span>tmpfs                        775M     <span style="color:#666">0</span>  775M   0% /run/user/0
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>$ lvdisplay 
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/root
</span></span><span style="display:flex;"><span>  LV Name                root
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                DzRXf6-roJe-0He9-MBow-ccu0-bWjk-qPxfZS
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:35 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 1</span>
</span></span><span style="display:flex;"><span>  LV Size                &lt;56.66 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">14504</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:0
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/home
</span></span><span style="display:flex;"><span>  LV Name                home
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                9dT8j9-MTd1-dlO2-ceHH-vnpS-KtGJ-je2ReA
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:35 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 1</span>
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.34 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">1367</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/swap
</span></span><span style="display:flex;"><span>  LV Name                swap
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                VSq1ve-Dn73-RLjq-q2GP-wa0r-De07-CO7edF
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:36 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 2</span>
</span></span><span style="display:flex;"><span>  LV Size                7.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">1792</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:1
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><p>로지컬 파티션의 size 확장 명령어 <code>lvextend</code> 를 사용하여 확장합니다.</p>
<p>로지컬 파티션명은 lvdisplay 에 표시되는 <code>/dev/cl_centos8/root</code>를 사용해도되고, df 에 표시되는 <code>/dev/mapper/cl_centos8-root</code>를 사용해도 됩니다.</p>
<p>(df 에서 <code>/dev/mapper/cl_centos8-root</code> 의 size 가 +10G 된 것을 확인할 수 있고, lvdisplay에서도 <code>LV Size                &lt;56.66 GiB</code> &gt; <code>LV Size                &lt;66.66 GiB</code> 로 변경된 것을 확인할 수 있습니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ lvextend -r -l +100%FREE /dev/cl_centos8/root
</span></span><span style="display:flex;"><span>  Size of logical volume cl_centos8/root changed from &lt;56.66 GiB <span style="color:#666">(</span><span style="color:#666">14504</span> extents<span style="color:#666">)</span> to &lt;66.66 GiB <span style="color:#666">(</span><span style="color:#666">17064</span> extents<span style="color:#666">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume cl_centos8/root successfully resized.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#666">=</span>/dev/mapper/cl_centos8-root <span style="color:#19177c">isize</span><span style="color:#666">=</span><span style="color:#666">512</span>    <span style="color:#19177c">agcount</span><span style="color:#666">=</span>4, <span style="color:#19177c">agsize</span><span style="color:#666">=</span><span style="color:#666">3713024</span> <span style="color:#19177c">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">=</span>                       <span style="color:#19177c">sectsz</span><span style="color:#666">=</span><span style="color:#666">512</span>   <span style="color:#19177c">attr</span><span style="color:#666">=</span>2, <span style="color:#19177c">projid32bit</span><span style="color:#666">=</span><span style="color:#19177c">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">=</span>                       <span style="color:#19177c">crc</span><span style="color:#666">=</span><span style="color:#666">1</span>        <span style="color:#19177c">finobt</span><span style="color:#666">=</span>1, <span style="color:#19177c">sparse</span><span style="color:#666">=</span>1, <span style="color:#19177c">rmapbt</span><span style="color:#666">=</span><span style="color:#19177c">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">=</span>                       <span style="color:#19177c">reflink</span><span style="color:#666">=</span><span style="color:#666">1</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">data</span>     <span style="color:#666">=</span>                       <span style="color:#19177c">bsize</span><span style="color:#666">=</span><span style="color:#666">4096</span>   <span style="color:#19177c">blocks</span><span style="color:#666">=</span>14852096, <span style="color:#19177c">imaxpct</span><span style="color:#666">=</span><span style="color:#19177c">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">=</span>                       <span style="color:#19177c">sunit</span><span style="color:#666">=</span><span style="color:#666">0</span>      <span style="color:#19177c">swidth</span><span style="color:#666">=</span><span style="color:#666">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#19177c">naming</span>   <span style="color:#666">=</span>version <span style="color:#666">2</span>              <span style="color:#19177c">bsize</span><span style="color:#666">=</span><span style="color:#666">4096</span>   ascii-ci<span style="color:#666">=</span>0, <span style="color:#19177c">ftype</span><span style="color:#666">=</span><span style="color:#666">1</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">log</span>      <span style="color:#666">=</span>internal log           <span style="color:#19177c">bsize</span><span style="color:#666">=</span><span style="color:#666">4096</span>   <span style="color:#19177c">blocks</span><span style="color:#666">=</span>7252, <span style="color:#19177c">version</span><span style="color:#666">=</span><span style="color:#19177c">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#666">=</span>                       <span style="color:#19177c">sectsz</span><span style="color:#666">=</span><span style="color:#666">512</span>   <span style="color:#19177c">sunit</span><span style="color:#666">=</span><span style="color:#666">0</span> blks, lazy-count<span style="color:#666">=</span><span style="color:#666">1</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">realtime</span> <span style="color:#666">=</span>none                   <span style="color:#19177c">extsz</span><span style="color:#666">=</span><span style="color:#666">4096</span>   <span style="color:#19177c">blocks</span><span style="color:#666">=</span>0, <span style="color:#19177c">rtextents</span><span style="color:#666">=</span><span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>data blocks changed from <span style="color:#666">14852096</span> to <span style="color:#666">17473536</span>
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem                   Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs                     3.8G     <span style="color:#666">0</span>  3.8G   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                        3.8G     <span style="color:#666">0</span>  3.8G   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                        3.8G  9.5M  3.8G   1% /run
</span></span><span style="display:flex;"><span>tmpfs                        3.8G     <span style="color:#666">0</span>  3.8G   0% /sys/fs/cgroup
</span></span><span style="display:flex;"><span>/dev/mapper/cl_centos8-root   67G   43G   25G  64% /
</span></span><span style="display:flex;"><span>/dev/sda1                   1014M  378M  637M  38% /boot
</span></span><span style="display:flex;"><span>/dev/mapper/cl_centos8-home  5.4G  372M  5.0G   7% /home
</span></span><span style="display:flex;"><span>//172.28.200.1/share         345G  234G  112G  68% /share
</span></span><span style="display:flex;"><span>tmpfs                        775M     <span style="color:#666">0</span>  775M   0% /run/user/0
</span></span><span style="display:flex;"><span>$ 
</span></span><span style="display:flex;"><span>$ lvdisplay 
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/root
</span></span><span style="display:flex;"><span>  LV Name                root
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                DzRXf6-roJe-0He9-MBow-ccu0-bWjk-qPxfZS
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:35 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 1</span>
</span></span><span style="display:flex;"><span>  LV Size                &lt;66.66 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">17064</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:0
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/home
</span></span><span style="display:flex;"><span>  LV Name                home
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                9dT8j9-MTd1-dlO2-ceHH-vnpS-KtGJ-je2ReA
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:35 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 1</span>
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.34 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">1367</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/cl_centos8/swap
</span></span><span style="display:flex;"><span>  LV Name                swap
</span></span><span style="display:flex;"><span>  VG Name                cl_centos8
</span></span><span style="display:flex;"><span>  LV UUID                VSq1ve-Dn73-RLjq-q2GP-wa0r-De07-CO7edF
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#008000">time</span> centos8, 2021-11-28 12:38:36 +0900
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># open                 2</span>
</span></span><span style="display:flex;"><span>  LV Size                7.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#666">1792</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#008000">set</span> to     <span style="color:#666">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:1
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>$
</span></span></code></pre></div><br>
<h4 id="jenkins-role-based-authorization-strategy-플러그인">(jenkins) Role-based Authorization Strategy 플러그인</h4>
<p>플러그인 설치 후 <code>Jenkins 관리</code> &gt; <code>Configure Global Security</code> 메뉴로 이동합니다.</p>
<p><code>Authorization</code> 영역에 <code>Role-Based Strategy</code> 를 체크합니다.</p>
<p><a href="/images/develop/20220117-jenkins_role-based-authorization-strategy_plugin.png" target="_blank">새 창 보기</a></p>
<p><code>Jenkins 관리</code> &gt; <code>Manage and Assign Roles</code> 에서 세부 설정을 합니다.</p>
<p><a href="/images/develop/20220117-jenkins_role-based-authorization-strategy_config.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="jenkins-ansicolor-플러그인">(jenkins) AnsiColor 플러그인</h4>
<p>플러그인 설치 후 개별 job 의 <code>구성</code>에서 <code>빌드 환경</code>에 <code>Color ANSI Console Output</code> 을 선택하면 됩니다.</p>
<p>플러그인 설명은 <code>Adds ANSI coloring to the Console Output</code> 입니다.</p>
<p><a href="/images/develop/20220117-jenkins_ansicolor_plugin.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="ansible">(ansible)</h4>
<p>[TODO] 내용 확인 후 세부 작성</p>
<p><code>ansible</code> 설치 로그 <a href="/files/develop/20220117-install-ansible_log.txt" target="_blank">새 창 보기</a></p>
<br>
<h4 id="nexus-cleanup--compact-blob">(nexus) cleanup / compact blob</h4>
<p>nexus 저장소에 오래된 snapshot 이 많아져서 공간이 부족해지면 아래 2가지 작업을 등록합니다.</p>
<p>cleanup policy 및 cleanup task 만 등록할 경우 실제 blob 파일은 삭제되지 않기에 <code>compact blob task</code> 까지 등록해야 합니다.</p>
<p>task 등록이 된 다음에는 해당 task 에서 <code>Run</code> 버튼을 클릭하여 실행하고 du 명령어로 공간이 확보된 것을 확인할 수 있을 것입니다.</p>
<ul>
<li>
<p><code>Repository</code> &gt; <code>Cleanup Policies</code> 메뉴에서 정책 등록</p>
<p>cleanup policy 등록: <a href="/images/develop/20220114-nexus-cleanup-policy.png" target="_blank">새 창 보기</a></p>
</li>
<li>
<p><code>System</code> &gt; <code>Task</code> 메뉴에서 작업 등록</p>
<p>cleanup task 등록: <a href="/images/develop/20220114-nexus-cleanup-task.png" target="_blank">새 창 보기</a></p>
<p>compact blob task 등록: <a href="/images/develop/20220114-nexus-compact-blob-task.png" target="_blank">새 창 보기</a></p>
</li>
</ul>
<br>
<h4 id="shell-script-arguments-iterator">(shell) script arguments iterator</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">argc</span><span style="color:#666">=</span><span style="color:#19177c">$#</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">argv</span><span style="color:#666">=(</span><span style="color:#ba2121">&#34;</span><span style="color:#19177c">$@</span><span style="color:#ba2121">&#34;</span><span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;argc=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">argc</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;argv=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">argv</span>[*]<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">for</span> <span style="color:#666">((</span><span style="color:#19177c">i</span><span style="color:#666">=</span>0; i&lt;argc; i++<span style="color:#666">))</span>; <span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;argv[</span><span style="color:#19177c">$i</span><span style="color:#ba2121">]=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">argv</span>[<span style="color:#19177c">$i</span>]<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./test.sh a b <span style="color:#ba2121">&#39;c d&#39;</span> <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">### [start] test.sh a b c d 3 ###</span>
</span></span><span style="display:flex;"><span>+++ <span style="color:#666">(</span>system-env<span style="color:#666">)</span> +++
</span></span><span style="display:flex;"><span><span style="color:#19177c">SCRIPT_DIR</span><span style="color:#666">=</span>/z/project/pilot/service
</span></span><span style="display:flex;"><span><span style="color:#19177c">argc</span><span style="color:#666">=</span><span style="color:#666">4</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">argv</span><span style="color:#666">=</span>a b c d <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>argv<span style="color:#666">[</span>0<span style="color:#666">]=</span>a
</span></span><span style="display:flex;"><span>argv<span style="color:#666">[</span>1<span style="color:#666">]=</span>b
</span></span><span style="display:flex;"><span>argv<span style="color:#666">[</span>2<span style="color:#666">]=</span>c d
</span></span><span style="display:flex;"><span>argv<span style="color:#666">[</span>3<span style="color:#666">]=</span><span style="color:#666">3</span>
</span></span></code></pre></div><br>
<h4 id="shell-script-정보">(shell) script 정보</h4>
<p>bash 에서 script 파일을 실행할 때 기본 정보를 출력했습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# arguments called with ----&gt;  </span><span style="color:#b68;font-weight:bold">${</span>@<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">     &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# \$1 ----------------------&gt;  </span><span style="color:#19177c">$1</span><span style="color:#ba2121">       &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# \$2 ----------------------&gt;  </span><span style="color:#19177c">$2</span><span style="color:#ba2121">       &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# path to me ---------------&gt;  </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">0</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">     &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# parent path --------------&gt;  </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">0</span>%/*<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">  &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;# my name ------------------&gt;  </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">0</span>##*/<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ /z/project/pilot/service/service-www/a.sh <span style="color:#666">1</span> <span style="color:#666">2</span> <span style="color:#666">4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># arguments called with ----&gt;  1 2 4</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># $1 ----------------------&gt;  1</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># $2 ----------------------&gt;  2</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># path to me ---------------&gt;  /z/project/pilot/service/service-www/a.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># parent path --------------&gt;  /z/project/pilot/service/service-www</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># my name ------------------&gt;  a.sh</span>
</span></span></code></pre></div><br>
<h4 id="libxml2-xmllint">(libxml2) xmllint</h4>
<p>xmllint 를 이용하여 nexus 의 maven-metadata.xml 을 파싱하는 예시입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#19177c">XML_URL</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;https://nexus/repository/maven-snapshot/mgkim/framework/framework-online/maven-metadata.xml&#34;</span>
</span></span><span style="display:flex;"><span>$ curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | cat -
</span></span><span style="display:flex;"><span>&lt;?xml <span style="color:#19177c">version</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;1.0&#34;</span> <span style="color:#19177c">encoding</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>&lt;metadata&gt;
</span></span><span style="display:flex;"><span>  &lt;groupId&gt;mgkim.framework&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>  &lt;artifactId&gt;framework-online&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>  &lt;versioning&gt;
</span></span><span style="display:flex;"><span>    &lt;versions&gt;
</span></span><span style="display:flex;"><span>      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
</span></span><span style="display:flex;"><span>      &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;
</span></span><span style="display:flex;"><span>    &lt;/versions&gt;
</span></span><span style="display:flex;"><span>    &lt;lastUpdated&gt;20220110062815&lt;/lastUpdated&gt;
</span></span><span style="display:flex;"><span>  &lt;/versioning&gt;
</span></span><span style="display:flex;"><span>&lt;/metadata&gt;
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># --xpath 에 존재하지 않는 node 명을 입력했을 경우 &#39;XPath set is empty&#39; 가 표시됨</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;//aaa/text()&#34;</span> -<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>XPath <span style="color:#008000">set</span> is empty
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># node명 &#34;&lt;groupId&gt;&#34; 의 값을 가져오는 2가지 예시</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;metadata/groupId/text()&#34;</span> -<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>mgkim.framework
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;//groupId/text()&#34;</span> -<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>mgkim.framework
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># node명 &#34;&lt;version&gt;&#34; 이 여러개일 경우 마지막만 반환하는 예시</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;//version[last()]/text()&#34;</span> -<span style="color:#008000;font-weight:bold">)</span> 
</span></span><span style="display:flex;"><span>2.0-SNAPSHOT
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># curl 의 결과를 xmllint 에 전달하기 위해 </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># xmllint 의 마지막에 dash`-` 문자가 반드시 포함되어야 함</span>
</span></span></code></pre></div><p><code>--xpath</code> 는 쌍따옴표<code>&quot;</code>로 해주세요. (<code>'</code>일 경우 변수를 포함한 값으로 표현이 안됩니다.)</p>
<p>아래는 여러 node 가 select 되는 예시에서 index 변수로 접근하는 예시입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#19177c">XML_URL</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;https://nexus/repository/maven-snapshot/mgkim/framework/framework-online/maven-metadata.xml&#34;</span>
</span></span><span style="display:flex;"><span>$ curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | cat -
</span></span><span style="display:flex;"><span>&lt;?xml <span style="color:#19177c">version</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;1.0&#34;</span> <span style="color:#19177c">encoding</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;UTF-8&#34;</span>?&gt;
</span></span><span style="display:flex;"><span>&lt;metadata&gt;
</span></span><span style="display:flex;"><span>  &lt;groupId&gt;mgkim.framework&lt;/groupId&gt;
</span></span><span style="display:flex;"><span>  &lt;artifactId&gt;framework-online&lt;/artifactId&gt;
</span></span><span style="display:flex;"><span>  &lt;versioning&gt;
</span></span><span style="display:flex;"><span>    &lt;versions&gt;
</span></span><span style="display:flex;"><span>      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
</span></span><span style="display:flex;"><span>      &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;
</span></span><span style="display:flex;"><span>    &lt;/versions&gt;
</span></span><span style="display:flex;"><span>    &lt;lastUpdated&gt;20220110062815&lt;/lastUpdated&gt;
</span></span><span style="display:flex;"><span>  &lt;/versioning&gt;
</span></span><span style="display:flex;"><span>&lt;/metadata&gt;
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">count</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;count(//version)&#34;</span> -<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;count=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">count</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">count</span><span style="color:#666">=</span><span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000;font-weight:bold">for</span> <span style="color:#666">((</span><span style="color:#19177c">i</span><span style="color:#666">=</span>1; i&lt;<span style="color:#666">=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">count</span><span style="color:#b68;font-weight:bold">}</span>; i++<span style="color:#666">))</span>; <span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># --xpath &#39;//version[$i]/text()&#39; 일 경우</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># &#34;XPath error : Undefined variable&#34; 오류가 발생합니다.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#008000;font-weight:bold">$(</span>curl -s <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">XML_URL</span><span style="color:#b68;font-weight:bold">}</span> | xmllint --xpath <span style="color:#ba2121">&#34;//version[</span><span style="color:#19177c">$i</span><span style="color:#ba2121">]/text()&#34;</span> -<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>1.0-SNAPSHOT
</span></span><span style="display:flex;"><span>2.0-SNAPSHOT
</span></span></code></pre></div><p>xmllint 는 libxml2 패키지에 포함되어 있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum provides xmllint
</span></span><span style="display:flex;"><span>마지막 메타자료 만료확인 17:42:56 이전인: 2022년 01월 11일 <span style="color:#666">(</span>화<span style="color:#666">)</span> 오후 04시 01분 22초.
</span></span><span style="display:flex;"><span>libxml2-2.9.7-9.el8_4.2.x86_64 : Library providing XML and HTML support
</span></span><span style="display:flex;"><span>리포지토리      : baseos
</span></span><span style="display:flex;"><span>일치하는 항목 :
</span></span><span style="display:flex;"><span>파일 이름 : /usr/bin/xmllint
</span></span></code></pre></div><br>
<h4 id="vim-vimrc">(vim) .vimrc</h4>
<p><code>vi ~/.vimrc</code> 로 아래 기본 설정을 등록합니다.</p>
<p>.vimrc 에는 # 주석이 오류를 일으키니 설정 시 제거해야 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ vi ~/.vimrc
</span></span><span style="display:flex;"><span>if has(&#34;syntax&#34;)
</span></span><span style="display:flex;"><span>  syntax on
</span></span><span style="display:flex;"><span>endif
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>set paste
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># / 검색 강조
</span></span><span style="display:flex;"><span>set hlsearch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 자동 들여쓰기
</span></span><span style="display:flex;"><span>set autoindent
</span></span><span style="display:flex;"><span>set cindent
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># tab 설정
</span></span><span style="display:flex;"><span>set ts=2
</span></span><span style="display:flex;"><span>set sts=2
</span></span><span style="display:flex;"><span>set shiftwidth=2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 커서 위 괄호 강조
</span></span><span style="display:flex;"><span>set showmatch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 줄번호와 행번호 표시
</span></span><span style="display:flex;"><span>set ruler
</span></span></code></pre></div><br>
<h4 id="self-signed-cert-git-bash-등록">(self-signed-cert) git-bash 등록</h4>
<p>git-bash 에서 curl 을 사용할 때 ssl 인증 문제가 발생할 경우입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ curl https://nexus/repository/maven-release/mgkim/service/service-www/maven-metadata.xml
</span></span><span style="display:flex;"><span>curl: (60) SSL certificate problem: self signed certificate
</span></span><span style="display:flex;"><span>More details here: https://curl.se/docs/sslcerts.html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl failed to verify the legitimacy of the server and therefore could not
</span></span><span style="display:flex;"><span>establish a secure connection to it. To learn more about this situation and
</span></span><span style="display:flex;"><span>how to fix it, please visit the web page mentioned above.
</span></span></code></pre></div><p>해당 사이트(<code>https://nexus/</code>)의 crt 파일을 저장하고 git-bash 에서 관리하는 ca-bundle.crt 의 끝부분에 내용을 추가합니다.</p>
<p>파일 경로: <code>C:\Program Files\Git\mingw64\ssl\certs\ca-bundle.crt</code></p>
<br>
<h4 id="self-signed-cert-java-등록">(self-signed-cert) java 등록</h4>
<p>로컬 설치된 java 에 인증서 파일(*.crt) 등록을 하기 위해서는 $JAVA_HOME/bin/keytool 를 사용해야 합니다.</p>
<p>ca 에 등록되지 않은 인증서로 https 통신을 하는 경우에는 ssl-handshake 과정에서 오류가 발생하므로</p>
<p>해당 사이트의 인증서를 로컬 java 에 신뢰할 수 있는 인증서에 등록해야 합니다.</p>
<p>아래는 <code>hello.crt</code> 라는 인증서를 등록하는 예시입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 인증서 등록</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># oracle java8 에서 cacerts 파일 위치</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># CACERTS=$JAVA_HOME/jre/lib/security/cacerts</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># temurin java11 에서 cacerts 파일 위치</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">CACERTS</span><span style="color:#666">=</span><span style="color:#19177c">$JAVA_HOME</span>/lib/security/cacerts
</span></span><span style="display:flex;"><span>$ keytool -importcert -keystore <span style="color:#19177c">$CACERTS</span> -file <span style="color:#ba2121">&#34;hello.crt&#34;</span> -alias <span style="color:#ba2121">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>키 저장소 비밀번호 입력: <span style="color:#666">(</span>changeit 입력<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>이 인증서를 신뢰합니까? <span style="color:#666">[</span>아니오<span style="color:#666">]</span>:  <span style="color:#666">(</span>y 입력<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>인증서가 키 저장소에 추가되었습니다.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 인증서 조회</span>
</span></span><span style="display:flex;"><span>$ keytool -list -keystore <span style="color:#19177c">$CACERTS</span> | grep <span style="color:#ba2121">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>키 저장소 비밀번호 입력: <span style="color:#666">(</span>changeit 입력<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>hello, 2020. 5. 8, trustedCertEntry,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 인증서 삭제</span>
</span></span><span style="display:flex;"><span>$ keytool -delete -alias <span style="color:#ba2121">&#34;hello&#34;</span> -keystore <span style="color:#19177c">$CACERTS</span>
</span></span></code></pre></div><p>nexus 를 https 로 서비스 중인 상태에서 java에 인증서를 등록하지 않았을 경우 아래와 같은 오류가 발생합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Transfer failed for http://nexus/repository/maven-snapshot/mgkim/service/service-www/2.0-SNAPSHOT/maven-metadata.xml: 
</span></span><span style="display:flex;"><span>PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target -&gt; [Help 1]
</span></span></code></pre></div><p>jenkins 에서 빌드 시 오류가 발생하여 java 에 인증서를 추가합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#19177c">CACERTS</span><span style="color:#666">=</span><span style="color:#19177c">$JAVA_HOME</span>/lib/security/cacerts
</span></span><span style="display:flex;"><span>$ keytool -importcert -keystore <span style="color:#19177c">$CACERTS</span> -file /z/nexus.crt -alias <span style="color:#ba2121">&#39;nexus&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">### `키 저장소 비밀번호` 에는 changeit 으로 입력해야 합니다. ###</span>
</span></span><span style="display:flex;"><span>$ keytool -importcert -keystore <span style="color:#19177c">$CACERTS</span> -file /etc/httpd/conf.d/certs/nexus.crt -alias <span style="color:#ba2121">&#39;nexus&#39;</span>
</span></span><span style="display:flex;"><span>경고: -cacerts 옵션을 사용하여 cacerts 키 저장소에 액세스하십시오.
</span></span><span style="display:flex;"><span>키 저장소 비밀번호 입력:  
</span></span><span style="display:flex;"><span>소유자: <span style="color:#19177c">CN</span><span style="color:#666">=</span>nexus, <span style="color:#19177c">OU</span><span style="color:#666">=</span>Dev Team, <span style="color:#19177c">O</span><span style="color:#666">=</span>SPACESOFT, <span style="color:#19177c">L</span><span style="color:#666">=</span>Seonyudo, <span style="color:#19177c">ST</span><span style="color:#666">=</span>Seoul, <span style="color:#19177c">C</span><span style="color:#666">=</span>KR
</span></span><span style="display:flex;"><span>발행자: <span style="color:#19177c">CN</span><span style="color:#666">=</span>nexus, <span style="color:#19177c">OU</span><span style="color:#666">=</span>Dev Team, <span style="color:#19177c">O</span><span style="color:#666">=</span>SPACESOFT, <span style="color:#19177c">L</span><span style="color:#666">=</span>Seonyudo, <span style="color:#19177c">ST</span><span style="color:#666">=</span>Seoul, <span style="color:#19177c">C</span><span style="color:#666">=</span>KR
</span></span><span style="display:flex;"><span>일련 번호: 7aa1637941794c08365e9f9a3c531189b87f0b5e
</span></span><span style="display:flex;"><span>적합한 시작 날짜: Mon Jan <span style="color:#666">10</span> 12:15:12 KST <span style="color:#666">2022</span> 종료 날짜: Wed Jan <span style="color:#666">10</span> 12:15:12 KST <span style="color:#666">2024</span>
</span></span><span style="display:flex;"><span>인증서 지문:
</span></span><span style="display:flex;"><span>   SHA1: D4:A6:92:2A:0C:97:1F:56:93:03:EC:8C:50:B3:27:5D:51:BD:30:63
</span></span><span style="display:flex;"><span>   SHA256: 62:BA:47:E9:3F:A6:A7:7D:78:99:87:E1:9B:E7:23:D5:B6:6B:2A:CC:5E:D9:BF:4A:DB:95:AD:67:47:70:86:96
</span></span><span style="display:flex;"><span>서명 알고리즘 이름: SHA256withRSA
</span></span><span style="display:flex;"><span>주체 공용 키 알고리즘: 2048비트 RSA 키
</span></span><span style="display:flex;"><span>버전: <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>확장: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#1: ObjectId: 2.5.29.37 Criticality=false</span>
</span></span><span style="display:flex;"><span>ExtendedKeyUsages <span style="color:#666">[</span>
</span></span><span style="display:flex;"><span>  serverAuth
</span></span><span style="display:flex;"><span><span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#2: ObjectId: 2.5.29.15 Criticality=true</span>
</span></span><span style="display:flex;"><span>KeyUsage <span style="color:#666">[</span>
</span></span><span style="display:flex;"><span>  DigitalSignature
</span></span><span style="display:flex;"><span>  Key_Agreement
</span></span><span style="display:flex;"><span><span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#3: ObjectId: 2.5.29.17 Criticality=false</span>
</span></span><span style="display:flex;"><span>SubjectAlternativeName <span style="color:#666">[</span>
</span></span><span style="display:flex;"><span>  DNSName: nexus
</span></span><span style="display:flex;"><span><span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>이 인증서를 신뢰합니까? <span style="color:#666">[</span>아니오<span style="color:#666">]</span>:  y
</span></span><span style="display:flex;"><span>인증서가 키 저장소에 추가되었습니다.
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div><br>
<h4 id="self-signed-cert-centos-등록">(self-signed-cert) centos 등록</h4>
<ul>
<li><code>/etc/pki/ca-trust/source/anchors/</code> 경로에 crt 파일을 복사</li>
<li><code>update-ca-trust extract</code> 실행으로 신뢰할 수 있는 인증서를 추가</li>
</ul>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ cp /etc/httpd/conf.d/certs/nexus.crt /etc/pki/ca-trust/source/anchors/
</span></span><span style="display:flex;"><span>$ update-ca-trust extract
</span></span></code></pre></div><br>
<p><code>update-ca-trust</code> 명령으로 등록이 안될 경우 직접 추가하는 방법입니다.</p>
<p><code>/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem</code> 파일에 crt 파일의 내용을 직접 추가합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ chmod u+w /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
</span></span><span style="display:flex;"><span>$ cat nexus.crt &gt;&gt; /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
</span></span><span style="display:flex;"><span>$ chmod u-w /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
</span></span></code></pre></div><br>
<h4 id="shell-script-파일-디렉토리">(shell) script 파일 디렉토리</h4>
<p><code>/project/script/build.sh</code> 파일이 실행될 때 현재 디렉토리<code>/project/script/</code>를 확인하는 방법입니다.</p>
<p>maven 프로젝트의 build.sh 파일이 pom.xml 과 같은 디렉토리가 아닐 경우 활용할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># build.sh 가 존재하는 디렉토리를 반환합니다.</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">DIR</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span> <span style="color:#008000">cd</span> <span style="color:#008000;font-weight:bold">$(</span> dirname <span style="color:#ba2121">&#34;</span><span style="color:#19177c">$0</span><span style="color:#ba2121">&#34;</span> <span style="color:#008000;font-weight:bold">)</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#008000">pwd</span> -P <span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">DIR</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>/home/user/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># build.sh 의 parent 디렉토리를 반환합니다.</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">DIR</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span> <span style="color:#008000">cd</span> <span style="color:#008000;font-weight:bold">$(</span> dirname <span style="color:#ba2121">&#34;</span><span style="color:#19177c">$0</span><span style="color:#ba2121">&#34;</span> <span style="color:#008000;font-weight:bold">)</span>/.. <span style="color:#666">&amp;&amp;</span> <span style="color:#008000">pwd</span> -P <span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">DIR</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>/home
</span></span></code></pre></div><br>
<h4 id="shell-process-및-port-체크">(shell) process 및 port 체크</h4>
<img src="/images/develop/20220110-shell-process-port-check.png" width="800">
<p><a href="/images/develop/20220110-shell-process-port-check.png" target="_blank">새 창 보기</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">APP_HOME</span><span style="color:#666">=</span>/app/WAS/pilot
</span></span><span style="display:flex;"><span><span style="color:#19177c">APP_NAME</span><span style="color:#666">=</span>service-www
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">LIST</span><span style="color:#666">=(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#34;dwww11&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#34;dwww12&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#34;swww11&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#34;swww12&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">for</span> APP_ID in <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LIST</span>[*]<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;--- </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> ---&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">PS_CMD</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;ps aux | grep -v grep | grep -v tail |  grep -v .sh | grep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">_PID</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span><span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> | awk &#39;{ print \$2}&#39;&#34;</span><span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> !<span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    netstat -ntplu | grep <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#19177c">SERVER_PORT</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span>netstat -tnplu | grep <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span> | awk <span style="color:#ba2121">&#39;{ if (match($4, /([0-9]*)$/, m)) print m[0] }&#39;</span><span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SERVER_PORT</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> !<span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>      <span style="color:#19177c">HTTP_CODE</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span>curl --write-out <span style="color:#ba2121">&#34;%{http_code}&#34;</span> --silent --output /dev/null <span style="color:#ba2121">&#34;http://localhost:</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SERVER_PORT</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">/&#34;</span><span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">HTTP_CODE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> <span style="color:#666">==</span> <span style="color:#ba2121">&#34;200&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is avaiable. (SERVER_PORT=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SERVER_PORT</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">)&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is not avaiable. (SERVER_PORT=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SERVER_PORT</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">)&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is not avaiable.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">APP_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is not running&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span></code></pre></div><h4 id="shell-find-newer-samefile">(shell) find newer samefile</h4>
<p>오래된 파일을 찾을 경우, 기준이되는 파일은 제외하는 예시입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 기준이 되는 파일을 생성 (e.g 1981년 07월 19일)</span>
</span></span><span style="display:flex;"><span>$ touch -t 198107190000.00 a.txt
</span></span><span style="display:flex;"><span>$ ls -al a.txt     <span style="color:#408080;font-style:italic"># alias ls=&#39;ls --time-style long-iso &#39; 일 경우 시각까지 표시됨</span>
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> root root <span style="color:#666">0</span> 1981-07-19 00:00 a.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 기준보다 오래된 파일 생성</span>
</span></span><span style="display:flex;"><span>$ touch -t <span style="color:#666">198101010000</span> old.txt
</span></span><span style="display:flex;"><span>$ ls -al old.txt 
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> root root <span style="color:#666">0</span> 1981-01-01 00:00 old.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># find 검색 (a.txt 파일보다 오래된 파일을 찾음)</span>
</span></span><span style="display:flex;"><span>$ find . -maxdepth <span style="color:#666">1</span> -type f ! -newer a.txt -name <span style="color:#ba2121">&#39;*.txt&#39;</span>
</span></span><span style="display:flex;"><span>./a.txt
</span></span><span style="display:flex;"><span>./old.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># find 검색 (기준이 되는 파일을 제외하고 찾음)</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># -samefile 혹은 -name 해도됨</span>
</span></span><span style="display:flex;"><span>$ find . -maxdepth <span style="color:#666">1</span> -type f ! -newer a.txt -name <span style="color:#ba2121">&#39;*.txt&#39;</span> ! -samefile a.txt
</span></span><span style="display:flex;"><span>./old.txt
</span></span></code></pre></div><br>
<h4 id="shell-curl">(shell) curl</h4>
<p>curl 로 http_code 를 받아오는 예시 입니다.</p>
<p>이 예시는 was 가 정상 기동되었는지 확인하는데 활용할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl --write-out <span style="color:#ba2121">&#34;%{http_code}&#34;</span> --silent --output /dev/null <span style="color:#ba2121">&#34;http://localhost:7100/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">200</span> <span style="color:#408080;font-style:italic"># 서버가 기동되지 않은 상태이면 즉시 응답이 오며, http_code 는 000 가 반환됩니다.</span>
</span></span></code></pre></div><br>
<h4 id="shell-파일명-문자열">(shell) 파일명 문자열</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 파일명에서 확장자 분리</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">FILE_NAME</span><span style="color:#666">=</span>service-www-2.0-SNAPSHOT.jar
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">FILE_NAME</span>%.*<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>service-www-2.0-SNAPSHOT
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">FILE_NAME</span>##*.<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>jar
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 파일경로에서 파일명</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#19177c">FILE_PATH</span><span style="color:#666">=</span>/app/WAS/pilot/service-www-2.0-SNAPSHOT.jar
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">FILE_PATH</span>##*/<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>service-www-2.0-SNAPSHOT.jar
</span></span></code></pre></div><br>
<h4 id="shell-while-문">(shell) while 문</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">PS_CMD</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;ps -ef | grep -v grep | egrep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">.*\\.jar | awk &#39;{ print \$2 }&#39;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">_PID</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span><span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># kill -15 실행</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">kill</span> -15 <span style="color:#19177c">$_PID</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 프로세스가 종료되었는지 while 문에서 확인</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">while</span> <span style="color:#666">[</span> <span style="color:#19177c">$i</span> -lt <span style="color:#666">600</span> <span style="color:#666">]</span>;
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">_CHECK_PID</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span><span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_CHECK_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> <span style="color:#666">==</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">(pid:&#39;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#39;) killed&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">break</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">i</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$((</span> <span style="color:#19177c">$i</span> <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#008000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span></code></pre></div><br>
<h4 id="shell-for-문">(shell) for 문</h4>
<p>배열을 생성하고 for 문으로 출력하는 예시 입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">SVR_LIST</span><span style="color:#666">=(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#39;172.28.200.20&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ba2121">&#39;172.28.200.30&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">)</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;SVR_LIST=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SVR_LIST</span>[*]<span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">total</span><span style="color:#666">=</span><span style="color:#b68;font-weight:bold">${#</span><span style="color:#19177c">SVR_LIST</span>[*]<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">idx</span><span style="color:#666">=</span><span style="color:#666">0</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">for</span> SVR in <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SVR_LIST</span>[*]<span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">idx</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$((</span> <span style="color:#19177c">$idx</span> <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#008000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;[</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">idx</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">total</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">]SVR=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">SVR</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span></code></pre></div><br>
<h4 id="shell-case-문">(shell) case 문</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">case</span> <span style="color:#19177c">$var</span> in
</span></span><span style="display:flex;"><span>  a*<span style="color:#666">)</span> <span style="color:#408080;font-style:italic"># a로 시작하는 문자열일 경우</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>  a?<span style="color:#666">)</span> <span style="color:#408080;font-style:italic"># a뒤에 1개의 문자가 올 경우</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span>  a<span style="color:#666">[</span>bc<span style="color:#666">])</span> <span style="color:#408080;font-style:italic"># ab 혹은 ac 일 경우</span>
</span></span><span style="display:flex;"><span>    ;;
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">esac</span>
</span></span></code></pre></div><br>
<h4 id="tomcat-startstop">(tomcat) start/stop</h4>
<p>jamwiki 라는 webapp 을 서비스하는 tomcat 설정 기본입니다.</p>
<p>아래 sh 파일을 포함하여 tomcat 설정에 필요한 파일들만 tgz 로 압축했습니다.</p>
<p><a href="/files/develop/20220105-jamwiki.zip" target="_blank">다운로드</a></p>
<p><code>start.sh</code> 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">PROD_HOME</span><span style="color:#666">=</span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">DATA_HOME</span><span style="color:#666">=</span>/data/PROD/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">LOG_HOME</span><span style="color:#666">=</span>/outlog/PROD/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">EXE_USER</span><span style="color:#666">=</span>tomcat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">PS_CMD</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;ps -ef | grep -v grep | grep -v &#39;.sh&#39; | grep -v rotatelogs | grep -v tail | grep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">CATALINA_BASE</span><span style="color:#666">=</span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/config
</span></span><span style="display:flex;"><span><span style="color:#19177c">CATALINA_OUT</span><span style="color:#666">=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LOG_HOME</span><span style="color:#b68;font-weight:bold">}</span>/catalina.out
</span></span><span style="display:flex;"><span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Xms256m -Xmx256m&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Djava.net.preferIPv4Stack=true&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> CATALINA_BASE
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> CATALINA_OUT
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> JAVA_OPTS
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> ! -e <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LOG_HOME</span><span style="color:#b68;font-weight:bold">}</span>/backup <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  su <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">EXE_USER</span><span style="color:#b68;font-weight:bold">}</span> -c <span style="color:#ba2121">&#39;mkdir -p ${LOG_HOME}/backup&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> -e <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LOG_HOME</span><span style="color:#b68;font-weight:bold">}</span>/catalina.out <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  mv <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LOG_HOME</span><span style="color:#b68;font-weight:bold">}</span>/catalina.out <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">LOG_HOME</span><span style="color:#b68;font-weight:bold">}</span>/backup/catalina.out_<span style="color:#ba2121">`</span>date +<span style="color:#ba2121">&#39;%Y%m%d_%H%M%S&#39;</span><span style="color:#ba2121">`</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">_PID</span><span style="color:#666">=</span><span style="color:#ba2121">`</span><span style="color:#008000">eval</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span> | awk <span style="color:#ba2121">&#39;{ print $2 }&#39;</span><span style="color:#ba2121">`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> !<span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is already running. pid: </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PROD_HOME</span><span style="color:#b68;font-weight:bold">}</span>/stop-<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>.sh
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sleep <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">EXE_USER</span><span style="color:#b68;font-weight:bold">}</span> !<span style="color:#666">=</span> <span style="color:#ba2121">`</span>whoami<span style="color:#ba2121">`</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  su <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">EXE_USER</span><span style="color:#b68;font-weight:bold">}</span> -c <span style="color:#ba2121">&#39;/prod/${INST_ID}/tomcat/bin/startup.sh&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>  /prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/tomcat/bin/startup.sh
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">_PID</span><span style="color:#666">=</span><span style="color:#ba2121">`</span><span style="color:#008000">eval</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span> | awk <span style="color:#ba2121">&#39;{ print $2 }&#39;</span><span style="color:#ba2121">`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> !<span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is starting. pid: </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;ps -ef | grep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;netstat -ntplu | grep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is not started&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<p><code>start-jamwiki.sh</code> 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">JAVA_HOME</span><span style="color:#666">=</span>/prod/java/jdk1.8.0_202
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">PATH</span><span style="color:#666">=</span><span style="color:#19177c">$JAVA_HOME</span>/bin:<span style="color:#19177c">$PATH</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">INST_ID</span><span style="color:#666">=</span>jamwiki
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/bin/start.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<p><code>stop.sh</code> 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">PROD_HOME</span><span style="color:#666">=</span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">DATA_HOME</span><span style="color:#666">=</span>/data/PROD/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">LOG_HOME</span><span style="color:#666">=</span>/outlog/PROD/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">EXE_USER</span><span style="color:#666">=</span>tomcat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">PS_CMD</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;ps -ef | grep -v grep | grep -v &#39;.sh&#39; | grep -v rotatelogs | grep -v tail | grep </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">CATALINA_BASE</span><span style="color:#666">=</span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/config
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> CATALINA_BASE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">_PID</span><span style="color:#666">=</span><span style="color:#ba2121">`</span><span style="color:#008000">eval</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PS_CMD</span><span style="color:#b68;font-weight:bold">}</span> | awk <span style="color:#ba2121">&#39;{ print $2 }&#39;</span><span style="color:#ba2121">`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> <span style="color:#666">==</span> <span style="color:#ba2121">&#34;&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is not running&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sleep <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">EXE_USER</span><span style="color:#b68;font-weight:bold">}</span> !<span style="color:#666">=</span> <span style="color:#ba2121">`</span>whoami<span style="color:#ba2121">`</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  su <span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">EXE_USER</span><span style="color:#b68;font-weight:bold">}</span> -c <span style="color:#ba2121">&#39;/prod/${INST_ID}/tomcat/bin/shutdown.sh&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>  /prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/tomcat/bin/shutdown.sh
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> is stopped. pid: </span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">_PID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<p><code>stop-jamwiki.sh</code> 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">INST_ID</span><span style="color:#666">=</span>jamwiki
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/prod/<span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">INST_ID</span><span style="color:#b68;font-weight:bold">}</span>/bin/stop.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<p><code>status-jamwiki.sh</code> 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#bc7a00">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#bc7a00"></span>
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;---------------- jamwiki ----------------&#34;</span>
</span></span><span style="display:flex;"><span>ps -ef | grep -v grep | grep -v <span style="color:#ba2121">&#39;.sh&#39;</span> | grep -v rotatelogs | grep -v tail | grep jamwiki
</span></span><span style="display:flex;"><span><span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<h4 id="cockpit">(cockpit)</h4>
<p>cockpit 은 centos 의 web console 을 제공하는 패키지 입니다.</p>
<p>설치</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ dnf install cockpit
</span></span><span style="display:flex;"><span>$ systemctl enable --now cockpit.socket
</span></span><span style="display:flex;"><span>$ netstat -ntplu | grep 9090
</span></span></code></pre></div><p>cockpit 에 ssl 인증서 교체하기</p>
<p>참고: <a href="/files/develop/create-cert.sh" target="_blank">create-cert.sh</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># create-cert.sh 로 인증서를 생성합니다.
</span></span><span style="display:flex;"><span># 인자는 web console 에 접근할 도메인으로 생성하면 됩니다.
</span></span><span style="display:flex;"><span># 예시는 centos8 이라는 도메인으로 생성합니다.
</span></span><span style="display:flex;"><span>$ ./create-cert.sh centos8
</span></span><span style="display:flex;"><span>$ ls -al 
</span></span><span style="display:flex;"><span>-rw-r--r--  1 root root 1310  1월  2 14:58 centos8.crt
</span></span><span style="display:flex;"><span>-rw-------  1 root root 1708  1월  2 14:58 centos8.key
</span></span><span style="display:flex;"><span>$ cd /etc/cockpit/ws-certs.d
</span></span><span style="display:flex;"><span>$ ls -al
</span></span><span style="display:flex;"><span>-rw-r--r--  1 root root       2094  1월  2 00:46 0-self-signed-ca.pem
</span></span><span style="display:flex;"><span>-rw-r--r--  1 root root       1684  1월  2 00:46 0-self-signed.cert
</span></span><span style="display:flex;"><span>-rw-r-----  1 root cockpit-ws 1704  1월  2 00:46 0-self-signed.key
</span></span><span style="display:flex;"><span>$ cp centos8.crt centos8.key /etc/cockpit/ws-certs.d
</span></span><span style="display:flex;"><span>$ chmod 640 centos8.key
</span></span><span style="display:flex;"><span>$ chown root:cockpit-ws centos8.key
</span></span><span style="display:flex;"><span>$ chmod 644 centos8.crt
</span></span><span style="display:flex;"><span>$ remotectl certificate centos8.crt centos8.key
</span></span><span style="display:flex;"><span>generated combined certificate file: /etc/cockpit/ws-certs.d/centos8.cert
</span></span><span style="display:flex;"><span>$ remotectl certificate
</span></span><span style="display:flex;"><span>certificate: /etc/cockpit/ws-certs.d/centos8.crt
</span></span><span style="display:flex;"><span>$ systemctl restart cockpit
</span></span></code></pre></div><br>
<p>centos8 인증서 등록하기</p>
<p><code>https://centos8:9090/</code> 링크로 이동하면 신뢰할 수 없는 사이트라고 표시됩니다.</p>
<p>인증서를 내보내기 한 다음 아래 절차대로 인증서를 등록합니다.</p>
<ul>
<li>chrome 에서 <code>chrome://settings/security?q=enhanced</code> 링크로 이동합니다.</li>
<li><code>인증서 관리</code> 메뉴를 클릭하면 팝업이 열립니다.</li>
<li><code>신뢰할 수 있는 루트 인증 기관</code> 탭에서 가져오기를 클릭 합니다.</li>
<li>내보내기 한 인증서를 선택하고 가져오기를 합니다.</li>
<li>chrome 에서 <code>chrome://net-internals/#hsts</code> 링크로 이동합니다.</li>
<li><code>Delete domain security policies</code> 에서 <code>centos8</code> 을 입력하고 <code>Delete</code> 버튼을 클릭합니다.</li>
<li>chrome 에서 <code>chrome://restart</code> 링크 이동으로 chrome 을 재시작합니다.</li>
<li>chrome 에서 <code>https://centos8:9090/</code> 링크로 이동하여 정상 작동하는지를 확인합니다.</li>
</ul>
<p>정상 예시</p>
<p><a href="/images/develop/20220102-centos-web_console-cockpit.png" target="_blank">새 창 보기</a></p>
<br>
<p>listen-port 변경하기</p>
<p><code>/etc/systemd/system/sockets.target.wants/cockpit.socket</code> 파일을 아래와 같이 편집합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[Unit]
</span></span><span style="display:flex;"><span>Description=Cockpit Web Service Socket
</span></span><span style="display:flex;"><span>Documentation=man:cockpit-ws(8)
</span></span><span style="display:flex;"><span>Wants=cockpit-motd.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Socket]
</span></span><span style="display:flex;"><span>#ListenStream=9090 # 기본값
</span></span><span style="display:flex;"><span>ListenStream=127.0.0.1:8000  # 변경값 (httpd 에서 proxy 로 접근)
</span></span><span style="display:flex;"><span>ExecStartPost=-/usr/share/cockpit/motd/update-motd &#39;&#39; localhost
</span></span><span style="display:flex;"><span>ExecStartPost=-/bin/ln -snf active.motd /run/cockpit/motd
</span></span><span style="display:flex;"><span>ExecStopPost=-/bin/ln -snf inactive.motd /run/cockpit/motd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Install]
</span></span><span style="display:flex;"><span>WantedBy=sockets.target
</span></span></code></pre></div><p>redhat 공식문서에서는 <code>/etc/systemd/system/cockpit.socket.d/listen.conf</code> 파일을 <code>생성</code>하고 daemon-reload 를 하라고 되어있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[Socket]
</span></span><span style="display:flex;"><span>ListenStream=
</span></span><span style="display:flex;"><span>ListenStream=127.0.0.1:8000
</span></span><span style="display:flex;"><span>FreeBind=yes
</span></span></code></pre></div><p><a href="https://www.freedesktop.org/software/systemd/man/systemd.socket.html#ListenStream=" target="_blank"><a href="https://www.freedesktop.org">www.freedesktop.org</a></a>에서는 아래와 같이 <code>FreeBind=yes</code> 를 권장한다고 되어있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>If an IP address is used here, it is often desirable to listen on it before the interface it is configured on is up and running, and even regardless of whether it will be up and running at any point. To deal with this, it is recommended to set the FreeBind= option described below.
</span></span></code></pre></div><p>편집 후 아래 명령어를 실행합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ systemctl daemon-reload cockpit.socket
</span></span><span style="display:flex;"><span>$ systemctl restart cockpit.socket
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 변경 상태를 확인합니다.</span>
</span></span><span style="display:flex;"><span>$ netstat -ntplu | grep <span style="color:#666">8000</span>
</span></span></code></pre></div><h4 id="mosh">(mosh)</h4>
<p>설치</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum install mosh
</span></span></code></pre></div><p>상태</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># 접속 후 netstat 상태 보기
</span></span><span style="display:flex;"><span>$ mosh root@172.28.200.30
</span></span><span style="display:flex;"><span>$ netstat -ntplu | grep 3253
</span></span><span style="display:flex;"><span>udp        0      0 172.28.200.30:60001     0.0.0.0:*                           3253/mosh-server    
</span></span><span style="display:flex;"><span>$ netstat -ntplu | grep 3217
</span></span><span style="display:flex;"><span>udp        0      0 0.0.0.0:19001           0.0.0.0:*                           3217/mosh-client    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 접속 옵션
</span></span><span style="display:flex;"><span>$ mosh -ssh=&#39;ssh -vvv&#39; root@172.28.200.30
</span></span></code></pre></div><p>chrome 확장 프로그램 <code>Secure Shell</code></p>
<p><a href="https://chrome.google.com/webstore/detail/secure-shell/iodihamcpbpeioajjeobimgagajmlibd/related?hl=ko" target="_blank">링크</a></p>
<br>
<h4 id="xmlstarlet">(xmlstarlet)</h4>
<p>설치</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ dnf install epel-release
</span></span><span style="display:flex;"><span>$ yum install xmlstarlet
</span></span></code></pre></div><p>사용법</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>xmlstarlet sel -N <span style="color:#19177c">x</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> -t -v <span style="color:#ba2121">&#34;x:project/x:version&#34;</span> ./pom.xml
</span></span></code></pre></div><br>
<h4 id="oracle-12c-설치">(oracle) 12c 설치</h4>
<p>oracle 12c ee 버전 설치</p>
<p>pluggable database 설정, MAX_STRING_SIZE 설정, character-set 설정, oracle 계정 설정</p>
<p><a href="/system/oracle12c" target="_blank">새 창 보기</a></p>
<br>
<h4 id="yum-설치된-목록-확인">(yum) 설치된 목록 확인</h4>
<p><code>yum list installed</code></p>
<br>
<h4 id="firewall-disabled">(firewall) disabled</h4>
<p>추가된 목록: /etc/firewalld/zones/public.xml</p>
<p>서비스명: <code>firewalld</code></p>
<br>
<h4 id="selinux-disabled">(selinux) disabled</h4>
<p>파일: /etc/selinux/config</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">SELINUX</span><span style="color:#666">=</span>disabled
</span></span></code></pre></div><p>적용: <code>shutdown -r now</code></p>
<br>
<h4 id="network-ip-설정">(network) ip 설정</h4>
<p>파일: /etc/sysconfig/network-scripts/ifcfg-ens33</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">BOOTPROTO</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;none&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">IPV6INIT</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;no&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">IPADDR</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;172.28.200.30&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">PREFIX</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;24&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">GATEWAY</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;172.28.200.2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">DNS1</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;8.8.8.8&#34;</span>
</span></span></code></pre></div><p>적용: <code>systemctl restart NetworkManager</code></p>
<br>
<h4 id="openssl-key-생성-cmd">(openssl) key 생성 cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 암호화하지 않은 개인키</span>
</span></span><span style="display:flex;"><span>$ openssl genrsa -out private_key.pem <span style="color:#666">2048</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 3des로 암호화된 개인키 생성</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># passphrase를 입력이 필요합니다.</span>
</span></span><span style="display:flex;"><span>$ openssl genrsa -des3 -out enc_private_key.pem <span style="color:#666">2048</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 기존 개인키에 패스워드 추가</span>
</span></span><span style="display:flex;"><span>$ openssl rsa -des3 -in private_key.pem -out enc_private_key.pem
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 기존 개인키에 패스워드 제거</span>
</span></span><span style="display:flex;"><span>$ openssl rsa -in enc_private_key.pem -out private_key.pem
</span></span></code></pre></div><br>
<h4 id="sed-문자열-치환">(sed) 문자열 치환</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sed -i -e <span style="color:#ba2121">&#39;s/hello/world/g&#39;</span> test.txt
</span></span></code></pre></div><br>
<h4 id="tar-분할-압축">(tar) 분할 압축</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># split</span>
</span></span><span style="display:flex;"><span>$ tar cvfz - target | split -b 3072m - target.tgz
</span></span><span style="display:flex;"><span>$ cat target.tgz.* | tar zxvf -
</span></span></code></pre></div><br>
<h4 id="tar-exclude-설정">(tar) exclude 설정</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># exclude</span>
</span></span><span style="display:flex;"><span>$ cat .tarexclude
</span></span><span style="display:flex;"><span>build.*
</span></span><span style="display:flex;"><span>run.*
</span></span><span style="display:flex;"><span>bin
</span></span><span style="display:flex;"><span>.svn/*
</span></span><span style="display:flex;"><span>.git/*
</span></span><span style="display:flex;"><span>.project
</span></span><span style="display:flex;"><span>.tarexclude
</span></span><span style="display:flex;"><span>backup.sh
</span></span><span style="display:flex;"><span>$ tar cvfz ../target.tgz * -X .tarexclude
</span></span></code></pre></div><br>
<h4 id="httpd-설정">(httpd) 설정</h4>
<p>httpd.conf, vhost 설정, ssl 적용에 대한 예시</p>
<p><a href="/system/httpd" target="_blank">새 창 보기</a></p>
<br>
<h4 id="jenkins-설정">(jenkins) 설정</h4>
<p>플러그인 <code>Publish Over SSH</code>, <code>GitLab Plugin</code>, <code>GitHub Integration Plugin</code>에 대한 사용법</p>
<p><a href="/system/jenkins" target="_blank">새 창 보기</a></p>
<br>
<h4 id="git-bash-zsh">(git-bash) zsh</h4>
<p>zsh-{버전}-x86_64.pkg.tar.zst 링크를 아래 사이트에서 다운로드 합니다.</p>
<p><a href="https://packages.msys2.org/package/zsh?repo=msys&variant=x86_64" target="_blank">링크</a></p>
<p>zstandard(<code>zstd</code>)가 설치되어 있어야 압축해제가 가능하여 zip 으로 압축된 버전은 아래 링크로 대체합니다.</p>
<p><a href="/files/develop/zsh-5.8-5-x86_64.zip" download="zsh-5.8-5-x86_64.zip">zsh-5.8-5-x86_64.zip</a></p>
<p>git-bash 설치 경로 <code>C:\Program Files\Git</code> 에서 압축을 해제합니다. (<code>usr</code>, <code>etc</code> 디렉토리에 덮어쓰기)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ sh -c &#34;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&#34;
</span></span><span style="display:flex;"><span>$ cat &lt;&lt; EOF &gt; ~/.bashrc
</span></span><span style="display:flex;"><span>exec zsh
</span></span><span style="display:flex;"><span>EOF
</span></span><span style="display:flex;"><span>$ vi ~/.oh-my-zsh/themes/agnoster.zsh-theme
</span></span><span style="display:flex;"><span>prompt_newline() {
</span></span><span style="display:flex;"><span>  if [[ -n $CURRENT_BG ]]; then
</span></span><span style="display:flex;"><span>    echo -n &#34;%{%k%F{$CURRENT_BG}%}$SEGMENT_SEPARATOR
</span></span><span style="display:flex;"><span>%{%k%F{blue}%}$SEGMENT_SEPARATOR&#34;
</span></span><span style="display:flex;"><span>  else
</span></span><span style="display:flex;"><span>    echo -n &#34;%{%k%}&#34;
</span></span><span style="display:flex;"><span>  fi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  echo -n &#34;%{%f%}&#34;
</span></span><span style="display:flex;"><span>  CURRENT_BG=&#39;&#39;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>build_prompt() {
</span></span><span style="display:flex;"><span>  RETVAL=$?
</span></span><span style="display:flex;"><span>  prompt_status
</span></span><span style="display:flex;"><span>  prompt_virtualenv
</span></span><span style="display:flex;"><span>  prompt_context
</span></span><span style="display:flex;"><span>  prompt_dir
</span></span><span style="display:flex;"><span>  prompt_git
</span></span><span style="display:flex;"><span>  prompt_hg
</span></span><span style="display:flex;"><span>  prompt_newline
</span></span><span style="display:flex;"><span>  prompt_end
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>$ vi ~/.zshrc
</span></span><span style="display:flex;"><span>ZSH_THEME=&#34;agnoster&#34;
</span></span></code></pre></div><p><code>git-bash</code> &gt; <code>Options</code> &gt; <code>Looks</code> &gt; <code>Theme</code> 에서 <code>rosipov</code> 선택합니다.</p>
<br>
<h4 id="windows-xcopy">(windows) xcopy</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&gt; xcopy /?
</span></span><span style="display:flex;"><span>Copies files and directory trees.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  /D:m-d-y     Copies files changed on or after the specified date.
</span></span><span style="display:flex;"><span>               If no date is given, copies only those files whose
</span></span><span style="display:flex;"><span>               source time is newer than the destination time.
</span></span><span style="display:flex;"><span>  /S           Copies directories and subdirectories except empty ones.
</span></span><span style="display:flex;"><span>  /E           Copies directories and subdirectories, including empty ones.
</span></span><span style="display:flex;"><span>               Same as /S /E. May be used to modify /T.
</span></span><span style="display:flex;"><span>  /V           Verifies the size of each new file.
</span></span><span style="display:flex;"><span>  /C           Continues copying even if errors occur.
</span></span><span style="display:flex;"><span>  /I           If destination does not exist and copying more than one file,
</span></span><span style="display:flex;"><span>               assumes that destination must be a directory.
</span></span><span style="display:flex;"><span>  /Y           Suppresses prompting to confirm you want to overwrite an
</span></span><span style="display:flex;"><span>               existing destination file.
</span></span><span style="display:flex;"><span>  /J           Copies using unbuffered I/O. Recommended for very large files.
</span></span></code></pre></div><p><code>xcopy E:\유틸리티\*.* D:\유틸리티 /d/i/s/c/y</code></p>
<br>
<h4 id="jasypt-encrypt">(jasypt) encrypt</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">public</span> <span style="color:#008000;font-weight:bold">static</span> <span style="color:#b00040">void</span> <span style="color:#00f">main</span><span style="color:#666">(</span>String<span style="color:#666">[]</span> args<span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    PooledPBEStringEncryptor encryptor <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">new</span> PooledPBEStringEncryptor<span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>    SimpleStringPBEConfig config <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">new</span> SimpleStringPBEConfig<span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>    String secretkey <span style="color:#666">=</span> <span style="color:#ba2121">&#34;password&#34;</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    config<span style="color:#666">.</span><span style="color:#7d9029">setPassword</span><span style="color:#666">(</span>secretkey<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    config<span style="color:#666">.</span><span style="color:#7d9029">setAlgorithm</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;PBEWithHMACSHA512AndAES_256&#34;</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    config<span style="color:#666">.</span><span style="color:#7d9029">setPoolSize</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;2&#34;</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    config<span style="color:#666">.</span><span style="color:#7d9029">setStringOutputType</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;base64&#34;</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    config<span style="color:#666">.</span><span style="color:#7d9029">setIvGenerator</span><span style="color:#666">(</span><span style="color:#008000;font-weight:bold">new</span> RandomIvGenerator<span style="color:#666">());</span>
</span></span><span style="display:flex;"><span>    encryptor<span style="color:#666">.</span><span style="color:#7d9029">setConfig</span><span style="color:#666">(</span>config<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    String <span style="">암호문</span> <span style="color:#666">=</span> encryptor<span style="color:#666">.</span><span style="color:#7d9029">encrypt</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;asdf&#34;</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#666">.</span><span style="color:#7d9029">out</span><span style="color:#666">.</span><span style="color:#7d9029">println</span><span style="color:#666">(</span><span style="">암호문</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    String <span style="">평문</span> <span style="color:#666">=</span> encryptor<span style="color:#666">.</span><span style="color:#7d9029">decrypt</span><span style="color:#666">(</span><span style="">암호문</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#666">.</span><span style="color:#7d9029">out</span><span style="color:#666">.</span><span style="color:#7d9029">println</span><span style="color:#666">(</span><span style="">평문</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#666">}</span>
</span></span></code></pre></div><br>
<h4 id="git-bash-jq">(git-bash) jq</h4>
<p>jq: <a href="https://stedolan.github.io/jq/download/" target="_blank">새 창 보기</a></p>
<p>jq: <a href="/files/develop/jq" download="jq">다운로드</a></p>
<p>다운로드 후 <code>C:\Program Files\Git\mingw64\bin</code> 에 <code>복사 &amp; 붙여넣기</code></p>
<br>
<h4 id="java-keytool-인증서-생성">(java) keytool 인증서 생성</h4>
<p>java 에 포함되어 있는 <code>keytool</code> 명령으로 아래 절차로 인증서를 생성합니다.</p>
<p>생성된 인증서는 spring-boot 어플리케이션 설정파일인 <code>application.yaml</code> 주요 설정값을 암복호화를 할 때 사용하려 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># keytool 경로 확인</span>
</span></span><span style="display:flex;"><span>$ which keytool
</span></span><span style="display:flex;"><span>/z/develop/java/openjdk-11.0.13.8-temurin/bin/keytool
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># private-key 파일 생성 (mgkim-pc.jks)</span>
</span></span><span style="display:flex;"><span>$ keytool -genkeypair -alias mgkim-pc -keyalg RSA -dname <span style="color:#ba2121">&#34;CN=mgkim, OU=API Development, O=mgkim.net, L=Seoul, C=KR&#34;</span> -keypass <span style="color:#ba2121">&#34;votmdnjem&#34;</span> -keystore mgkim-pc.jks -storepass <span style="color:#ba2121">&#34;votmdnjem&#34;</span>
</span></span><span style="display:flex;"><span>$ ls -al mgkim-pc.*
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">2733</span> 2022-01-27 21:56 mgkim-pc.jks
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 인증서 파일 생성 (mgkim-pc.cer)</span>
</span></span><span style="display:flex;"><span>$ keytool -export -alias mgkim-pc -keystore mgkim-pc.jks -rfc -file mgkim-pc.cer
</span></span><span style="display:flex;"><span>키 저장소 비밀번호 입력:  votmdnjem
</span></span><span style="display:flex;"><span>인증서가 &lt;mgkim-pc.cer&gt; 파일에 저장되었습니다.
</span></span><span style="display:flex;"><span>$ ls -al mgkim-pc.*
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">1236</span> 2022-01-27 21:58 mgkim-pc.cer
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">2733</span> 2022-01-27 21:56 mgkim-pc.jks
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># public-key 파일 생성 (mgkim-pc.jks.pub)</span>
</span></span><span style="display:flex;"><span>$ keytool -import -alias mgkim-pc -file mgkim-pc.cer -keystore mgkim-pc.jks.pub
</span></span><span style="display:flex;"><span>키 저장소 비밀번호 입력:  votmdnjem
</span></span><span style="display:flex;"><span>새 비밀번호 다시 입력: votmdnjem
</span></span><span style="display:flex;"><span>소유자: <span style="color:#19177c">CN</span><span style="color:#666">=</span>mgkim, <span style="color:#19177c">OU</span><span style="color:#666">=</span>API Development, <span style="color:#19177c">O</span><span style="color:#666">=</span>mgkim.net, <span style="color:#19177c">L</span><span style="color:#666">=</span>Seoul, <span style="color:#19177c">C</span><span style="color:#666">=</span>KR
</span></span><span style="display:flex;"><span>발행자: <span style="color:#19177c">CN</span><span style="color:#666">=</span>mgkim, <span style="color:#19177c">OU</span><span style="color:#666">=</span>API Development, <span style="color:#19177c">O</span><span style="color:#666">=</span>mgkim.net, <span style="color:#19177c">L</span><span style="color:#666">=</span>Seoul, <span style="color:#19177c">C</span><span style="color:#666">=</span>KR
</span></span><span style="display:flex;"><span>일련 번호: 59e8ce89
</span></span><span style="display:flex;"><span>적합한 시작 날짜: Thu Jan <span style="color:#666">27</span> 21:56:38 KST <span style="color:#666">2022</span> 종료 날짜: Wed Apr <span style="color:#666">27</span> 21:56:38 KST <span style="color:#666">2022</span>
</span></span><span style="display:flex;"><span>인증서 지문:
</span></span><span style="display:flex;"><span>         SHA1: 1D:5F:AF:4A:BE:13:E8:2C:3A:17:3D:DF:D4:0B:32:31:8C:FA:F2:88
</span></span><span style="display:flex;"><span>         SHA256: CC:89:1A:2A:E0:2E:6D:E5:82:12:57:B7:95:30:C8:09:F5:4D:46:13:C1:06:D1:3B:FB:A1:68:72:24:5E:18:A3
</span></span><span style="display:flex;"><span>서명 알고리즘 이름: SHA256withRSA
</span></span><span style="display:flex;"><span>주체 공용 키 알고리즘: 2048비트 RSA 키
</span></span><span style="display:flex;"><span>버전: <span style="color:#666">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>확장:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#1: ObjectId: 2.5.29.14 Criticality=false</span>
</span></span><span style="display:flex;"><span>SubjectKeyIdentifier <span style="color:#666">[</span>
</span></span><span style="display:flex;"><span>KeyIdentifier <span style="color:#666">[</span>
</span></span><span style="display:flex;"><span>0000: <span style="color:#666">89</span> <span style="color:#666">34</span> C5 D9 <span style="color:#666">38</span> <span style="color:#666">29</span> <span style="color:#666">88</span> <span style="color:#666">26</span>   <span style="color:#666">43</span> 6B DF B8 <span style="color:#666">34</span> E7 AE <span style="color:#666">74</span>  .4..8<span style="color:#666">)</span>.&amp;Ck..4..t
</span></span><span style="display:flex;"><span>0010: FD <span style="color:#666">35</span> 0B 8F                                        .5..
</span></span><span style="display:flex;"><span><span style="color:#666">]</span>
</span></span><span style="display:flex;"><span><span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>이 인증서를 신뢰합니까? <span style="color:#666">[</span>아니오<span style="color:#666">]</span>:  y
</span></span><span style="display:flex;"><span>인증서가 키 저장소에 추가되었습니다.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ls -al mgkim-pc.*
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">1236</span> 2022-01-27 21:58 mgkim-pc.cer
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">2733</span> 2022-01-27 21:56 mgkim-pc.jks
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#666">1</span> Administrator <span style="color:#666">197121</span> <span style="color:#666">1239</span> 2022-01-27 22:00 mgkim-pc.jks.pub
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div><ul>
<li>mgkim-pc.jks: private-key 파일</li>
<li>mgkim-pc.cer: 인증서 파일</li>
<li>mgkim-pc.jks.pub: public-key 파일</li>
</ul>
<br>
<h4 id="docsy-code-highlighting-with-prism">(docsy) Code highlighting with Prism</h4>
<p>설정파일<code>config.toml</code>의 <code>prism_syntax_highlighting = true</code> 항목을 추가하면 prismjs.com 에서 배포하는 js/css 로 theme 를 적용할 수 있습니다.</p>
<ul>
<li><code>config.toml</code>의 <code>prism_syntax_highlighting = true</code> 항목을 추가</li>
<li>prismjs.com 에서 스타일을 선택한 다음 <code>prism.js</code>, <code>prism.css</code> 파일 다운로드</li>
<li><code>prism.js</code>, <code>prism.css</code> 파일은 각 <code>/static/js/prism.js</code>, <code>/static/css/prism.css</code> 에 복사</li>
</ul>
<p>supported languages: <a href="/files/develop/20220128-prismjs_supported_languages.txt" target="_blank">새 창 보기</a></p>
<br>
<h4 id="maven-패스워드-암호화">(maven) 패스워드 암호화</h4>
<p><code>settings.xml</code>에는 nexus 저장소에 deploy 를 할 때 아래와 같이 nexus 의 계정정보를 포함하고 있어야 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;servers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus-release<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>패스워드<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus-snapshot<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>패스워드<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/servers&gt;</span>
</span></span></code></pre></div><p>패스워드를 암호화하여 설정하는 방법입니다. (<code>settings-security.xml</code> 파일은 로컬 저장소 .m2 디렉토리에 있어야 합니다.)</p>
<ul>
<li><code>mvn -emp 마스터패스워드</code>명령으로 master 패스워드 문자열을 생성하고, <code>~/.m2/settings-security.xml</code> 파일을 아래와 같이 생성하고 저장합니다.
<br>(참고로 <code>-emp</code> 는 <code>--encrypt-master-password</code> 입니다.)
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn -emp 마스터패스워드
</span></span><span style="display:flex;"><span><span style="color:#666">{</span>h/JmfOxXj2IH/whyc5/7wpvOT5AeBmlHV/nzmk7rzY+i7vEvpg46lHddfEwHFtN1<span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span>$ cat <span style="color:#ba2121">&lt;&lt; EOF &gt; ~/.m2/settings-security.xml
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">&lt;settingsSecurity&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">  &lt;master&gt;{h/JmfOxXj2IH/whyc5/7wpvOT5AeBmlHV/nzmk7rzY+i7vEvpg46lHddfEwHFtN1}&lt;/master&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">&lt;/settingsSecurity&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">EOF</span>
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div></li>
<li><code>mvn -ep 패스워드</code>명령으로 nexus 의 계정에 해당되는 패스워드 문자열을 생성하고 <code>$M2_HOME/conf/settings.xml</code>의 <code>&lt;password&gt;</code>에 추가합니다.
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn -ep 패스워드
</span></span><span style="display:flex;"><span><span style="color:#666">{</span><span style="color:#19177c">nvTOxUicu5EHTqNwVFkrSKjAQnANDMwZy6sCuPND00w</span><span style="color:#666">=}</span>
</span></span><span style="display:flex;"><span>$ vi <span style="color:#19177c">$M2_HOME</span>/conf/settings.xml
</span></span><span style="display:flex;"><span>&lt;server&gt;
</span></span><span style="display:flex;"><span>  &lt;id&gt;nexus-snapshot&lt;/id&gt;
</span></span><span style="display:flex;"><span>  &lt;username&gt;admin&lt;/username&gt;
</span></span><span style="display:flex;"><span>  &lt;password&gt;<span style="color:#666">{</span><span style="color:#19177c">nvTOxUicu5EHTqNwVFkrSKjAQnANDMwZy6sCuPND00w</span><span style="color:#666">=}</span>&lt;/password&gt;
</span></span><span style="display:flex;"><span>&lt;/server&gt;
</span></span></code></pre></div></li>
</ul>
<br>
<h4 id="windows-vbs-msgbox-사용하기">(windows) vbs MsgBox 사용하기</h4>
<p>vbs 내용을 별도 파일<code>MessageBox.vbs</code>로 저장하고, cmd 창에서 <code>cscript Z:/develop/script/MessageBox.vbs &quot;팝업 메시지&quot;</code> 형태로 사용할 수 있습니다.</p>
<p>(윈도우즈에서 백업 스크립트가 처리 완료되었음을 알릴 때 활용할 수 있습니다.)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Set objArgs = WScript.Arguments
</span></span><span style="display:flex;"><span>messageText = objArgs(0)
</span></span><span style="display:flex;"><span>MsgBox messageText
</span></span></code></pre></div><p>백업 스크립트 <a href="/files/develop/20220126-backup.sh" target="_blank">새 창 보기</a></p>
<br>
<h4 id="maven-deploy-release-관련-플러그인">(maven) deploy, release 관련 플러그인</h4>
<p>spring-boot 를 배포할 때 의존성 라이브러리를 포함하여 executable-jar 파일을 생성하는 <code>spring-boot:repackage</code> 플러그인을 추가했습니다.</p>
<p>maven 기존 플러그인 maven-deploy-plugin 를 <code>nexus-staging-maven-plugin</code> 로 교체했습니다.</p>
<p>release 버전의 아티팩트를 nexus 에 배포하고 버전을 올려주는 기능을 위해 <code>maven-release-plugin</code> 설정을 했습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>maven-deploy-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- nexus-staging-maven-plugin 로 인해 skip 설정을 해야 합니다. --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;skip&gt;</span>true<span style="color:#008000;font-weight:bold">&lt;/skip&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.sonatype.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;executions&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;execution&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#408080;font-style:italic">&lt;!-- default-deploy 에 추가합니다. --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>default-deploy<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;phase&gt;</span>deploy<span style="color:#008000;font-weight:bold">&lt;/phase&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;goals&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#008000;font-weight:bold">&lt;goal&gt;</span>deploy<span style="color:#008000;font-weight:bold">&lt;/goal&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;/goals&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;/execution&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/executions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- nexus pro 버전에만 staging-repository 기능을 사용할 수 있습니다. --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;skipStaging&gt;</span>true<span style="color:#008000;font-weight:bold">&lt;/skipStaging&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;executions&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;execution&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#408080;font-style:italic">&lt;!-- default-install 에 추가합니다. --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#408080;font-style:italic">&lt;!-- deploy 을 실행하면 실행됩니다. --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>default-install<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;phase&gt;</span>install<span style="color:#008000;font-weight:bold">&lt;/phase&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;goals&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#408080;font-style:italic">&lt;!-- spring-boot-maven-plugin 의 repackage 가 실행되도록 합니다. --&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#008000;font-weight:bold">&lt;goal&gt;</span>repackage<span style="color:#008000;font-weight:bold">&lt;/goal&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;/goals&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;/execution&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/executions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>maven-release-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;autoVersionSubmodules&gt;</span>false<span style="color:#008000;font-weight:bold">&lt;/autoVersionSubmodules&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- release:perform 이 실행될 때 deploy 를 실행하여 --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- spring-boot:repackage 까지 같이 실행되도록 합니다. --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;goals&gt;</span>deploy<span style="color:#008000;font-weight:bold">&lt;/goals&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;scmCommentPrefix&gt;</span>[build]<span style="color:#008000;font-weight:bold">&lt;/scmCommentPrefix&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/plugins&gt;</span>
</span></span></code></pre></div><br>
<h4 id="eclipse-path-tools-git-bash">(eclipse) path-tools (git-bash)</h4>
<p>이클립스 <code>Command Line Shell</code> 버튼을 클릭할때 cmd 창이 아닌 git-bash 터미널이 열리도록 설정을 바꿀 수 있습니다.</p>
<img src="/images/develop/20220114-eclipse-path-tools-gitbash.png" width="600">
<p><a href="/images/develop/20220114-eclipse-path-tools-gitbash.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="git-bash-bash_profilesh">(git-bash) bash_profile.sh</h4>
<p>/etc/profile.d/bash_profile.sh</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#008000">alias</span> <span style="color:#19177c">dlog</span><span style="color:#666">=</span><span style="color:#ba2121">&#39;cd /z/project/dlog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> <span style="color:#19177c">pilot</span><span style="color:#666">=</span><span style="color:#ba2121">&#39;cd /z/project/pilot&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> deploy-dlog<span style="color:#666">=</span><span style="color:#ba2121">&#39;/z/project/dlog/deploy.sh &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> run-dlog<span style="color:#666">=</span><span style="color:#ba2121">&#39;/z/project/dlog/run.sh &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">alias</span> <span style="color:#19177c">ls</span><span style="color:#666">=</span><span style="color:#ba2121">&#39;ls -F --color=auto --show-control-chars --time-style=long-iso &#39;</span>
</span></span></code></pre></div><br>
<h4 id="eclipse-ansi-escape-in-console-플러그인">(eclipse) ANSI Escape in Console 플러그인</h4>
<p>ANSI Escape in Console 플러그인은 console 에 ANSI 색상 코드를 해당 색상으로 표시해주는 플러그인입니다.</p>
<p>다른 ANSI 관련 플러그인은 console 의 텍스트를 복사(ctrl+c)할 때 색상코드까지 같이 복사되어 불편했는데 이 플러그인은 그런 부분이 개선되었습니다.</p>
<img src="/images/develop/20220109-eclipse-ansi_escape_in_console_1.png" width="800">
<img src="/images/develop/20220109-eclipse-ansi_escape_in_console.png" width="800">
<p><a href="/images/develop/20220109-eclipse-ansi_escape_in_console.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="eclipse-bash-editor-플러그인">(eclipse) Bash Editor 플러그인</h4>
<p>Bash Editor 플러그인은 shell 스크립트 파일 편집을 할 때 구문강조 및 자동 완성 기능을 제공합니다.</p>
<img src="/images/develop/20220108-eclipse-bash-editor_1.png" width="800">
<img src="/images/develop/20220108-eclipse-bash-editor.png" width="800">
<p><a href="/images/develop/20220108-eclipse-bash-editor.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="eclipse-md-파일-add-bookmark">(eclipse) .md 파일 add bookmark</h4>
<p><code>Mylyn WikiText</code> 플러그인으로 <code>.md</code> 파일을 열었을 경우에는 <code>Add Bookmark</code> 메뉴가 표시되지 않습니다.</p>
<p><code>Generic Text Editor</code> 로 열어서 추가할 수 있으며 <code>.md</code> 파일 편집은 <code>WikiText</code> 로 하면 됩니다.</p>
<br>
<h4 id="maven-helpevaluate-로컬-저장소-경로">(maven) help:evaluate 로컬 저장소 경로</h4>
<p>mvn 명령으로 현재 설정된 로컬 저장소를 반환하는 goal 입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ mvn help:evaluate -Dexpression=settings.localRepository -q -DforceStdout
</span></span></code></pre></div><br>
<h4 id="maven-deploydeploy-file-시-저장소-지정">(maven) deploy:deploy-file 시 저장소 지정</h4>
<p>pom.xml 에 포함되어있는 version 에 <code>-SNAPSHOT</code> 이 있으면 release 저장소에 deploy 할 수 없다는 오류가 발생하므로 주의가 필요합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -DpomFile=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PROJECT_BASE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">/pom.xml&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Dfile=</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">PROJECT_BASE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">/target/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAR_FILE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># jar 파일명에 &#34;-SNAPSHOT&#34; 이 있으면 snapshot 저장소에 deploy 되어야 합니다. </span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[[</span> <span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAR_FILE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121">&#34;</span> <span style="color:#666">=</span> *<span style="color:#ba2121">&#34;-SNAPSHOT&#34;</span>* <span style="color:#666">]]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -DrepositoryId=maven-snapshot&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Durl=http://nexus/repository/maven-snapshot/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -DrepositoryId=maven-release&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#19177c">MVN_ARGS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">MVN_ARGS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Durl=http://nexus/repository/maven-release/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mvn deploy:deploy-file <span style="color:#19177c">$MVN_ARGS</span>
</span></span></code></pre></div><br>
<h4 id="git-pullff-only">(git) pull.ff only</h4>
<p><code>git config --global pull.ff only</code> 설정을 추가하면 됩니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git pull origin main
</span></span><span style="display:flex;"><span>warning: Pulling without specifying how to reconcile divergent branches is
</span></span><span style="display:flex;"><span>discouraged. You can squelch this message by running one of the following
</span></span><span style="display:flex;"><span>commands sometime before your next pull:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  git config pull.rebase <span style="color:#008000">false</span>  <span style="color:#408080;font-style:italic"># merge (the default strategy)</span>
</span></span><span style="display:flex;"><span>  git config pull.rebase <span style="color:#008000">true</span>   <span style="color:#408080;font-style:italic"># rebase</span>
</span></span><span style="display:flex;"><span>  git config pull.ff only       <span style="color:#408080;font-style:italic"># fast-forward only</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You can replace <span style="color:#ba2121">&#34;git config&#34;</span> with <span style="color:#ba2121">&#34;git config --global&#34;</span> to <span style="color:#008000">set</span> a default
</span></span><span style="display:flex;"><span>preference <span style="color:#008000;font-weight:bold">for</span> all repositories. You can also pass --rebase, --no-rebase,
</span></span><span style="display:flex;"><span>or --ff-only on the <span style="color:#008000">command</span> line to override the configured default per
</span></span><span style="display:flex;"><span>invocation.
</span></span></code></pre></div><br>
<h4 id="maven-spring-bootrepackage">(maven) spring-boot:repackage</h4>
<p>packaging 이 jar 인 프로젝트를 <code>mvn package</code> 으로 jar 를 생성한 다음에 <code>mvn spring-boot:repackage</code> 을 실행해야 합니다.</p>
<p>리패키징이되면 jar 아티팩트에 의존성으로 설정된 jar 파일들이 포함됩니다.</p>
<p>아래는 리패키징이 정상이면 볼 수 있는 로그 입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[INFO] <span style="color:#666">---</span> spring<span style="color:#666">-</span>boot<span style="color:#666">-</span>maven<span style="color:#666">-</span>plugin:<span style="color:#666">2.6.1</span>:<span style="color:#00f">repackage</span> (<span style="color:#008000;font-weight:bold">default</span><span style="color:#666">-</span>cli) <span style="">@</span> service<span style="color:#666">-</span>www <span style="color:#666">---</span>
</span></span><span style="display:flex;"><span>[INFO] Replacing main artifact with repackaged archive
</span></span></code></pre></div><br>
<h4 id="maven-malformed-uxxxx-encoding">(maven) Malformed \uxxxx encoding.</h4>
<p>maven 빌드 시 <code>Malformed \uxxxx encoding.</code> 가 발생하면 로컬 저장소를 삭제하고 빌드해주세요.</p>
<br>
<h4 id="git-turn-off-crlf-warning">(git) turn off crlf warning</h4>
<p><code>warning: LF will be replaced by CRLF in</code> 메시지를 보고 싶지 않을 경우 아래 옵션을 추가합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ git config --global core.safecrlf false
</span></span></code></pre></div><br>
<h4 id="hugo-전체-rebuild">(hugo) 전체 rebuild</h4>
<p>아래 2개의 디렉토리의 파일들을 모두 삭제하고 빌드를 합니다.</p>
<p><code>/resources</code>, <code>/public</code></p>
<br>
<h4 id="eclipse-이클립스-로그">(eclipse) 이클립스 로그</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Z:\develop\eclipse\eclipse-jee-R-win32-x86_64\workspace\.metadata\.plugins\org.eclipse.m2e.logback.configuration
</span></span></code></pre></div><p><a href="/files/develop/WinTail.exe.zip" target="_blank">wintail 다운로드</a></p>
<br>
<h4 id="windows-setx">(windows) setx</h4>
<p><code>cmd</code> 에서 아래 명령을 실행하면 <code>시스템 변수</code> 에 추가됩니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>setx /m JAVA_HOME &#34;D:\develop\java\openjdk-11.0.2&#34;
</span></span></code></pre></div><br>
<h4 id="plex-daummoviebundle">(plex) DaumMovie.bundle</h4>
<p><a href="https://github.com/axfree/DaumMovie.bundle">https://github.com/axfree/DaumMovie.bundle</a></p>
<p><code>%LOCALAPPDATA%\Plex Media Server\Plug-ins</code> 에서 압축 해제합니다.</p>
<br>
<h4 id="nexus-curl-put">(nexus) curl PUT</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>curl -u {id}:{passwd} -X PUT -v -T org/apache/poi/poi/3.10-FINAL/poi-3.10-FINAL.jar http://nexus/repository/maven-public-hosted/org/apache/poi/poi/3.10-FINAL/poi-3.10-FINAL.jar
</span></span></code></pre></div><br>
<h4 id="windows-dism">(windows) dism</h4>
<p><code>dism</code>(배포 이미지 서비스 및 관리) 이미지 생성, 분할, 추가, 삭제, 추출, 적용, 마운트, 언 마운트, 커밋들이 가능하다.</p>
<br>
<h4 id="eclipse-xml-editor-tab-to-space">(eclipse) xml editor: tab to space</h4>
<p>xml editor 에서 <code>tab</code> 키 입력 시 <code>space</code> 가 입력되도록 변환하는 방법은 2가지를 설정해야 합니다.</p>
<ul>
<li>single-line: <code>General</code> &gt; <code>Editors</code> &gt; <code>Text Editors</code>: <code>Insert spaces for tabs</code> 체크</li>
<li>multi-line: <code>XML</code> &gt; <code>XML Files</code> &gt; <code>Editor</code>: <code>Indent using spaces</code> 선택</li>
</ul>
<p><a href="/images/develop/20211220-eclipse_xml-editor_tab-to-space.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="eclipse-mybatipse-플러그인">(eclipse) mybatipse 플러그인</h4>
<p>mybatipse 플러그인은 Mapper의 <code>메소드명</code>과 mybatis의 <code>&lt;sql&gt;</code>을 <code>ctrl + L-click</code>으로 연결해주는 편의성을 제공합니다.</p>
<img src="/images/develop/20211220-eclipse-mybatipse_1.png" width="800">
<br>
<h4 id="erwin-database-connection">(erwin) database connection</h4>
<p>우선 display 를 <code>물리 모델</code>로 변경합니다.</p>
<p>상단 메뉴 <code>Database</code> &gt; <code>Database Connection</code> 선택하면 아래 팝업 창이 열립니다.</p>
<p><code>Connection String:</code> 의 값은 tnsnames.ora 에 등록된 항목으로 입력합니다.</p>
<img src="/images/develop/20211220-erwin_database-connection.png" width="800">
<p><a href="/images/develop/20211220-erwin_database-connection.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="regex-not-matched-word">(regex) not matched word</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># string
</span></span><span style="display:flex;"><span>say
</span></span><span style="display:flex;"><span>hello
</span></span><span style="display:flex;"><span>world
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># regex
</span></span><span style="display:flex;"><span>\b(?!hello)\b\w+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># string
</span></span><span style="display:flex;"><span>release-service-bom
</span></span><span style="display:flex;"><span>release-service-www
</span></span><span style="display:flex;"><span>snapshot-service-bom
</span></span><span style="display:flex;"><span>snapshot-service-www
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># regex
</span></span><span style="display:flex;"><span>^release\-(?!.*\-bom).*
</span></span></code></pre></div><br>
<h4 id="maven-release-github">(maven) release github</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;scm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;connection&gt;</span>scm:git:git@github.com:lislroow/pilot.git<span style="color:#008000;font-weight:bold">&lt;/connection&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/scm&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>maven-release-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>3.0.0-M1<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;autoVersionSubmodules&gt;</span>true<span style="color:#008000;font-weight:bold">&lt;/autoVersionSubmodules&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;goals&gt;</span>deploy<span style="color:#008000;font-weight:bold">&lt;/goals&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;scmCommentPrefix&gt;</span>[jenkins]<span style="color:#008000;font-weight:bold">&lt;/scmCommentPrefix&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span></code></pre></div><br>
<h4 id="git-tag">(git) tag</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 삭제</span>
</span></span><span style="display:flex;"><span>$ git tag -d framework-bom-0.2
</span></span><span style="display:flex;"><span><span style="color:#ba2121">&#39;framework-bom-0.2&#39;</span> 태그 삭제함 <span style="color:#666">(</span>과거 2c5b9f1<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>$ git push origin :framework-bom-0.2
</span></span><span style="display:flex;"><span>To github.com:lislroow/pilot.git
</span></span><span style="display:flex;"><span> - <span style="color:#666">[</span>deleted<span style="color:#666">]</span>         framework-bom-0.2
</span></span><span style="display:flex;"><span>$
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 조회</span>
</span></span><span style="display:flex;"><span>$ git tag -l framework-*
</span></span><span style="display:flex;"><span>framework-bom-0.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 추가 (Lightweight 태그)</span>
</span></span><span style="display:flex;"><span>$ git tag framework-bom-0.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 추가 (Annotated 태그)</span>
</span></span><span style="display:flex;"><span>$ git tag -a framework-bom-0.2 -m <span style="color:#ba2121">&#34;Release framework-bom-0.2&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 보기</span>
</span></span><span style="display:flex;"><span>$ git show framework-bom-0.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 태그 원격저장소 push (모두 올리기)</span>
</span></span><span style="display:flex;"><span>$ git push origin --tags
</span></span></code></pre></div><br>
<h4 id="git-특정-경로만-checkout-하기">(git) 특정 경로만 checkout 하기</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git init
</span></span><span style="display:flex;"><span>$ git config core.sparseCheckout <span style="color:#008000">true</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#git config --local credential.helper &#34;&#34;</span>
</span></span><span style="display:flex;"><span>$ git remote add -f origin git@github.com:lislroow/pilot.git
</span></span><span style="display:flex;"><span>$ <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;bom/framework-bom/*&#34;</span> &gt; .git/info/sparse-checkout
</span></span><span style="display:flex;"><span>$ git pull origin main
</span></span></code></pre></div><br>
<h4 id="maven-version-ranges">(maven) version ranges</h4>
<p>artifact 의 scope 가 <code>import</code> 일 경우에는 <code>[0.1,)</code> 형태로 ranges 를 적용할 수 없습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;dependencyManagement&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">&lt;!-- mgkim.proto --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>mgkim.proto<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>proto<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>[0.1,)<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>  <span style="color:#408080;font-style:italic">&lt;!-- 오류 --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>0.1<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>     <span style="color:#408080;font-style:italic">&lt;!-- 정상 --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;type&gt;</span>pom<span style="color:#008000;font-weight:bold">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;scope&gt;</span>import<span style="color:#008000;font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#408080;font-style:italic">&lt;!-- //mgkim.proto --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><br>
<h4 id="eclipse-sts-boot-dashboard-filter">(eclipse) STS Boot Dashboard filter</h4>
<img src="/images/develop/20211215-STS-boot_dashboard-filter.png" width="300">
<p><a href="/images/develop/20211215-STS-boot_dashboard-filter.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="eclipse-eclipse-update">(eclipse) eclipse-update</h4>
<p>이클립스를 업데이트 할 경우<del>(플러그인 업데이트가 아닌)</del>, <code>Can not remove ... eclipse.exe</code> 오류가 발생할 수 있습니다.</p>
<p>이 경우에는 아래 이미지와 같이 업데이트 진행 중에 <code>eclipse.exe</code> 파일을 <code>eclipse.exe.bak</code> 로 변경하면 업데이트가 오류없이 진행됩니다.</p>
<img src="/images/develop/20211214-eclipse-update-Can_not_remove_eclipse.exe.png" width="600">
<p><a href="/images/develop/20211214-eclipse-update-Can_not_remove_eclipse.exe.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="eclipse-scm-ignore">(eclipse) scm ignore</h4>
<p><code>Preferences</code> &gt; <code>Version Control (Team)</code> &gt; <code>Ignored Resources</code></p>
<p>아래 항목들을 추가 합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>*target*
</span></span><span style="display:flex;"><span>*target*/*
</span></span><span style="display:flex;"><span>pom.xml.releaseBackup
</span></span><span style="display:flex;"><span>release.properties
</span></span></code></pre></div><img src="/images/develop/20211214-svn-ignore_target.png" width="600">
<p><a href="/images/develop/20211214-svn-ignore_target.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="github-ssh-key-등록">(github) ssh key 등록</h4>
<p><code>ssh-keygen -t ed25519 -C &quot;hi@mgkim.net&quot;</code></p>
<p>생성된 공개키 파일, <code>C:\Users\Administrator\.ssh\id_ed25519.pub</code> 의 내용을 github 에 등록합니다.</p>
<p>github 메뉴 경로: <code>Settings</code> &gt; <code>SSH and GPG keys</code></p>
<p><code>remote origin</code> 변경</p>
<p><code>ssh-agent</code> 는 공개키 인증을 위한 개인키를 보관하는 프로그램으로 여러 서버에 인증이 필요할 경우 사용할 수 있습니다.</p>
<p>등록된 공개키 정상여부 확인을 하기 위해, 키 생성을 한 곳에서 <code>ssh -T git@github.com</code> 명령을 실행을 해봅니다.</p>
<p>키 파일의 경로를 명시적으로 지정</p>
<p><code>ssh -v -i /C/Users/Administrator/.ssh/id_ed25519.pub -T git@github.com</code></p>
<p><code>ssh -i C:\Users\Administrator\.ssh\id_ed25519.pub -T git@github.com</code></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Administrator@I5-1135G7 MINGW64 /
</span></span><span style="display:flex;"><span>$ ssh -T git@github.com
</span></span><span style="display:flex;"><span>The authenticity of host &#39;github.com (15.164.81.167)&#39; can&#39;t be established.
</span></span><span style="display:flex;"><span>ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
</span></span><span style="display:flex;"><span>This key is not known by any other names
</span></span><span style="display:flex;"><span>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
</span></span><span style="display:flex;"><span>Warning: Permanently added &#39;github.com&#39; (ED25519) to the list of known hosts.
</span></span><span style="display:flex;"><span>Hi lislroow! You&#39;ve successfully authenticated, but GitHub does not provide shell access.
</span></span></code></pre></div><p>github 에 key를 등록한 다음 cli 환경에서 사용하려면 아래 명령을 실행합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ <span style="color:#008000">eval</span> <span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span>ssh-agent -s<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>Agent pid <span style="color:#666">126681</span>
</span></span><span style="display:flex;"><span>$ ps -ef | grep ssh-agent
</span></span><span style="display:flex;"><span>root       <span style="color:#666">31343</span>       <span style="color:#666">1</span>  <span style="color:#666">0</span> 12월14 ?      00:00:00 ssh-agent -s
</span></span><span style="display:flex;"><span>jenkins   <span style="color:#666">126681</span>       <span style="color:#666">1</span>  <span style="color:#666">0</span> 17:12 ?        00:00:00 ssh-agent -s
</span></span><span style="display:flex;"><span>jenkins   <span style="color:#666">126683</span>  <span style="color:#666">126640</span>  <span style="color:#666">0</span> 17:12 pts/1    00:00:00 grep --color<span style="color:#666">=</span>auto ssh-agent
</span></span><span style="display:flex;"><span>$ ssh-add ~/.ssh/id_ed25519
</span></span><span style="display:flex;"><span>Identity added: /home/jenkins/.ssh/id_ed25519 <span style="color:#666">(</span>jenkins@mgkim.net<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>$ 
</span></span></code></pre></div><br>
<h4 id="github-unable-to-read-askpass-오류">(github) unable to read askpass 오류</h4>
<p>오류 상황입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ git push origin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(gnome-ssh-askpass:19816): Gtk-WARNING **: 10:22:08.209: cannot open display: 
</span></span><span style="display:flex;"><span>error: unable to read askpass response from &#39;/usr/libexec/openssh/gnome-ssh-askpass&#39;
</span></span><span style="display:flex;"><span>Username for &#39;https://github.com&#39;: 
</span></span></code></pre></div><p><code>SSH_ASKPASS</code> 변수를 unset 하면 됩니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ echo $SSH_ASKPASS
</span></span><span style="display:flex;"><span>/usr/libexec/openssh/gnome-ssh-askpass
</span></span><span style="display:flex;"><span>$ unset SSH_ASKPASS
</span></span></code></pre></div><br>
<h4 id="github-personal-access-tokens">(github) Personal access tokens</h4>
<p><code>Settings</code> &gt; <code>Developer settings</code> &gt; <code>Personal access tokens</code> 이동 후</p>
<p><code>Generate new token</code> 버튼 클릭으로 token 생성 (<code>repo</code> 만 체크하면 push 할 수 있음)</p>
<p>token 생성 후 이클립스에서 id에 email 입력, password 에 생성된 토큰 입력</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># token-name: centos
</span></span><span style="display:flex;"><span>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
</span></span></code></pre></div><br>
<h4 id="eclipse-debugging-필수-옵션">(eclipse) debugging 필수 옵션</h4>
<p>디버깅 시 아래와 같은 오류가 발생할 경우 이클립스 옵션을 확인해보세요.</p>
<ul>
<li>
<p>오류 상황</p>
 <img src="/images/develop/20211126-eclipse_debug_error.png" />
</li>
<li>
<p>경로: <code>Preferences</code> &gt; <code>Java</code> &gt; <code>Debug</code></p>
</li>
<li>
<p>체크사항: <code>Use advanced source lookup (JRE 1.5 and higher)</code> 체크를 반드시 해제해주셔야 합니다.</p>
<p><a href="/images/develop/20211126-eclipse_debug_config.png" target="_blank">새 창 보기</a></p>
</li>
<li>
<p>체크 유무에 따라 정상/오류 상황을 캡처한 이미지 입니다.</p>
<p><a href="/images/develop/20211126-eclipse_debug_use_advanced_source_lookup_unchecked.png" target="_blank">새 창 보기</a></p>
</li>
</ul>
<br>
<h4 id="win-win-11-taskbar-그룹해제">(win) win 11 taskbar 그룹해제</h4>
<p>아래 파일 다운로드 후 실행</p>
<p><a href="/files/develop/20211126-ep_setup.7z" download="ep_setup.7z" target="_blank">다운로드</a></p>
<p><a href="https://github.com/valinet/ExplorerPatcher/releases/tag/22000.348.39.1_493cf27" target="_blank">새 창 보기</a></p>
<br>
<h4 id="maven-release">(maven) release</h4>
<p>명령어</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn -B clean release:prepare release:perform deploy
</span></span></code></pre></div><p>$M2_HOME/conf/settings.xml 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#bc7a00">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;settings</span> <span style="color:#7d9029">xmlns=</span><span style="color:#ba2121">&#34;http://maven.apache.org/SETTINGS/1.0.0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#7d9029">xmlns:xsi=</span><span style="color:#ba2121">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#7d9029">xsi:schemaLocation=</span><span style="color:#ba2121">&#34;http://maven.apache.org/SETTINGS/1.0.0
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">  http://maven.apache.org/xsd/settings-1.0.0.xsd&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;servers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus-release<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>passwd<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus-snapshot<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>passwd<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/servers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;mirrors&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;mirror&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;name&gt;</span>nexus<span style="color:#008000;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;url&gt;</span>http://nexus/repository/maven-group/<span style="color:#008000;font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;mirrorOf&gt;</span>*<span style="color:#008000;font-weight:bold">&lt;/mirrorOf&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/mirror&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/mirrors&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></div><p>pom.xml 파일</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>maven-release-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>3.0.0-M1<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- 필수 사항 --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;autoVersionSubmodules&gt;</span>true<span style="color:#008000;font-weight:bold">&lt;/autoVersionSubmodules&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;goals&gt;</span>deploy<span style="color:#008000;font-weight:bold">&lt;/goals&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>mgkim<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>passwd<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#408080;font-style:italic">&lt;!-- //필수 사항 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/build&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">&lt;!-- 필수 사항 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;scm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;connection&gt;</span>scm:svn:svn://develop/test/trunk/proto.www<span style="color:#008000;font-weight:bold">&lt;/connection&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/scm&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">&lt;!-- //필수 사항 --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;distributionManagement&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;snapshotRepository&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>mgkim-snapshot<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;url&gt;</span>http://nexus/repository/maven-mgkim-snapshot/<span style="color:#008000;font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/snapshotRepository&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;repository&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>mgkim-release<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;url&gt;</span>http://nexus/repository/maven-mgkim-release/<span style="color:#008000;font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/repository&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/distributionManagement&gt;</span>
</span></span></code></pre></div><br>
<h4 id="maven-helpevaluate">(maven) help:evaluate</h4>
<p>명령어</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">SNAPSHOT_NM</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span>mvn -f pom.xml help:evaluate -Dexpression<span style="color:#666">=</span>project.version -q -DforceStdout<span style="color:#008000;font-weight:bold">)</span>
</span></span></code></pre></div><br>
<h4 id="maven-dependency">(maven) dependency</h4>
<p>명령어: dependency:resolve</p>
<p>javadoc 다운로드</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn dependency:resolve -Dclassifier<span style="color:#666">=</span>javadoc
</span></span></code></pre></div><p>명령어: dependency:sources</p>
<p>sources 다운로드</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mvn dependency:sources
</span></span></code></pre></div><br>
<h4 id="maven-deploydeploy-file">(maven) deploy:deploy-file</h4>
<p>명령어</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">JAVA_HOME</span>=Z:\develop\java\openjdk-11.0.2
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">M2_HOME</span>=Z:\develop\build\maven-3.6.3
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">PATH</span>=<span style="color:#19177c">%JAVA_HOME%</span>\bin;<span style="color:#19177c">%M2_HOME%</span>\bin;<span style="color:#19177c">%PATH%</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">NEXUS_REPO</span>=-DrepositoryId=nexus-release -Durl=http://nexus/repository/maven-public-hosted/
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">GROUP_ID</span>=net.mgkim
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">ARTIFACT_ID</span>=spring-core
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">VERSION</span>=1.0.0
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#19177c">FILE</span>=Z:\mgkim-spring-core-1.0.0.jar
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">%M2_HOME%</span>\bin\mvn.cmd -U deploy:deploy-file -DgroupId=<span style="color:#19177c">%GROUP_ID%</span> -DartifactId=<span style="color:#19177c">%ARTIFACT_ID%</span> -Dversion=<span style="color:#19177c">%VERSION%</span> -Dpackaging=jar -Dfile=<span style="color:#19177c">%FILE%</span> <span style="color:#19177c">%NEXUS_REPO%</span>
</span></span></code></pre></div><p>플러그인</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#008000;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;artifactId&gt;</span>maven-deploy-plugin<span style="color:#008000;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>3.0.0-M1<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/build&gt;</span>
</span></span></code></pre></div><br>
<p><strong>2021.12.14 nexus deploy 401 unauthorized</strong></p>
<p>mvn deploy 에 전달된 인자 <code>-DrepositoryId=nexus-release</code> 이 참조하는 settings.xml 의 <code>&lt;Servers&gt;</code> 의 id/passwd 정보가 있어야 합니다.</p>
<img src="/images/develop/20211214-maven-deploy_401_unauthorized.png" width="800">
<p><a href="/images/develop/20211214-maven-deploy_401_unauthorized.png" target="_blank">새 창 보기</a></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;servers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;server&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;id&gt;</span>nexus-release<span style="color:#008000;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#008000;font-weight:bold">&lt;/username&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#008000;font-weight:bold">&lt;password&gt;</span>***(passwd)***<span style="color:#008000;font-weight:bold">&lt;/password&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000;font-weight:bold">&lt;/server&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;/servers&gt;</span>
</span></span></code></pre></div><br>
<p><strong>2021.12.14 nexacro 라이브러리 추가</strong></p>
<p><a href="/files/develop/2021-12-14-maven-deploy-nexacro.txt" target="_blank">스크립트 보기</a></p>
<br>
<h4 id="maven-settingsxml-파일">(maven) settings.xml 파일</h4>
<p>$M2_HOME/conf/settings.xml</p>
<p><a href="/files/develop/20211120-settings.xml.txt" target="_blank">새 창 보기</a></p>
<br>
<h4 id="maven-password-암호화">(maven) password 암호화</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 평문 `mypassword` 는 `{ODOdTfm09eMHYfUVt4vkUfm9dw1pkSRC+HAXsuqE0p0=}` 문자열로 암호화됨</span>
</span></span><span style="display:flex;"><span>$ mvn --encrypt-master-password mypassword
</span></span><span style="display:flex;"><span><span style="color:#666">{</span>ODOdTfm09eMHYfUVt4vkUfm9dw1pkSRC+HAXsuqE0p0<span style="color:#666">=}</span>
</span></span></code></pre></div><br>
<h4 id="java-vmargs-2개">(java) vmargs (2개)</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># request.getRemoteAddr() 가 IPv6 로 출력되는 경우</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -Djava.net.preferIPv4Stack=true&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># cannot be cast to javax.net.ssl.HttpsURLConnection</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># URLConnection 객체를 사용할 때 HttpsURLConnection 이 반환되지 않는 경우</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#19177c">JAVA_OPTS</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#ba2121"> -DUseSunHttpHandler=true&#34;</span>
</span></span></code></pre></div><br>
<h4 id="win-win11-system-tray-설정">(win) win11 system-tray 설정</h4>
<p>cmd 창에서 아래 명령어를 입력하여 시스템 트레이에 모든 아이콘을 표시하도록 합니다.</p>
<p><code>시스템 아이콘 켜기 또는 끄기</code> 를 선택하여 시계를 표시할 수도 있습니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>&gt; explorer shell:::{05d7b0f4-2121-4eff-bf6b-ed3f69b894d9}
</span></span></code></pre></div><p><a href="/images/develop/20211121_windows11_systemtray_show_all_icons.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="win-font-추천">(win) font 추천</h4>
<p><strong>hugo-site</strong></p>
<p>/assets/scss/_variables_project.scss</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#666">$</span><span style="color:#008000;font-weight:bold">google_font_name</span><span style="color:#666">:</span> <span style="color:#ba2121">&#34;Bitstream Vera Sans Mono&#34;</span> <span style="color:#666">!</span><span style="color:#008000;font-weight:bold">default</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">$</span><span style="color:#008000;font-weight:bold">google_font_family</span><span style="color:#666">:</span> <span style="color:#ba2121">&#34;Bitstream Vera Sans Mono:300,300i,400,400i,700,700i&#34;</span> <span style="color:#666">!</span><span style="color:#008000;font-weight:bold">default</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">$</span><span style="color:#008000;font-weight:bold">web-font-path</span><span style="color:#666">:</span> <span style="color:#ba2121">&#34;http://fonts.cdnfonts.com/css/bitstream-vera-sans-mono&#34;</span><span style="color:#666">;</span>
</span></span></code></pre></div><p>scss 파일의 수정된 내용이 적용되려면 npm 빌드 환경이 필요합니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 초기 구성을 위해 준비할 것</span>
</span></span><span style="display:flex;"><span>$ git submodule add -b master https://github.com/lislroow/lislroow.github.io.git public
</span></span><span style="display:flex;"><span>$ git clone --recurse-submodules --depth <span style="color:#666">1</span> https://github.com/google/docsy.git themes/docsy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 2개의 npm 패키지 설치</span>
</span></span><span style="display:flex;"><span>$ npm install autoprefixer -D --save
</span></span><span style="display:flex;"><span>$ npm install postcss-cli -D --save
</span></span><span style="display:flex;"><span>$ npm install postcss -D --save
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># npm 패키지 설치 후 hugo -t docsy 로 build 하면 </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># `/assets/scss/_variables_project.scss` 파일에 수정된 내용을 포함하여</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># 아래 경로에 build 결과 파일을 생성합니다.</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># `/resources/_gen/assets/scss/scss/main.scss_4853eb546e7a6c0898ed71feae7357c0.content`</span>
</span></span></code></pre></div><p><strong>system</strong></p>
<p><code>Bitstream</code> 은 coding 목적으로 많이 사용되는 font 입니다.</p>
<p><a href="/images/develop/20211105_change-eclipse-font_1.png" target="_blank">새 창 보기<a/></p>
<p>다운로드: <a href="/files/develop/BitstreamVeraSansMono.ttf" download="BitstreamVeraSansMono.ttf">BitstreamVeraSansMono.ttf</a></p>
<p><code>Colors and Fonts</code> &gt; <code>Basic</code> &gt; <code>Text Font</code> 를 선택하고 <code>Edit</code> 버튼을 클릭하면 변경할 수 있습니다.</p>
<p><a href="/images/develop/20211105_change-eclipse-font.png" target="_blank">새 창 보기<a/></p>
<br>
<h4 id="eclipse-hidpi-설정">(eclipse) hidpi 설정</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># eclipse.ini 파일의 맨 마지막에 추가
</span></span><span style="display:flex;"><span>-Dswt.autoScale=150 # 150 == 1.5배
</span></span></code></pre></div><p><a href="/files/develop/20211120-eclipse.ini" target="_blank">새 창 보기</a></p>
<br>
<h4 id="win-절전-cmd">(win) 절전 cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span><span style="color:#19177c">%windir%</span>\System32\rundll32.exe powrprof.dll SetSuspendState
</span></span></code></pre></div><br>
<h4 id="vmware-실행-cmd">(vmware) 실행 cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#ba2121">&#34;VMWARE_HOME=C:\Program Files (x86)\VMware\VMware Workstation&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">set</span> <span style="color:#ba2121">&#34;PATH=</span><span style="color:#19177c">%PATH%</span><span style="color:#ba2121">;</span><span style="color:#19177c">%VMWARE_HOME%</span><span style="color:#ba2121">&#34;</span>
</span></span><span style="display:flex;"><span>vmrun -T ws start <span style="color:#ba2121">&#34;Z:\centos7-develop\centos7-develop.vmx&#34;</span> nogui
</span></span></code></pre></div><br>
<h4 id="win-wol-설정">(win) wol 설정</h4>
<p>절전 상태에서 wol 이 작동하려면 아래 옵션을 선택해야 합니다.</p>
<p><a href="/images/develop/20211120-windows_wol_1.png" target="_blank">새 창 보기</a></p>
<br>
<h4 id="win-port-forwarding-cmd">(win) port-forwarding cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span># 설정
</span></span><span style="display:flex;"><span>&gt; netsh interface portproxy add v4tov4 listenport=8222 listenaddress=0.0.0.0 connectport=22 connectaddress=172.28.200.20
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 해제
</span></span><span style="display:flex;"><span>&gt; netsh interface portproxy delete v4tov4 listenport=8222 listenaddress=0.0.0.0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 확인
</span></span><span style="display:flex;"><span>&gt; netsh interface portproxy show v4tov4
</span></span></code></pre></div><br>
<h4 id="win-파일-공유-설정">(win) 파일 공유 설정</h4>
<p>windows 에서 파일 공유 시 권한이 없다는 메시지가 나오는 경우가 있음</p>
<p>windows 계정에 패스워드가 설정되어 있지 않으면 발생하는 사항</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span># 비밀번호 설정하기
</span></span><span style="display:flex;"><span>&gt; net user administrator *
</span></span></code></pre></div><p>centos 에서 windows 공유 디렉토리 mount</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>$ mkdir /share
</span></span><span style="display:flex;"><span>$ mount -t cifs //172.28.200.1/share /share -o username=administrator,password=1
</span></span><span style="display:flex;"><span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem            Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs              3.8G     0  3.8G   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                 3.9G   12K  3.9G   1% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                 3.9G   14M  3.8G   1% /run
</span></span><span style="display:flex;"><span>tmpfs                 3.9G     0  3.9G   0% /sys/fs/cgroup
</span></span><span style="display:flex;"><span>/dev/nvme0n1p9         76G   15G   61G  20% /
</span></span><span style="display:flex;"><span>/dev/nvme0n1p8        3.0G  2.7G  378M  88% /var
</span></span><span style="display:flex;"><span>/dev/nvme0n1p7        5.0G  2.6G  2.4G  53% /home
</span></span><span style="display:flex;"><span>/dev/nvme0n1p2        100G   27G   74G  27% /data
</span></span><span style="display:flex;"><span>/dev/nvme0n1p5         20G  5.0G   16G  25% /app
</span></span><span style="display:flex;"><span>/dev/nvme0n1p3         30G  9.8G   21G  33% /prod
</span></span><span style="display:flex;"><span>/dev/nvme0n1p1        474M  149M  326M  32% /boot
</span></span><span style="display:flex;"><span>tmpfs                 781M     0  781M   0% /run/user/0
</span></span><span style="display:flex;"><span>//172.28.200.1/share  345G  284G   62G  83% /share
</span></span><span style="display:flex;"><span>$ vi /etc/fstab
</span></span><span style="display:flex;"><span>//172.28.200.1/share /share cifs username=administrator,password=1 0 0
</span></span></code></pre></div><br>
<h4 id="vmware-nat-설정">(vmware) nat 설정</h4>
<p><code>vmware</code> &gt; <code>Edit</code> &gt; <code>Virtual Network Editor</code></p>
<p><code>NAT Settings...</code> &gt; <code>Gateway IP</code> 확인</p>
<p>Subnet IP: 172.28.200.0, Subnet mask: 255.255.255.0</p>
<p>vmware 의 guest os는 172.28.200.2~254 로 설정하고, host os(windows) 와 통신은 172.28.200.1 로 합니다.</p>
<br>
<h4 id="7z-7z-압축-cmd">(7z) 7z 압축 cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>&gt; <span style="color:#ba2121">&#34;C:\Program Files\7-Zip\7z.exe&#34;</span> a -mx7 -mmt Z:\project.zip <span style="color:#ba2121">&#34;Z:\project&#34;</span>
</span></span><span style="display:flex;"><span>&gt; <span style="color:#ba2121">&#34;C:\Program Files\7-Zip\7z.exe&#34;</span> a -mx5 -t7z Z:\project.zip <span style="color:#ba2121">&#34;Z:\project&#34;</span> -xr!target -xr!node_modules
</span></span></code></pre></div><p>target 디렉토리와 node_modules 디렉토리는 압축 대상에서 제외됩니다.</p>
<br>
<h4 id="jmeter-jmeter-실행-cmd">(jmeter) jmeter 실행 cmd</h4>
<p>jmeter 실행 결과 디렉토리에 timestamp 변수 사용하기</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>&gt; set ts=<span style="color:#19177c">%DATE:~0,4%%DATE:~5,2%%DATE:~8,2%</span>_<span style="color:#19177c">%TIME:~0,2%%TIME:~3,2%%TIME:~6,2%</span>
</span></span><span style="display:flex;"><span>&gt; apache-jmeter-5.4.1\bin\jmeter.bat -n -t jmeter-mgkim-core.jmx -l data\<span style="color:#19177c">%ts%</span>.csv -e -o data\<span style="color:#19177c">%ts%</span>
</span></span></code></pre></div><br>
<h4 id="win-xcopy-cmd">(win) xcopy cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>&gt; xcopy C:\exp\*.* Z:\exp\ /d/i/s/c/y
</span></span></code></pre></div><br>
<h4 id="chrome-https-자동-접속-현상">(chrome) https 자동 접속 현상</h4>
<ul>
<li>
<p><code>chrome://net-internals/#hsts</code> 로 이동</p>
</li>
<li>
<p><code>Delete domain security policies</code> 에서 해당 도메인 delete</p>
</li>
<li>
<p><code>chrome://restart</code> chrome 재시작</p>
<p><a href="/images/develop/20211121-chrome_delete_domain_security_policies.png" target="_blank">새 창 보기</a></p>
</li>
</ul>
<br>
<h4 id="git-config-cmd">(git) config cmd</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>&gt; git config --global core.autocrlf true
</span></span><span style="display:flex;"><span>&gt; git config --global user.email hi@mgkim.net
</span></span><span style="display:flex;"><span>&gt; git config --global user.name 김명구
</span></span></code></pre></div><br>
<h4 id="git-pre-commit-shell">(git) pre-commit shell</h4>
<p>git-commit 을 하기 전에 사전 검사를 하기 위한 코드를 bash-shell 로 체크하는 방법입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#408080;font-style:italic"># project/.git/hooks/pre-commit</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#!/bin/sh</span>
</span></span><span style="display:flex;"><span><span style="color:#19177c">LIST</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">$(</span>git diff --cached --name-only --diff-filter<span style="color:#666">=</span>ACRM<span style="color:#008000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">for</span> file in <span style="color:#19177c">$LIST</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">if</span> <span style="color:#666">[</span> <span style="color:#19177c">$file</span> <span style="color:#666">=</span> <span style="color:#ba2121">&#34;.settings/org.eclipse.wst.common.component&#34;</span> <span style="color:#666">]</span>; <span style="color:#008000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">echo</span> <span style="color:#ba2121">&#34;이클립스 설정 파일(</span><span style="color:#19177c">$file</span><span style="color:#ba2121">)은 commit을 할 수 없습니다.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008000">exit</span> <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">exit</span> <span style="color:#666">0</span>
</span></span></code></pre></div><br>
<h4 id="oracle-client-무설치-설정">(oracle) client 무설치 설정</h4>
<p><strong>시스템변수</strong></p>
<p><a href="/files/develop/20211120-oracle_client_env.txt" target="_blank">새 창 보기</a></p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_client</code></p>
<p><a href="/files/develop/20211120-HLM_SW_Oracle_key_client(Z).reg" target="_blank">새 창 보기</a></p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ORACLE\KEY_client</code></p>
<p><a href="/files/develop/20211120-HLM_SW_Wow6432Node_Oacle_key_client(Z).reg" target="_blank">새 창 보기</a></p>
<p><strong>tnsnames.ora</strong></p>
<p><a href="/files/develop/20211120-tnsnames.ora" target="_blank">새 창 보기</a></p>
<br>
<h4 id="oracle-sqlplus">(oracle) sqlplus</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>C:\Users\Administrator&gt;sqlplus /nolog
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SQL*Plus: Release 12.1.0.2.0 Production on 목 9월 2 11:39:53 2021
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Copyright (c) 1982, 2014, Oracle.  All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SQL&gt; conn SPADBA/password@develop:1521/SPADBP
</span></span><span style="display:flex;"><span>연결되었습니다.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SQL&gt; show con_name
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CON_NAME
</span></span><span style="display:flex;"><span>------------------------------
</span></span><span style="display:flex;"><span>CDB$ROOT
</span></span><span style="display:flex;"><span>SQL&gt; set line 150 pages 1000
</span></span><span style="display:flex;"><span>SQL&gt; col name for a30
</span></span><span style="display:flex;"><span>SQL&gt; select con_id, dbid, name, open_mode from v$containers order by 1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    CON_ID   DBID NAME           OPEN_MODE
</span></span><span style="display:flex;"><span>---------- ---------- ------------------------------ ----------
</span></span><span style="display:flex;"><span>   1 1588065228 CDB$ROOT           READ WRITE
</span></span><span style="display:flex;"><span>   2 2599163564 PDB$SEED           READ ONLY
</span></span><span style="display:flex;"><span>   3  673775647 SPADBP           READ WRITE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SQL&gt; alter session set container=SPADBP;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>세션이 변경되었습니다.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SQL&gt; show con_name
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CON_NAME
</span></span><span style="display:flex;"><span>------------------------------
</span></span><span style="display:flex;"><span>SPADBP
</span></span><span style="display:flex;"><span>SQL&gt;
</span></span></code></pre></div><br>
<h4 id="oracle-object-조회-query">(oracle) object 조회 query</h4>
<p>dictionary 뷰에서부터 object 정보를 확인하고 생성된 상태를 확인할 수 있습니다.</p>
<p>sqlgate 에 단축키로 등록하고 사용하면 유용할 query 입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#666">#</span><span style="color:#bbb"> </span><span style="">테이블</span><span style="color:#bbb"> </span><span style="">검색</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#408080;font-style:italic">/* (Alt+1) 테이블 검색  */</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span>,<span style="color:#bbb"> </span>A.COMMENTS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>T_COMMENT,<span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>T_NAME,<span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>C_NAME,<span style="color:#bbb"> </span>B.COMMENTS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>C_COMMENT,<span style="color:#bbb"> </span>B1.COLUMN_ID<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb">  </span>ALL_TAB_COMMENTS<span style="color:#bbb"> </span>A,<span style="color:#bbb"> </span>ALL_COL_COMMENTS<span style="color:#bbb"> </span>B,<span style="color:#bbb"> </span>ALL_TAB_COLS<span style="color:#bbb"> </span>B1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#666">=</span><span style="color:#666">1</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%&amp;Var%&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">OWNER</span>(<span style="color:#666">+</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IN</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;SPADBA&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ORDER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">BY</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DESC</span>,<span style="color:#bbb"> </span>B1.COLUMN_ID,<span style="color:#bbb"> </span>A.COMMENTS<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">#</span><span style="color:#bbb"> </span><span style="">컬럼</span><span style="color:#bbb"> </span><span style="">검색</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#408080;font-style:italic">/* (Alt+2) 컬럼 검색  */</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span>,<span style="color:#bbb"> </span>A.COMMENTS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>T_COMMENT,<span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>T_NAME,<span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>C_NAME,<span style="color:#bbb"> </span>B.COMMENTS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">AS</span><span style="color:#bbb"> </span>C_COMMENT,<span style="color:#bbb"> </span>B1.COLUMN_ID<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb">  </span>ALL_TAB_COMMENTS<span style="color:#bbb"> </span>A,<span style="color:#bbb"> </span>ALL_COL_COMMENTS<span style="color:#bbb"> </span>B,<span style="color:#bbb"> </span>ALL_TAB_COLS<span style="color:#bbb"> </span>B1,<span style="color:#bbb"> </span>ALL_CONS_COLUMNS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#666">=</span><span style="color:#666">1</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>(B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%&amp;Var%&#39;</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">OR</span><span style="color:#bbb"> </span>B.COMMENTS<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%&amp;Var%&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span>.<span style="color:#008000;font-weight:bold">TABLE_NAME</span>(<span style="color:#666">+</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>B1.<span style="color:#008000;font-weight:bold">OWNER</span>(<span style="color:#666">+</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span>.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>B.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span><span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span>.<span style="color:#008000;font-weight:bold">COLUMN_NAME</span>(<span style="color:#666">+</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span>.<span style="color:#008000;font-weight:bold">CONSTRAINT_NAME</span>(<span style="color:#666">+</span>)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%PK&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IN</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;SPADBA&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AND</span><span style="color:#bbb"> </span>(A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;E%&#39;</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">OR</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;CB%&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ORDER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">BY</span><span style="color:#bbb"> </span>A.<span style="color:#008000;font-weight:bold">OWNER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DESC</span>,<span style="color:#bbb"> </span>A.COMMENTS,<span style="color:#bbb"> </span>B1.COLUMN_ID,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">C</span>.<span style="color:#008000;font-weight:bold">POSITION</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">#</span><span style="color:#bbb"> </span><span style="">테이블</span><span style="color:#bbb"> </span><span style="">조회</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#408080;font-style:italic">/* (Alt+3) 테이블 조회 */</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span><span style="color:#666">&amp;</span>Var<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>ROWNUM<span style="color:#bbb"> </span><span style="color:#666">&lt;</span><span style="color:#bbb"> </span><span style="color:#666">200</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">#</span><span style="color:#bbb"> </span>dict<span style="color:#bbb"> </span><span style="">검색</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#408080;font-style:italic">/* (Alt+4) DICT 검색 */</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>DICT<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">LIKE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%&#39;</span><span style="color:#666">||</span><span style="color:#ba2121">&#39;&amp;Var&#39;</span><span style="color:#666">||</span><span style="color:#ba2121">&#39;%&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ORDER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">BY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE_NAME</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>;<span style="color:#bbb">
</span></span></span></code></pre></div><br>
<h4 id="git-git-remote">(git) git-remote</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ git remote -v
</span></span><span style="display:flex;"><span>origin  https://github.com/lislroow/dlog.git (fetch)
</span></span><span style="display:flex;"><span>origin  https://github.com/lislroow/dlog.git (push)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git remote set-url origin git@github.com:lislroow/dlog.git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ git remote -v
</span></span><span style="display:flex;"><span>origin  git@github.com:lislroow/dlog.git (fetch)
</span></span><span style="display:flex;"><span>origin  git@github.com:lislroow/dlog.git (push)
</span></span></code></pre></div><h4 id="git-git-log">(git) git-log</h4>
<ul>
<li><code>git log --branches --not --remotes</code>: commit 목록 중 원격지에 push 하지 않은 항목 출력</li>
<li><code>git log --oneline --graph</code>: commit 목록을 1 line 으로 출력하면서 graph 로 표시</li>
<li><code>git log -p -1</code>: commit 목록 중 최근 1개에 대하여 <code>-p</code>(patch) diff 출력</li>
<li><code>git log -p -S 문자열</code>: patch 에 문자열이 포함된 commit 목록 출력</li>
<li><code>git log --since='2022-02-26 14:00'</code>: &lsquo;2022-02-26 14:00&rsquo; 부터 지금까지의 commit 목록 출력 (since/until)</li>
</ul>
<p>주요 옵션</p>
<table>
<thead>
<tr>
<th>옵션</th>
<th style="text-align:left"><center>설명</center></th>
</tr>
</thead>
<tbody>
<tr>
<td>-p</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;stat</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;shortstat</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;name-only</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;name-status</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;graph</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;pretty</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>&ndash;oneline</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>범위 제한 옵션</p>
<table>
<thead>
<tr>
<th>옵션</th>
<th><center>설명</center></th>
</tr>
</thead>
<tbody>
<tr>
<td>-(n)</td>
<td></td>
</tr>
<tr>
<td>&ndash;since, &ndash;after</td>
<td></td>
</tr>
<tr>
<td>&ndash;until, &ndash;before</td>
<td></td>
</tr>
<tr>
<td>&ndash;author</td>
<td></td>
</tr>
<tr>
<td>&ndash;committer</td>
<td></td>
</tr>
<tr>
<td>&ndash;grep</td>
<td>commit 메시지의 텍스트를 grep 합니다.</td>
</tr>
<tr>
<td>&ndash;S</td>
<td>patch 내용의 텍스트를 grep 합니다.</td>
</tr>
</tbody>
</table>
<h4 id="git-git-restore">(git) git-restore</h4>
<ul>
<li><code>git restore path-to-file</code>: working-directory 의 파일 변경 취소</li>
<li><code>git restore --staged path-to-file</code>: Index 의 파일 변경 취소</li>
</ul>
<h4 id="git-git-reset">(git) git-reset</h4>
<ul>
<li><code>git reset -- path-to-file</code>: Index 의 파일(Index에 파일이 있다는 것은 staged 상태임)을 unstaging 으로 변경</li>
<li><code>git checkout path-to-file</code></li>
</ul>
<p>reset 명령은 HEAD가 가리키는 브랜치의 commit 을 바꿉니다.</p>
<p>옵션은 --soft, --mixed, --hard 3가지가 있으며 기본은 --mixed 입니다.</p>
<p>특정 파일 1개를 3회 commit 을 한 상태, 각 commit 의 해시 값은 v1, v2, v3 라고 가정합니다.</p>
<p>reset 명령으로 commit 상태를 v2로 변경할 때, 옵션별 실행 결과입니다.</p>
<table>
<thead>
<tr>
<th>옵션</th>
<th><center>결과</center></th>
</tr>
</thead>
<tbody>
<tr>
<td>--soft  v2</td>
<td>HEAD: v2, Index: v3, working-directory: v3</td>
</tr>
<tr>
<td>--mixed v2</td>
<td>HEAD: v2, Index: v2, working-directory: v3</td>
</tr>
<tr>
<td>--hard  v2</td>
<td>HEAD: v2, Index: v2, working-directory: v2</td>
</tr>
</tbody>
</table>
<p>commit 해시 값을 파라미터로 전달하지 않고, 이전의 commit 해시 값으로 변경할 경우 아래와 같이 실행합니다.</p>
<p><code>git reset --soft HEAD~</code></p>
<p>같이 commit 해야할 파일을 실수로 누락했을 경우 사용될 수 있습니다.</p>
<p>reset 명령으로 Index 의 특정 파일을 HEAD에서 특정 commit 버전에 포함된 파일로 변경할 수 있습니다.</p>
<p><code>git reset v2 -- file.txt</code></p>
<p>HEAD 의 v2 버전 상태의 file.txt를 Index에 적용합니다.</p>
<p>최근 2건의 commit 을 하나로 합쳐서 1건의 commit 으로 정리하고자 할 때 아래와 같이 reset 명령을 사용합니다.</p>
<p><code>git reset --soft HEAD~2</code> 혹은 <code>git reset --soft HEAD@{2}</code></p>
<p>reset 명령은 Untracked 파일(로컬에서 신규 생성한 파일)은 그대로 유지합니다.</p>
<h4 id="git-git-push">(git) git-push</h4>
<ul>
<li><code>git push origin +test</code>: 원격지 브랜치 test에 강제 push 를 합니다. <code>git push origin test -f</code> 와 같습니다. (강제 push를 하게되면 원격지의 commit history 가 덮어씌워 집니다.)</li>
</ul>
<h4 id="git-git-clean">(git) git-clean</h4>
<p>Untracked 파일만 삭제하는 명령입니다. (tracked 파일은 대상이 아닙니다.)</p>
<ul>
<li><code>git clean -f</code>: 파일만 삭제</li>
<li><code>git clean -f -d</code>: 파일 및 디렉토리 삭제</li>
<li><code>git clean -f -d -x</code>: 파일 및 디렉토리 및 무시된 파일 삭제</li>
<li><code>git clean -n</code>: 삭제될 대상을 확인</li>
</ul>
<h4 id="git-git-checkout">(git) git-checkout</h4>
<p><code>git checkout branch</code>와 <code>git reset --hard 브랜치</code> 는</p>
<h4 id="git-git-commit">(git) git-commit</h4>
<ul>
<li><code>git commit --amend</code>: Index 에 추가된 항목으로 commit 을 재작성</li>
</ul>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ git commit -m &#39;메시지&#39;
</span></span><span style="display:flex;"><span>$ git add forgotten_file
</span></span><span style="display:flex;"><span>$ git commit --amend
</span></span></code></pre></div><h4 id="git-git-ls-files">(git) git-ls-files</h4>
<ul>
<li><code>git ls-files -s</code>: (Index)</li>
</ul>
<h4 id="git-git-branch">(git) git-branch</h4>
<ul>
<li><code>git branch --list</code></li>
<li><code>git branch -vv</code></li>
<li><code>git branch -avv</code>: 로컬/원격지 모든 브랜치 조회하면서 tracking 상태 확인</li>
<li><code>git branch test --track origin/main</code>: 원격지 origin/main 브랜치를 start-point 로 하는 test 브랜치 생성</li>
<li><code>git branch --set-upstream-to origin/main</code>: 현재 로컬 브랜치를 원격지 origin/main 브랜치로 tracking 하도록 설정</li>
<li><code>git branch test --set-upstream-to origin/main</code>: 로컬 브랜치 test를 원격지 origin/main 브랜치로 tracking 하도록 설정</li>
<li><code>git switch test</code></li>
<li><code>git push origin test</code>: 로컬 브랜치 test를 원격지에 생성</li>
<li><code>git push origin :test</code>: 원격지 브랜치 test를 삭제</li>
<li><code>git branch -d</code>: merge 하지 않은 커밋을 담고 있는 브랜치는 <code>git branch -D</code> 로 강제 삭제할 수 있음</li>
<li><code>git branch -r</code>: 원격지 브랜치 조회</li>
<li><code>git branch -a</code>: 로컬/원격지 브랜치 모두 조회</li>
<li><code>git remote show origin</code>: 로컬/원격지 tracking 상태 확인</li>
<li><code>git remote prune origin</code>: 원격 브랜치와 유효하지 않는 참조를 삭제</li>
<li><code>git remote update --prune</code></li>
<li><code>git fetch -p</code>: fetch 를 실행하면서 원격 브랜치의 참조가 유효하지 않는 상태의 브랜치를 제거</li>
</ul>
<h4 id="git-git-config-alias">(git) git-config (alias)</h4>
<ul>
<li><code>git config --global alias.br branch</code></li>
<li><code>git config --global alias.unstage 'reset HEAD --'</code></li>
<li><code>git config --global alias.last 'log -1 HEAD'</code></li>
</ul>
<h4 id="git-git-diff">(git) git-diff</h4>
<ul>
<li><code>git diff</code></li>
<li><code>git diff HEAD</code></li>
<li><code>git diff HEAD --color-words</code></li>
<li><code>git diff HEAD --word-diff</code></li>
</ul>
<h4 id="apache-httpdconf">(apache) httpd.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ServerRoot &#34;/etc/httpd&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Listen 80
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Include conf.modules.d/*.conf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>User apache
</span></span><span style="display:flex;"><span>Group web
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ServerAdmin hi@mgkim.net
</span></span><span style="display:flex;"><span>ServerName develop:80
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;Directory /&gt;
</span></span><span style="display:flex;"><span>  AllowOverride none
</span></span><span style="display:flex;"><span>  Require all denied
</span></span><span style="display:flex;"><span>&lt;/Directory&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DocumentRoot &#34;/var/www/html&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;Files &#34;.ht*&#34;&gt;
</span></span><span style="display:flex;"><span>  Require all denied
</span></span><span style="display:flex;"><span>&lt;/Files&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ErrorLog &#34;/outlog/WEB/httpd/error.log&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>LogLevel warn
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;IfModule log_config_module&gt;
</span></span><span style="display:flex;"><span>  LogFormat &#34;%h %l %u %t \&#34;%r\&#34; %&gt;s %b \&#34;%{Referer}i\&#34; \&#34;%{User-Agent}i\&#34;&#34; combined
</span></span><span style="display:flex;"><span>  LogFormat &#34;%h %l %u %t \&#34;%r\&#34; %&gt;s %b&#34; common
</span></span><span style="display:flex;"><span>  &lt;IfModule logio_module&gt;
</span></span><span style="display:flex;"><span>    LogFormat &#34;%h %l %u %t \&#34;%r\&#34; %&gt;s %b \&#34;%{Referer}i\&#34; \&#34;%{User-Agent}i\&#34; %I %O&#34; combinedio
</span></span><span style="display:flex;"><span>  &lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>  CustomLog &#34;/outlog/WEB/httpd/access.log&#34; combined
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;IfModule alias_module&gt;
</span></span><span style="display:flex;"><span>  ScriptAlias /cgi-bin/ &#34;/var/www/cgi-bin/&#34;
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;Directory &#34;/var/www/cgi-bin&#34;&gt;
</span></span><span style="display:flex;"><span>  AllowOverride None
</span></span><span style="display:flex;"><span>  Options None
</span></span><span style="display:flex;"><span>  Require all granted
</span></span><span style="display:flex;"><span>&lt;/Directory&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;IfModule mime_module&gt;
</span></span><span style="display:flex;"><span>  TypesConfig /etc/mime.types
</span></span><span style="display:flex;"><span>  AddType application/x-compress .Z
</span></span><span style="display:flex;"><span>  AddType application/x-gzip .gz .tgz
</span></span><span style="display:flex;"><span>  AddType text/html .shtml
</span></span><span style="display:flex;"><span>  AddOutputFilter INCLUDES .shtml
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AddDefaultCharset UTF-8
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;IfModule mime_magic_module&gt;
</span></span><span style="display:flex;"><span>  MIMEMagicFile conf/magic
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>EnableSendfile on
</span></span><span style="display:flex;"><span>IncludeOptional conf.d/*.conf
</span></span></code></pre></div><h4 id="apache-sslconf">(apache) ssl.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Listen 443 https
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog
</span></span><span style="display:flex;"><span>SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
</span></span><span style="display:flex;"><span>SSLSessionCacheTimeout  300
</span></span><span style="display:flex;"><span>SSLRandomSeed startup file:/dev/urandom  256
</span></span><span style="display:flex;"><span>SSLRandomSeed connect builtin
</span></span><span style="display:flex;"><span>SSLCryptoDevice builtin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost _default_:443&gt;
</span></span><span style="display:flex;"><span>  ServerName develop
</span></span><span style="display:flex;"><span>  ErrorLog /outlog/WEB/httpd/develop-error_ssl.log
</span></span><span style="display:flex;"><span>  TransferLog /outlog/WEB/httpd/develop-access_ssl.log
</span></span><span style="display:flex;"><span>  LogLevel warn
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine on
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2 -SSLv3
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:3DES:!aNULL:!MD5:!SEED:!IDEA
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/develop.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/develop.key
</span></span><span style="display:flex;"><span>  &lt;Files ~ &#34;\.(cgi|shtml|phtml|php3?)$&#34;&gt;
</span></span><span style="display:flex;"><span>    SSLOptions +StdEnvVars
</span></span><span style="display:flex;"><span>  &lt;/Files&gt;
</span></span><span style="display:flex;"><span>  &lt;Directory &#34;/var/www/cgi-bin&#34;&gt;
</span></span><span style="display:flex;"><span>    SSLOptions +StdEnvVars
</span></span><span style="display:flex;"><span>  &lt;/Directory&gt;
</span></span><span style="display:flex;"><span>  BrowserMatch &#34;MSIE [2-5]&#34; nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0
</span></span><span style="display:flex;"><span>  CustomLog /outlog/WEB/httpd/default-request_ssl.log &#34;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \&#34;%r\&#34; %b&#34;
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><br>
<h4 id="apache-vhost-centos8conf">(apache) vhost-centos8.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName centos8
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On [NC]
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://centos8/$1 [P,L]
</span></span><span style="display:flex;"><span>  #RewriteCond %{HTTP:Upgrade} =websocket [NC]
</span></span><span style="display:flex;"><span>  #RewriteRule /(.*) wss://centos8/$1 [P,L]
</span></span><span style="display:flex;"><span>  #RewriteCond %{HTTP:Upgrade} !=websocket [NC]
</span></span><span style="display:flex;"><span>  #RewriteRule /(.*) https://centos8/$1 [P,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName centos8
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/cockpit/ws-certs.d/centos8.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/cockpit/ws-certs.d/centos8.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/centos8-error.log.%Y-%m-%d 86400 +540&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/centos8-access.log.%Y-%m-%d 86400 +540&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyRequests Off
</span></span><span style="display:flex;"><span>  ProxyPreserveHost On
</span></span><span style="display:flex;"><span>  # AH01961: SSL Proxy requested for centos8:443 but not enabled [Hint: SSLProxyEngine]
</span></span><span style="display:flex;"><span>  SSLProxyEngine On
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>  RequestHeader set X-Forwarded-Proto https
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Proxy balancer://cluster1&gt;
</span></span><span style="display:flex;"><span>    BalancerMember https://127.0.0.1:8000
</span></span><span style="display:flex;"><span>  &lt;/Proxy&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  ProxyPass / balancer://cluster1/ stickysession=JSESSIONID|jsessionid
</span></span><span style="display:flex;"><span>  ProxyPassReverse / balancer://cluster1/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTP:Upgrade} =websocket [NC]
</span></span><span style="display:flex;"><span>  RewriteRule /(.*)           wss://127.0.0.1:8000/$1 [P,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><br>
<h4 id="apache-vhost-nexusconf">(apache) vhost-nexus.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName nexus
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://nexus.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName nexus
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/nexus.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/nexus.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://nexus.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName nexus.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://%{HTTP_HOST}/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName nexus.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/nexus.mgkim.net_ssl-error.log.%Y-%m-%d 86400 +540%&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/nexus.mgkim.net_ssl-access.log.%Y-%m-%d 86400 +540%&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/STAR.mgkim.net.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/STAR.mgkim.net.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyRequests Off
</span></span><span style="display:flex;"><span>  ProxyPreserveHost On
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Proxy *&gt;
</span></span><span style="display:flex;"><span>    Require all granted
</span></span><span style="display:flex;"><span>  &lt;/Proxy&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyPass / http://127.0.0.1:8100/
</span></span><span style="display:flex;"><span>  ProxyPassReverse / http://127.0.0.1:8100/
</span></span><span style="display:flex;"><span>  RequestHeader set X-Forwarded-Proto &#34;https&#34;
</span></span><span style="display:flex;"><span>  #ProxyPassMatch ^/(.*)$ http://127.0.0.1:8100/$1
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><h4 id="apache-vhost-gitlabconf">(apache) vhost-gitlab.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName gitlab
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://gitlab.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName gitlab
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/gitlab.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/gitlab.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://gitlab.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName gitlab.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://%{HTTP_HOST}/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName gitlab.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  DocumentRoot &#34;/opt/gitlab/embedded/service/gitlab-rails/public&#34;
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/gitlab.mgkim.net_ssl-error.log.%Y-%m-%d 86400 +540&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/gitlab.mgkim.net_ssl-access.log.%Y-%m-%d 86400 +540&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/STAR.mgkim.net.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/STAR.mgkim.net.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyRequests Off
</span></span><span style="display:flex;"><span>  ProxyPreserveHost On
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Proxy gitlab&gt;
</span></span><span style="display:flex;"><span>    Require all granted
</span></span><span style="display:flex;"><span>  &lt;/Proxy&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyPass / http://127.0.0.1:8200/
</span></span><span style="display:flex;"><span>  ProxyPassReverse / http://127.0.0.1:8200/
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><h4 id="apache-vhost-jenkinsconf">(apache) vhost-jenkins.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName jenkins
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteCond %{REQUEST_URI} ^/(computer)/.*$
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) http://localhost:8400/$1 [QSA,P,L]
</span></span><span style="display:flex;"><span>  RewriteCond %{REQUEST_URI} ^/(wsagents)/.*$
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) ws://localhost:8400/$1 [QSA,P,L]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://jenkins.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName jenkins
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/jenkins.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/jenkins.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://jenkins.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName jenkins.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteCond %{REQUEST_URI} ^/(computer)/.*$
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) http://localhost:8400/$1 [QSA,P,L]
</span></span><span style="display:flex;"><span>  RewriteCond %{REQUEST_URI} ^/(wsagents)/.*$
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) ws://localhost:8400/$1 [QSA,P,L]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://jenkins.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName jenkins.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/jenkins.mgkim.net_ssl-error.log.%Y-%m-%d 86400 +540&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/jenkins.mgkim.net_ssl-access.log.%Y-%m-%d 86400 +540&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/STAR.mgkim.net.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/STAR.mgkim.net.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTP:Upgrade} =websocket [NC]
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) ws://localhost:8400/$1 [P,L]
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTP:Upgrade} !=websocket [NC]
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) http://localhost:8400/$1 [P,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><h4 id="apache-vhost-dlogconf">(apache) vhost-dlog.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName dlog
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://dlog.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName dlog
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/dlog.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/dlog.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://dlog.mgkim.net/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>### mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName dlog.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteCond %{HTTPS} !=On
</span></span><span style="display:flex;"><span>  RewriteRule /(.*) https://%{HTTP_HOST}/$1 [QSA,R,L]
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:443&gt;
</span></span><span style="display:flex;"><span>  ServerName dlog.mgkim.net
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  #DocumentRoot &#34;/opt/gitlab/embedded/service/gitlab-rails/public&#34;
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/dlog.mgkim.net_ssl-error.log.%Y-%m-%d 86400 +540&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/dlog.mgkim.net_ssl-access.log.%Y-%m-%d 86400 +540&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  SSLEngine On
</span></span><span style="display:flex;"><span>  SSLProtocol all -SSLv2
</span></span><span style="display:flex;"><span>  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
</span></span><span style="display:flex;"><span>  SSLCertificateFile /etc/httpd/conf.d/certs/STAR.mgkim.net.crt
</span></span><span style="display:flex;"><span>  SSLCertificateKeyFile /etc/httpd/conf.d/certs/STAR.mgkim.net.key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyRequests Off
</span></span><span style="display:flex;"><span>  ProxyPreserveHost On
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Proxy gitlab&gt;
</span></span><span style="display:flex;"><span>    Require all granted
</span></span><span style="display:flex;"><span>  &lt;/Proxy&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ProxyPass / http://127.0.0.1:1313/
</span></span><span style="display:flex;"><span>  ProxyPassReverse / http://127.0.0.1:1313/
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><h4 id="apache-vhost-dwwwconf">(apache) vhost-dwww.conf</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  ServerName dwww
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ErrorLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/dwww-error.log.%Y-%m-%d 86400 +540&#34;
</span></span><span style="display:flex;"><span>  CustomLog &#34;|/usr/sbin/rotatelogs /outlog/WEB/httpd/dwww-access.log.%Y-%m-%d 86400 +540&#34; combined
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AllowEncodedSlashes On
</span></span><span style="display:flex;"><span>  # reverse proxy 사용 시 Off
</span></span><span style="display:flex;"><span>  ProxyRequests Off
</span></span><span style="display:flex;"><span>  ProxyPreserveHost On
</span></span><span style="display:flex;"><span>  # BALANCER_WORKER_ROUTE: BalancerMember 의 route 값을 쿠키에 포함 (cluster1, cluster2)
</span></span><span style="display:flex;"><span>  Header add Set-Cookie &#34;ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/&#34; env=BALANCER_ROUTE_CHANGED
</span></span><span style="display:flex;"><span>  Header set Access-Control-Allow-Origin &#34;*&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Proxy balancer://cluster&gt;
</span></span><span style="display:flex;"><span>    BalancerMember http://127.0.0.1:7100 route=cluster1
</span></span><span style="display:flex;"><span>    BalancerMember http://127.0.0.1:7101 route=cluster2
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    ProxySet stickysession=ROUTEID
</span></span><span style="display:flex;"><span>    ## lbmethod
</span></span><span style="display:flex;"><span>    # byrequests: 요청별 분배
</span></span><span style="display:flex;"><span>    # bytraffic: byte 트래픽 가중치 분배
</span></span><span style="display:flex;"><span>    # bybusyness: 보류중 요청 분배
</span></span><span style="display:flex;"><span>    #ProxySet lbmethod=byrequests
</span></span><span style="display:flex;"><span>  &lt;/Proxy&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  ProxyPass / balancer://cluster/
</span></span><span style="display:flex;"><span>  ProxyPassReverse / balancer://cluster/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><h4 id="apache-weblogic-connector">(apache) weblogic-connector</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#00f;font-weight:bold">LoadModule</span> <span style="color:#19177c">weblogic_module</span> <span style="color:#19177c">modules</span><span style="color:#666">/</span><span style="color:#19177c">mod_wl_24</span>.<span style="color:#19177c">so</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#00f;font-weight:bold">IfModule</span> <span style="color:#19177c">mod_weblogic</span>.<span style="color:#19177c">c</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">WebLogicCluster</span> <span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>,<span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>,<span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">ConnectTimeoutSecs</span> <span style="color:#666">8</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">ConnectRetrySecs</span> <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">Idempotent</span> <span style="color:#00f;font-weight:bold">OFF</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">DynamicServerList</span> <span style="color:#00f;font-weight:bold">OFF</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">MatchExpression</span> <span style="color:#666">*</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">KeepAliveEnabled</span> <span style="color:#00f;font-weight:bold">OFF</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#666">/</span><span style="color:#00f;font-weight:bold">IfModule</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#00f;font-weight:bold">Location</span> <span style="color:#666">/</span><span style="color:#19177c">api</span> &gt;
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">WLSRequest</span> <span style="color:#00f;font-weight:bold">On</span>
</span></span><span style="display:flex;"><span>  <span style="color:#bc7a00">#SetHandler weblogic-handler</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f;font-weight:bold">WebLogicCluster</span> <span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>,<span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>,<span style="color:#00f;font-weight:bold">IP</span>:<span style="color:#00f;font-weight:bold">PORT</span>
</span></span><span style="display:flex;"><span>  <span style="color:#bc7a00">#Idempotent OFF</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#666">/</span><span style="color:#00f;font-weight:bold">Location</span>&gt;
</span></span></code></pre></div><h4 id="apache-selinux">(apache) selinux</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>chcon -Rt httpd_log_t /outlog/WEB
</span></span><span style="display:flex;"><span>chcon -Rt httpd_sys_content_t /app/WEB/dlog
</span></span><span style="display:flex;"><span>setsebool -P httpd_can_network_connect on
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>systemctl restart httpd
</span></span></code></pre></div><h4 id="openssl-인증서-생성하기">(openssl) 인증서 생성하기</h4>
<p>개인키(domain.key)와 인증서(domain.crt) 파일을 동시에 생성하는 스크립트 입니다.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#666">[</span>root@develop /etc/httpd/conf.d/certs<span style="color:#666">]</span>$ cat create-cert.sh
</span></span><span style="display:flex;"><span><span style="color:#19177c">DOMAIN</span><span style="color:#666">=</span><span style="color:#19177c">$1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>openssl req -x509 -nodes -days <span style="color:#666">730</span> -newkey rsa:2048 -keyout <span style="color:#19177c">$DOMAIN</span>.key -out <span style="color:#19177c">$DOMAIN</span>.crt -config &lt;<span style="color:#666">(</span>cat <span style="color:#ba2121">&lt;&lt;- TEXT
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">[req]
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">distinguished_name = req_distinguished_name
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">x509_extensions = v3_req
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">prompt = no
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">[req_distinguished_name]
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">countryName             = KR
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">stateOrProvinceName     = Seoul
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">localityName            = Seonyudo
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">organizationName        = SPACESOFT
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">organizationalUnitName  = Dev Team
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">CN = $DOMAIN
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">[v3_req]
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">keyUsage = critical, digitalSignature, keyAgreement
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">extendedKeyUsage = serverAuth
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">subjectAltName = @alt_names
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">[alt_names]
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">DNS.1 = $DOMAIN
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">TEXT</span><span style="color:#666">)</span> -sha256
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>root@develop /etc/httpd/conf.d/certs<span style="color:#666">]</span>$
</span></span></code></pre></div><h4 id="oracle12-sysctl-설정">(oracle12) sysctl 설정</h4>
<p>파일: /etc/sysctl.conf</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>fs.aio-max-nr <span style="color:#666">=</span> <span style="color:#666">1048576</span>
</span></span><span style="display:flex;"><span>fs.file-max <span style="color:#666">=</span> <span style="color:#666">6815744</span>
</span></span><span style="display:flex;"><span>kernel.shmall <span style="color:#666">=</span> <span style="color:#666">2097152</span>
</span></span><span style="display:flex;"><span>kernel.shmmax <span style="color:#666">=</span> <span style="color:#666">4056393728</span>
</span></span><span style="display:flex;"><span>kernel.shmmni <span style="color:#666">=</span> <span style="color:#666">4096</span>
</span></span><span style="display:flex;"><span>kernel.sem <span style="color:#666">=</span> <span style="color:#666">250</span> <span style="color:#666">32000</span> <span style="color:#666">100</span> <span style="color:#666">128</span>
</span></span><span style="display:flex;"><span>net.ipv4.ip_local_port_range <span style="color:#666">=</span> <span style="color:#666">9000</span> <span style="color:#666">65500</span>
</span></span><span style="display:flex;"><span>net.core.rmem_default <span style="color:#666">=</span> <span style="color:#666">262144</span>
</span></span><span style="display:flex;"><span>net.core.rmem_max <span style="color:#666">=</span> <span style="color:#666">4194304</span>
</span></span><span style="display:flex;"><span>net.core.wmem_default <span style="color:#666">=</span> <span style="color:#666">262144</span>
</span></span><span style="display:flex;"><span>net.core.wmem_max <span style="color:#666">=</span> <span style="color:#666">1048586</span>
</span></span></code></pre></div><p>반영: <code>sysctl -p</code></p>
<p>확인: <code>sysctl -a</code></p>
<br>
<h4 id="oracle12-limits-설정">(oracle12) limits 설정</h4>
<p>/etc/security/limits.conf</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>oracle soft nproc <span style="color:#666">2047</span>
</span></span><span style="display:flex;"><span>oracle hard nproc <span style="color:#666">16384</span>
</span></span><span style="display:flex;"><span>oracle soft nofile <span style="color:#666">1024</span>
</span></span><span style="display:flex;"><span>oracle hard nofile <span style="color:#666">65536</span>
</span></span></code></pre></div><br>
<h4 id="oracle12-시스템-계정">(oracle12) 시스템 계정</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>groupadd oinstall
</span></span><span style="display:flex;"><span>groupadd dba
</span></span><span style="display:flex;"><span>useradd -g oinstall -G dba oracle
</span></span></code></pre></div><br>
<h4 id="oracle12-설치-디렉토리">(oracle12) 설치 디렉토리</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir -p /prod/oracle12/app
</span></span><span style="display:flex;"><span>mkdir -p /prod/oracle12/oraInventory
</span></span><span style="display:flex;"><span>chown -R oracle:oinstall /prod/oracle12/app
</span></span><span style="display:flex;"><span>chown -R oracle:oinstall /prod/oracle12/oraInventory
</span></span><span style="display:flex;"><span>chmod -R <span style="color:#666">775</span> /prod/oracle12/app
</span></span><span style="display:flex;"><span>chmod -R <span style="color:#666">775</span> /prod/oracle12/oraInventory
</span></span><span style="display:flex;"><span>chmod g+s /prod/oracle12/app
</span></span><span style="display:flex;"><span>chmod g+s /prod/oracle12/oraInventory
</span></span></code></pre></div><br>
<h4 id="oracle12-시스템-변수">(oracle12) 시스템 변수</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">TMPDIR</span><span style="color:#666">=</span><span style="color:#19177c">$TMP</span>
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">ORACLE_BASE</span><span style="color:#666">=</span>/prod/oracle12/app/
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">ORACLE_HOME</span><span style="color:#666">=</span><span style="color:#19177c">$ORACLE_BASE</span>/product/12.2.0/dbhome_1
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">ORACLE_HOME_LISTNER</span><span style="color:#666">=</span><span style="color:#19177c">$ORACLE_HOME</span>/bin/lsnrctl
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">ORACLE_SID</span><span style="color:#666">=</span>orcl
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">LD_LIBRARY_PATH</span><span style="color:#666">=</span>/lib:/usr/lib:/usr/lib64:<span style="color:#19177c">$ORACLE_HOME</span>/lib
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">CLASSPATH</span><span style="color:#666">=</span><span style="color:#19177c">$ORACLE_HOME</span>/jlib:<span style="color:#19177c">$ORACLE_HOME</span>/rdbms/jlib
</span></span><span style="display:flex;"><span><span style="color:#008000">export</span> <span style="color:#19177c">PATH</span><span style="color:#666">=</span><span style="color:#19177c">$ORACLE_HOME</span>/bin:<span style="color:#19177c">$PATH</span>:<span style="color:#19177c">$HOME</span>/.local/bin:<span style="color:#19177c">$HOME</span>/bin
</span></span></code></pre></div><br>
<h4 id="oracle12-gui-패키지-설치">(oracle12) gui 패키지 설치</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ yum grouplist
</span></span><span style="display:flex;"><span>사용 가능한 환경 그룹 :
</span></span><span style="display:flex;"><span>   서버 - GUI 사용
</span></span><span style="display:flex;"><span>   최소 설치
</span></span><span style="display:flex;"><span>   워크스테이션
</span></span><span style="display:flex;"><span>   가상화 호스트
</span></span><span style="display:flex;"><span>   사용자 정의 운영 체제
</span></span><span style="display:flex;"><span>$ yum groupinstall <span style="color:#ba2121">&#34;서버 - GUI 사용&#34;</span>
</span></span></code></pre></div><p>설치 후 runlevel 변경: <code>$ systemctl set-default graphical.target</code></p>
<br>
<h4 id="oracle12-oracle12c-ee-설치">(oracle12) oracle12c-ee 설치</h4>
<p>gui 환경으로 booting 후 oracle 계정으로 로그인하고 <code>runInstaller</code> 실행</p>
<p>설치 파일: <code>oracle-ee_12102_linux_x64_1of2.zip</code>, <code>oracle-ee_12102_linux_x64_2of2.zip</code></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>install
</span></span><span style="display:flex;"><span>response
</span></span><span style="display:flex;"><span>rpm
</span></span><span style="display:flex;"><span>runInstaller
</span></span><span style="display:flex;"><span>sshsetup
</span></span><span style="display:flex;"><span>stage
</span></span><span style="display:flex;"><span>welcome.html
</span></span></code></pre></div><br>
<h4 id="oracle12-systemctl-등록">(oracle12) systemctl 등록</h4>
<p>systemctl 환경변수 파일: /etc/sysconfig/ora12c.env</p>
<p>소유자(oracle) 설정: <code>chown oracle:db /etc/sysconfig/ora12c.env</code></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#19177c">ORACLE_BASE</span><span style="color:#666">=</span>/prod/oracle12/app
</span></span><span style="display:flex;"><span><span style="color:#19177c">ORACLE_HOME</span><span style="color:#666">=</span><span style="color:#19177c">$ORACLE_BASE</span>/product/12.2.0/dbhome_1
</span></span><span style="display:flex;"><span><span style="color:#19177c">ORACLE_SID</span><span style="color:#666">=</span>ora12c
</span></span></code></pre></div><br>
<h4 id="oracle12-각종-오류">(oracle12) 각종 오류</h4>
<ul>
<li>
<p>ORA-01102: cannot mount database in EXCLUSIVE mode</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat <span style="color:#19177c">$ORACLE_BASE</span>/admin/ora12c/pfile/init.ora.1028202115570
</span></span><span style="display:flex;"><span>cp <span style="color:#19177c">$ORACLE_BASE</span>/admin/ora12c/pfile/init.ora.1028202115570 <span style="color:#19177c">$ORACLE_HOME</span>/dbs/initora12c.ora
</span></span></code></pre></div></li>
<li>
<p>ORA-01033: ORACLE initialization or shutdown in progress</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span>pluggable<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">database</span><span style="color:#bbb"> </span>pdborcl<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">open</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">read</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">write</span>;<span style="color:#bbb">
</span></span></span></code></pre></div></li>
</ul>
<br>
<p>systemctl service 파일 생성</p>
<p>service 파일에는 환경변수 파일을 적용할 것</p>
<p><code>ora12c@lsnrctl.service</code>, <code>ora12c@dbms.service</code></p>
<br>
<h4 id="oracle12-oratab-파일">(oracle12) oratab 파일</h4>
<p>파일: /etc/oratab</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ora12c:/prod/oracle12/app/product/12.2.0/dbhome_1:Y
</span></span></code></pre></div><p>소유자(oracle) 설정: <code>chown oracle:db /etc/oratab</code></p>
<br>
<h4 id="oracle12-max_string_size--extended">(oracle12) max_string_size = EXTENDED</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>startup<span style="color:#bbb"> </span>mount;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">database</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">open</span><span style="color:#bbb"> </span>migrate;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span>con_id,<span style="color:#bbb"> </span>name,<span style="color:#bbb"> </span>open_mode<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>v$pdbs;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">session</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span>container<span style="color:#666">=</span>PDB$SEED;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">system</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span>max_string_size<span style="color:#666">=</span>extended<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">scope</span><span style="color:#666">=</span>spfile;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">@?/</span>rdbms<span style="color:#666">/</span><span style="color:#008000;font-weight:bold">admin</span><span style="color:#666">/</span>utl32k.<span style="color:#008000;font-weight:bold">sql</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">session</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span>container<span style="color:#666">=</span>SPADBP;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span>pluggable<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">database</span><span style="color:#bbb"> </span>SPADBP<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">open</span><span style="color:#bbb"> </span>upgrade;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">system</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span>max_string_size<span style="color:#666">=</span>extended<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">scope</span><span style="color:#666">=</span>spfile;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">@?/</span>rdbms<span style="color:#666">/</span><span style="color:#008000;font-weight:bold">admin</span><span style="color:#666">/</span>utl32k.<span style="color:#008000;font-weight:bold">sql</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">@?/</span>rdbms<span style="color:#666">/</span><span style="color:#008000;font-weight:bold">admin</span><span style="color:#666">/</span>utlrp.<span style="color:#008000;font-weight:bold">sql</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span>pluggable<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">database</span><span style="color:#bbb"> </span>SPADBP<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">close</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">immediate</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><br>
<h4 id="oracle12-pdb-자동-시작">(oracle12) PDB 자동 시작</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span>con_id,<span style="color:#bbb"> </span>name,<span style="color:#bbb"> </span>open_mode<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>v$pdbs;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">OR</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">REPLACE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TRIGGER</span><span style="color:#bbb"> </span>open_pdbs<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">AFTER</span><span style="color:#bbb"> </span>STARTUP<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ON</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DATABASE</span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">BEGIN</span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">EXECUTE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IMMEDIATE</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;ALTER PLUGGABLE DATABASE ALL OPEN&#39;</span>;<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">END</span><span style="color:#bbb"> </span>open_pdbs;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#666">/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">commit</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><br>
<h4 id="oracle12-oracle-계정-생성">(oracle12) oracle 계정 생성</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">alter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">session</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#34;_oracle_script&#34;</span><span style="color:#666">=</span><span style="color:#008000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span>TABLESPACE<span style="color:#bbb"> </span>TS_DATA01<span style="color:#bbb"> </span>DATAFILE<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;/data/DB/oradata/ora12c/SPADBP/TS_DATA01.dbf&#39;</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SIZE</span><span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#008000;font-weight:bold">G</span><span style="color:#bbb"> </span>AUTOEXTEND<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ON</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NEXT</span><span style="color:#bbb"> </span><span style="color:#666">10</span>M;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">USER</span><span style="color:#bbb"> </span>SPADBA<span style="color:#bbb"> </span>IDENTIFIED<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">BY</span><span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span>TABLESPACE<span style="color:#bbb"> </span>TS_DATA01;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">USER</span><span style="color:#bbb"> </span>SPAAPP<span style="color:#bbb"> </span>IDENTIFIED<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">BY</span><span style="color:#bbb"> </span>SPAAPP1234<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span>TABLESPACE<span style="color:#bbb"> </span>TS_DATA01;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">USER</span><span style="color:#bbb"> </span>SPADBA<span style="color:#bbb"> </span>QUOTA<span style="color:#bbb"> </span>UNLIMITED<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ON</span><span style="color:#bbb"> </span>TS_DATA01;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">GRANT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CONNECT</span>,<span style="color:#bbb"> </span>RESOURCE,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VIEW</span>,<span style="color:#bbb"> </span>EXP_FULL_DATABASE,<span style="color:#bbb"> </span>IMP_FULL_DATABASE,<span style="color:#bbb"> </span>DBA<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TO</span><span style="color:#bbb"> </span>SPADBA;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ROLE</span><span style="color:#bbb"> </span>RL_SPA_APP;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">GRANT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CONNECT</span>,<span style="color:#bbb"> </span>RESOURCE<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TO</span><span style="color:#bbb"> </span>RL_SPA_APP;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">GRANT</span><span style="color:#bbb"> </span>RL_SPA_APP<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TO</span><span style="color:#bbb"> </span>SPAAPP;<span style="color:#bbb">
</span></span></span></code></pre></div><br>
<h4 id="oracle12-impexp">(oracle12) imp/exp</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>exp.exe SPADBA/1@SPADBP FILE=&#39;Z:\SPADBP.dmp&#39; GRANTS=Y INDEXES=Y ROWS=Y CONSTRAINTS=Y TRIGGERS=N COMPRESS=Y DIRECT=N CONSISTENT=N OWNER=(SPADBA)
</span></span><span style="display:flex;"><span>imp.exe SPADBA/1@SPADBP FILE=&#39;Z:\SPADBP.dmp&#39; FEEDBACK=1000 GRANTS=Y INDEXES=Y ROWS=Y CONSTRAINTS=Y IGNORE=N SHOW=N DESTROY=N ANALYZE=Y SKIP_UNUSABLE_INDEXES=N RECALCULATE_STATISTICS=N FROMUSER=SPADBA TOUSER=SPADBA
</span></span></code></pre></div><br>
<h4 id="oracle12-drop-table-문">(oracle12) drop table 문</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;drop table &#39;</span><span style="color:#666">||</span><span style="color:#008000;font-weight:bold">table_name</span><span style="color:#666">||</span><span style="color:#ba2121">&#39; cascade constraints;&#39;</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>user_tables;<span style="color:#bbb">
</span></span></span></code></pre></div><h4 id="oracle12-character-set-설정">(oracle12) character-set 설정</h4>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>nls_database_parameters<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">parameter</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;%NLS_CHARACTERSET%&#39;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">NLS_CHARACTERSET  WE8MSWIN1252
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">**/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">NLS_CHARACTERSET  AL32UTF8
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">*/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>SHUTDOWN<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IMMEDIATE</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>STARTUP<span style="color:#bbb"> </span>MOUNT;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SYSTEM</span><span style="color:#bbb"> </span>ENABLE<span style="color:#bbb"> </span>RESTRICTED<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SESSION</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SYSTEM</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span>JOB_QUEUE_PROCESSES<span style="color:#666">=</span><span style="color:#666">0</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SYSTEM</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span>AQ_TM_PROCESSES<span style="color:#666">=</span><span style="color:#666">0</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DATABASE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">OPEN</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DATABASE</span><span style="color:#bbb"> </span><span style="color:#008000">CHARACTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span>INTERNAL_USE<span style="color:#bbb"> </span>AL32UTF8;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>SHUTDOWN<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IMMEDIATE</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>STARTUP;<span style="color:#bbb">
</span></span></span></code></pre></div><br>

	
	
	
</div>


          </main>
        </div>
      </div>
    </div>
    
        
    
  <style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: {
      manual: true,
      onReady() {
        const { autoLoader, builtInPlugins } = window.markmap;
        autoLoader.transformPlugins = builtInPlugins.filter(plugin => plugin.name !== 'prism');
      },
  },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
<script src='/js/deflate.js'></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css"
      integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js"
        integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/mhchem.min.js"
        integrity="sha512-V1hl0fnOXW6Cdqe5ZVqtw8TBpJVpu3XRDRQti96j/04+tMarPrCdXEUE3UdfvfKYTpOn9DV4zEZBVr0HhDiuiQ=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js"
       integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous"
       onload='renderMathInElement(document.body, null);'>
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@9.2.2/dist/mermaid.min.js" integrity="sha512-IX+bU+wShHqfqaMHLMrtwi4nK6W/Z+QdZoL4kPNtRxI2wCLyHPMAdl3a43Fv1Foqv4AP+aiW6hg1dcrTt3xc+Q==" crossorigin="anonymous"></script>
<script src="/js/main.min.cb60271b4607b0814d09c13d1ba59ea4ff218de622cc7a51c2403d3d292d9320.js" integrity="sha256-y2AnG0YHsIFNCcE9G6WepP8hjeYizHpRwkA9PSktkyA=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
